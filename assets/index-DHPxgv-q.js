import{i as Se,g as ke,R as q,j as e,H as Ce,M as me,C as Y,F as he,a as Ie,U as G,L as ae,S as ze,r as p,A as ue,q as O,c as _,o as $,l as ie,b as oe,d as Re,w as F,e as J,B as De,X as Q,I as fe,f as Ae,h as Z,s as le,P as ye,k as Be,T as de,m as _e,n as Ne,p as ee,t as D,u as ce,v as Te,x as te,y as be,z as X,D as Ee,E as We,G as Me,J as Le,K as Pe,N as Oe,O as Fe,Z as Ue,W as He,Q as qe,V as $e,Y as je,_ as H,$ as se,a0 as Je,a1 as Ke,a2 as Ge,a3 as Ve,a4 as Ye,a5 as Xe,a6 as Qe}from"./vendor-DsGyVhoC.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))y(t);new MutationObserver(t=>{for(const m of t)if(m.type==="childList")for(const c of m.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&y(c)}).observe(document,{childList:!0,subtree:!0});function g(t){const m={};return t.integrity&&(m.integrity=t.integrity),t.referrerPolicy&&(m.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?m.credentials="include":t.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function y(t){if(t.ep)return;t.ep=!0;const m=g(t);fetch(t.href,m)}})();const Ze="modulepreload",et=function(r){return"/bg3-raid-manager/"+r},pe={},tt=function(l,g,y){let t=Promise.resolve();if(g&&g.length>0){let n=function(s){return Promise.all(s.map(x=>Promise.resolve(x).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");t=n(g.map(s=>{if(s=et(s),s in pe)return;pe[s]=!0;const x=s.endsWith(".css"),o=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${o}`))return;const a=document.createElement("link");if(a.rel=x?"stylesheet":Ze,x||(a.as="script"),a.crossOrigin="",a.href=s,u&&a.setAttribute("nonce",u),document.head.appendChild(a),x)return new Promise((d,f)=>{a.addEventListener("load",d),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})}))}function m(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return t.then(c=>{for(const u of c||[])u.status==="rejected"&&m(u.reason);return l().catch(m)})},V="/bg3-raid-manager/assets/logo-BLpM7sGS.svg",st={apiKey:"AIzaSyAsbaWbo3DoSTrRFhkaf9XujWPpmeGSjAE",authDomain:"bg3-raid-manager.firebaseapp.com",projectId:"bg3-raid-manager",storageBucket:"bg3-raid-manager.firebasestorage.app",messagingSenderId:"773826713403",appId:"1:773826713403:web:c15fdfca708d47f4fcc91e"},nt=Se(st),j=ke(nt);console.log("ğŸ”¥ Firebase Connected (Real DB Mode)");const rt=({activeTab:r,setActiveTab:l,isMobile:g,user:y})=>{const[t,m]=q.useState(0),[c,u]=q.useState(!1),[n,s]=q.useState(!1);q.useEffect(()=>{const a=d=>{d.shiftKey&&d.altKey&&(d.key==="R"||d.key==="r")&&u(f=>!f)};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]);const x=()=>{localStorage.clear(),sessionStorage.clear(),setUser(null),window.location.reload()},o=[{id:"home",label:"í™ˆ",icon:Ce},{id:"chat",label:"ì±„íŒ…",icon:me},{id:"calendar",label:"ì¼ì •",icon:Y},{id:"tactics",label:"ì „ìˆ íŒ",icon:he},{id:"save",label:"ì„¸ì´ë¸Œ",icon:Ie},{id:"profile",label:"í”„ë¡œí•„",icon:G}];return isAdmin&&o.push({id:"admin",label:"ì•¼ì˜ì§€ ê´€ë¦¬",icon:ze}),g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"glass",style:{position:"fixed",top:0,left:0,right:0,height:"60px",padding:"0 20px",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:0,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:e.jsx("h2",{style:{fontSize:"1.2rem",margin:0,color:"white"},children:"Baldur's Gate 3"})}),e.jsxs("nav",{className:"glass",style:{position:"fixed",bottom:0,left:0,right:0,height:"70px",zIndex:1e3,display:"flex",justifyContent:"space-around",alignItems:"center",borderRadius:0,borderTop:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(20px)",background:"rgba(0,0,0,0.8)"},children:[o.map(a=>{const d=a.icon,f=r===a.id;return e.jsxs("button",{onClick:()=>l(a.id),style:{background:"transparent",border:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",color:f?"var(--accent-color)":"rgba(255,255,255,0.5)",padding:"5px",flex:1},children:[e.jsx(d,{size:20}),e.jsx("span",{style:{fontSize:"0.7rem"},children:a.label})]},a.id)}),e.jsxs("button",{onClick:()=>s(!0),style:{background:"transparent",border:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",color:"rgba(248, 113, 113, 0.8)",padding:"5px",flex:1},children:[e.jsx(ae,{size:20}),e.jsx("span",{style:{fontSize:"0.7rem"},children:"ë‚˜ê°€ê¸°"})]})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),style:{maxWidth:"320px",padding:"30px"},children:[e.jsx("h3",{style:{fontSize:"1.3rem",marginBottom:"15px"},children:"ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"}),e.jsx("p",{style:{opacity:.7,marginBottom:"25px",fontSize:"0.9rem"},children:"ì €ì¥ëœ ë¡œê·¸ì¸ ì •ë³´ê°€ ê¸°ê¸°ì—ì„œ ì‚­ì œë©ë‹ˆë‹¤."}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>s(!1),style:{flex:1,padding:"12px",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"white",cursor:"pointer"},children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:x,style:{flex:1,padding:"12px",borderRadius:"10px",border:"none",background:"#ef4444",color:"white",fontWeight:"bold",cursor:"pointer"},children:"í™•ì¸"})]})]})})]}):e.jsxs("aside",{className:"glass",style:{width:"250px",height:"calc(100vh - 40px)",margin:"20px",padding:"20px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"0 0 20px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[c&&e.jsx("button",{id:"db-reset-btn",onClick:async()=>{if(confirm("âš ï¸ ê²½ê³ : ì •ë§ë¡œ DBë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëŒì´í‚¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")){const{collection:a,getDocs:d,deleteDoc:f}=await tt(async()=>{const{collection:k,getDocs:A,deleteDoc:R}=await import("./vendor-DsGyVhoC.js").then(W=>W.a7);return{collection:k,getDocs:A,deleteDoc:R}},[]);(await d(a(j,"users_v2"))).forEach(k=>f(k.ref)),(await d(a(j,"camps"))).forEach(k=>f(k.ref)),alert("ì´ˆê¸°í™” ì™„ë£Œ. ì¬ì ‘ì†í•©ë‹ˆë‹¤."),x()}},style:{background:"red",color:"white",border:"none",padding:"5px",marginBottom:"10px",fontSize:"0.7rem",cursor:"pointer",width:"100%"},children:"[ADMIN] DB ì´ˆê¸°í™”"}),e.jsx("img",{src:V,alt:"BG3",style:{width:"100%",height:"auto",marginBottom:"10px"},onError:a=>a.target.style.display="none"}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",fontSize:"0.75rem",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(G,{size:12,color:"#4ade80"}),e.jsxs("span",{style:{color:"#4ade80"},children:[t,"/",maxMembers,"ëª… ì ‘ì† ì¤‘"]})]})]}),e.jsx("nav",{style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"20px",flex:1},children:o.map(a=>{const d=a.icon;return e.jsxs("button",{onClick:()=>l(a.id),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:r===a.id?"rgba(255,255,255,0.15)":"transparent",color:r===a.id?"white":"rgba(255,255,255,0.7)",borderRadius:"12px",transition:"all 0.2s",border:"none",cursor:"pointer",fontSize:"0.95rem",fontWeight:r===a.id?"bold":"normal"},children:[e.jsx(d,{size:20,color:r===a.id?"var(--accent-color)":"currentColor"}),a.label]},a.id)})}),e.jsxs("div",{style:{marginTop:"auto",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--accent-color)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(G,{size:20,color:"white"})}),e.jsx("div",{style:{flex:1,overflow:"hidden"},children:e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:y.nickname})}),e.jsx("button",{onClick:()=>s(!0),style:{background:"rgba(248, 113, 113, 0.15)",border:"1px solid rgba(248, 113, 113, 0.4)",borderRadius:"8px",padding:"10px 15px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",color:"#f87171",fontWeight:"bold",fontSize:"0.85rem"},title:"ë¡œê·¸ì•„ì›ƒ",children:e.jsx(ae,{size:16})})]}),n&&e.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),style:{maxWidth:"350px",padding:"30px",textAlign:"center"},children:[e.jsx("h3",{style:{fontSize:"1.4rem",marginBottom:"10px",marginTop:"10px"},children:"ë¡œê·¸ì•„ì›ƒ"}),e.jsxs("p",{style:{opacity:.8,marginBottom:"30px",lineHeight:"1.5"},children:["ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.8rem",opacity:.5},children:"(ëª¨ë“  ë¡œê·¸ì¸ ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤)"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>s(!1),style:{flex:1,padding:"14px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"white",cursor:"pointer",fontWeight:"bold"},children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:x,style:{flex:1,padding:"14px",borderRadius:"12px",border:"none",background:"linear-gradient(45deg, #ef4444, #dc2626)",color:"white",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 15px rgba(239,68,68,0.3)"},children:"í™•ì¸"})]})]})})]})},ne=({user:r,setActiveTab:l})=>{const[g,y]=p.useState([]),[t,m]=p.useState(!0),[c,u]=p.useState(()=>{const s=localStorage.getItem("bg3_daily_goals");return s?JSON.parse(s):[{id:1,text:"ê¸´ íœ´ì‹ ì·¨í•˜ê¸° (ì£¼ë¬¸ ìŠ¬ë¡¯ ë³µêµ¬)",checked:!1},{id:2,text:"ì•¼ì˜ì§€ ë¬¼ì í™•ì¸",checked:!1},{id:3,text:"ìƒì¸ì—ê²Œ ì¡ë™ì‚¬ë‹ˆ íŒë§¤",checked:!1},{id:4,text:"ë™ë£Œ í˜¸ê°ë„ ëŒ€í™”",checked:!1}]});p.useEffect(()=>{localStorage.setItem("bg3_daily_goals",JSON.stringify(c))},[c]),p.useEffect(()=>{(async()=>{try{const x=O(_(j,"schedules"),$("date"),ie(2)),a=(await oe(x)).docs.map(d=>({id:d.id,...d.data()}));y(a)}catch(x){console.error(x)}finally{m(!1)}})()},[]);const n=({icon:s,title:x,desc:o,onClick:a,color:d})=>e.jsxs("div",{onClick:a,className:"glass-panel",style:{padding:"20px",cursor:"pointer",transition:"transform 0.2s",display:"flex",flexDirection:"column",gap:"10px"},onMouseEnter:f=>f.currentTarget.style.transform="translateY(-5px)",onMouseLeave:f=>f.currentTarget.style.transform="translateY(0)",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"12px",background:`rgba(${d}, 0.2)`},children:e.jsx(s,{color:`rgb(${d})`,size:24})}),e.jsx(Re,{size:16,style:{opacity:.5}})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"5px 0",fontSize:"1.1rem"},children:x}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6},children:o})]})]});return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"40px",background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",textAlign:"center"},children:[e.jsxs("h1",{style:{fontSize:"2rem",marginBottom:"10px",textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:["ì–´ì„œì˜¤ì„¸ìš”, ",e.jsx("span",{style:{color:"var(--accent-color)"},children:r?.nickname||"ëª¨í—˜ê°€"}),"ë‹˜"]}),e.jsxs("p",{style:{opacity:.8,maxWidth:"600px",margin:"0 auto"},children:["ë°œë”ìŠ¤ ê²Œì´íŠ¸ ì›ì •ëŒ€ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ",e.jsx("br",{}),"ì˜¤ëŠ˜ì˜ ëª¨í—˜ì„ ì‹œì‘í•˜ê¸° ì „ì— ì¼ì •ì„ í™•ì¸í•˜ê³  íŒŒí‹°ì›ë“¤ê³¼ ì†Œí†µí•´ë³´ì„¸ìš”."]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[e.jsx(n,{icon:Y,title:"ë ˆì´ë“œ ì¼ì •",desc:"ë‹¤ê°€ì˜¤ëŠ” ëª¨í—˜ í™•ì¸í•˜ê¸°",onClick:()=>l("calendar"),color:"248, 113, 113"}),e.jsx(n,{icon:ue,title:"ì„¸ì´ë¸Œ ë¶„ì„",desc:"ë‚´ ìºë¦­í„° ìŠ¤í™ í™•ì¸",onClick:()=>l("save"),color:"167, 139, 250"}),e.jsx(n,{icon:me,title:"ì‘ì „ íšŒì˜ì‹¤",desc:"íŒŒí‹°ì›ë“¤ê³¼ ëŒ€í™”í•˜ê¸°",onClick:()=>l("chat"),color:"52, 211, 153"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",margin:"0 0 20px"},children:[e.jsx(Y,{size:18})," ë‹¤ê°€ì˜¤ëŠ” ì¼ì •"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:t?e.jsx("p",{style:{opacity:.5},children:"ë¡œë”© ì¤‘..."}):g.length===0?e.jsx("p",{style:{opacity:.5},children:"ì˜ˆì •ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."}):g.map(s=>e.jsxs("div",{style:{padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"5px 10px",background:"rgba(0,0,0,0.3)",borderRadius:"6px"},children:[e.jsxs("span",{style:{fontSize:"0.7rem",opacity:.7},children:[s.date?.split("-")[1],"ì›”"]}),e.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:s.date?.split("-")[2]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold"},children:s.title}),e.jsxs("div",{style:{fontSize:"0.8rem",opacity:.6},children:[s.time," â€¢ ",s.type==="raid"?"âš”ï¸ ë ˆì´ë“œ":"ğŸ“œ ìŠ¤í† ë¦¬"]})]})]},s.id))})]})})]})},at=({user:r})=>{const[l,g]=p.useState([]),[y,t]=p.useState(""),[m,c]=p.useState(null),[u,n]=p.useState(!0),s=p.useRef(null),x=p.useRef(null);p.useEffect(()=>{if(!r?.campId)return;const d=O(_(j,"chats"),F("campId","==",r.campId),$("timestamp","asc"),ie(50)),f=J(d,v=>{const S=v.docs.map(k=>({id:k.id,...k.data(),timestamp:k.data().timestamp?.toDate().toISOString()||new Date().toISOString()}));g(S),n(!1)});return()=>f()},[r?.campId]),p.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[l]);const o=d=>{const f=d.target.files[0];if(f){if(f.size>500*1024){alert("ì´ë¯¸ì§€ í¬ê¸°ëŠ” 500KB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");return}const v=new FileReader;v.onloadend=()=>{c(v.result)},v.readAsDataURL(f)}},a=async d=>{if(d.preventDefault(),!y.trim()&&!m||!r?.campId)return;const f=y,v=m;t(""),c(null);try{await Z(_(j,"chats"),{text:f,image:v,sender:r.nickname,uid:r.id,userClass:r.className||"Unknown",campId:r.campId,timestamp:le()})}catch(S){console.error("Error sending message: ",S),alert("ì „ì†¡ ì‹¤íŒ¨!")}};return r?.campId?e.jsxs("div",{className:"glass-panel",style:{height:"calc(100vh - 120px)",display:"flex",flexDirection:"column",padding:0},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(De,{color:"#4fd1c5"})," íŒŒí‹° ì‘ì „ íšŒì˜ì‹¤"]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:["ğŸ”’ ",r.campId," ì•¼ì˜ì§€ (ë³´ì•ˆ ì—°ê²°ë¨)"]})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[u&&e.jsx("div",{style:{textAlign:"center",opacity:.5},children:"ì±„íŒ…ë°© ì—°ê²° ì¤‘..."}),l.length===0&&!u&&e.jsxs("div",{style:{textAlign:"center",opacity:.3,marginTop:"20px"},children:[e.jsx("p",{children:"ì•„ì§ ëŒ€í™”ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("p",{children:"ì‘ì „ì„ ì‹œì‘í•´ë³´ì„¸ìš”!"})]}),l.map(d=>{const f=d.uid===r.id;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:f?"flex-end":"flex-start"},children:[e.jsx("div",{style:{fontSize:"0.8rem",marginBottom:"4px",opacity:.7,display:"flex",alignItems:"center",gap:"4px"},children:!f&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["[",d.userClass,"]"]}),d.sender]})}),e.jsxs("div",{style:{background:f?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"rgba(255, 255, 255, 0.1)",padding:"12px 16px",borderRadius:f?"16px 16px 0 16px":"16px 16px 16px 0",maxWidth:"70%",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255,255,255,0.1)",wordBreak:"break-word"},children:[d.image&&e.jsx("img",{src:d.image,alt:"attached",style:{maxWidth:"100%",borderRadius:"8px",marginBottom:d.text?"10px":"0"}}),d.text]}),e.jsx("span",{style:{fontSize:"0.7rem",opacity:.4,marginTop:"4px"},children:new Date(d.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},d.id)}),e.jsx("div",{ref:s})]}),e.jsxs("form",{onSubmit:a,style:{padding:"20px",background:"rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",gap:"10px",borderRadius:"0 0 16px 16px"},children:[m&&e.jsxs("div",{style:{position:"relative",width:"fit-content"},children:[e.jsx("img",{src:m,alt:"Preview",style:{height:"80px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)"}}),e.jsx("button",{type:"button",onClick:()=>c(null),style:{position:"absolute",top:-5,right:-5,background:"red",borderRadius:"50%",border:"none",color:"white",padding:"2px",cursor:"pointer"},children:e.jsx(Q,{size:12})})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"file",accept:"image/*",ref:x,style:{display:"none"},onChange:o}),e.jsx("button",{type:"button",onClick:()=>x.current.click(),style:{padding:"12px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer"},children:e.jsx(fe,{size:20})}),e.jsx("input",{type:"text",value:y,onChange:d=>t(d.target.value),placeholder:"ì‘ì „ì„ ì „ë‹¬í•˜ì„¸ìš”...",style:{flex:1,padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"white",outline:"none"}}),e.jsx("button",{type:"submit",style:{padding:"12px",borderRadius:"12px",background:"var(--accent-color)",color:"white",border:"none",cursor:"pointer"},children:e.jsx(Ae,{size:20})})]})]})]}):e.jsx("div",{className:"glass-panel",style:{padding:"40px",textAlign:"center"},children:"ì•¼ì˜ì§€ì— ì†Œì†ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤."})},it=({user:r})=>{const[l,g]=p.useState([]),[y,t]=p.useState(new Date),[m,c]=p.useState(!0),[u,n]=p.useState(!1),[s,x]=p.useState({title:"",date:"",type:"vote",timeSlots:[],fixedTime:""}),[o,a]=p.useState("");p.useEffect(()=>{if(!r?.campId)return;const i=O(_(j,"schedules"),F("campId","==",r.campId),$("date")),b=J(i,C=>{const N=C.docs.map(I=>({id:I.id,...I.data()}));g(N),c(!1)});return()=>b()},[r?.campId]);const d=()=>{o&&!s.timeSlots.some(i=>i.time===o)&&(x(i=>({...i,timeSlots:[...i.timeSlots,{time:o,votes:[]}].sort((b,C)=>b.time.localeCompare(C.time))})),a(""))},f=i=>{x(b=>({...b,timeSlots:b.timeSlots.filter(C=>C.time!==i)}))},v=async i=>{i.preventDefault();try{await Z(_(j,"schedules"),{...s,campId:r.campId,creator:r.nickname,createdAt:new Date().toISOString()}),n(!1),x({title:"",date:"",type:"vote",timeSlots:[],fixedTime:""})}catch(b){console.error("Error adding schedule: ",b),alert("ì¼ì • ì¶”ê°€ ì‹¤íŒ¨: "+b.message)}},S=async i=>{window.confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await ee(D(j,"schedules",i))},k=async(i,b,C)=>{const N=l.find(M=>M.id===i);if(!N)return;const I=r.nickname,E=[...N.timeSlots],B={...E[b]};B.votes.includes(I)?B.votes=B.votes.filter(M=>M!==I):B.votes=[...B.votes,I],E[b]=B,await ce(D(j,"schedules",i),{timeSlots:E})},A=y.toLocaleDateString("en-CA"),R=l.filter(i=>i.date===A),W=({date:i,view:b})=>{if(b==="month"){const C=i.toLocaleDateString("en-CA");if(l.some(I=>I.date===C))return e.jsx("div",{style:{height:"6px",width:"6px",background:"#f87171",borderRadius:"50%",margin:"2px auto"}})}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px",color:"white",margin:0},children:[e.jsx(Y,{className:"text-accent"})," ëª¨í—˜ ì¼ì • (Calendar)"]}),e.jsxs("button",{onClick:()=>{x(i=>({...i,date:A})),n(!0)},className:"glass-button",style:{background:"var(--accent-color)",border:"none",padding:"10px 20px",borderRadius:"8px",color:"white",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(ye,{size:18})," ì¼ì • ì¶”ê°€"]})]}),e.jsx("style",{children:`
                    .react-calendar { background: transparent !important; border: none !important; width: 100% !important; color: white !important; font-family: inherit; }
                    .react-calendar__navigation button { color: white; min-width: 44px; background: none; font-size: 1.2rem; }
                    .react-calendar__navigation button:enabled:hover, .react-calendar__navigation button:enabled:focus { background-color: rgba(255,255,255,0.1); }
                    .react-calendar__month-view__weekdays { text-align: center; text-transform: uppercase; font-weight: bold; font-size: 0.8em; opacity: 0.7; color: var(--accent-color); }
                    .react-calendar__month-view__days__day { color: white; padding: 15px; background: transparent; border: none; }
                    .react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background-color: rgba(255,255,255,0.1); border-radius: 12px; }
                    .react-calendar__tile--now { background: rgba(255,255,255,0.1) !important; border-radius: 12px; }
                    .react-calendar__tile--active { background: var(--accent-color) !important; color: white !important; border-radius: 12px; }
                    .react-calendar__month-view__days__day--neighboringMonth { opacity: 0.3; }
                `}),e.jsx(Be,{onChange:t,value:y,tileContent:W,formatDay:(i,b)=>b.getDate()})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"20px",minHeight:"200px"},children:[e.jsxs("h3",{style:{margin:"0 0 15px 0",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"10px"},children:[y.toLocaleDateString()," ì¼ì • ëª©ë¡"]}),m?e.jsx("p",{children:"ë¡œë”© ì¤‘..."}):R.length===0?e.jsx("div",{style:{textAlign:"center",opacity:.5,padding:"20px"},children:"ì´ ë‚ ì§œì— ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"15px"},children:R.map(i=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",gap:"5px"},children:[e.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"10px",background:i.type==="vote"?"rgba(167, 139, 250, 0.2)":"rgba(248, 113, 113, 0.2)",color:i.type==="vote"?"#a78bfa":"#fca5a5"},children:i.type==="vote"?"ğŸ—³ï¸ ì‹œê°„ ì¡°ìœ¨":"âš”ï¸ í™•ì • ì¼ì •"}),e.jsxs("span",{style:{fontSize:"0.7rem",opacity:.5},children:["by ",i.creator]})]}),e.jsx("button",{onClick:()=>S(i.id),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:e.jsx(de,{size:14})})]}),e.jsx("h4",{style:{margin:"0 0 15px",fontSize:"1.2rem"},children:i.title}),i.type==="fixed"?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"1.1rem",color:"var(--accent-color)"},children:[e.jsx(_e,{size:16})," ",i.fixedTime]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:i.timeSlots?.map((b,C)=>{const N=Math.max(...i.timeSlots.map(B=>B.votes.length)),I=N>0&&b.votes.length===N,E=b.votes.includes(r.nickname);return e.jsxs("div",{onClick:()=>k(i.id,C,b.votes),style:{padding:"10px",borderRadius:"8px",background:E?"rgba(78, 209, 197, 0.1)":"rgba(0,0,0,0.2)",border:E?"1px solid var(--accent-color)":"1px solid transparent",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[I&&e.jsx(Ne,{size:14,color:"#fbbf24"}),e.jsx("span",{style:{fontWeight:I?"bold":"normal",color:I?"#fbbf24":"white"},children:b.time})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx("div",{style:{display:"flex",marginRight:"5px"},children:b.votes.map((B,M)=>e.jsx("div",{title:B,style:{width:"6px",height:"6px",borderRadius:"50%",background:"white",opacity:.5,marginLeft:"2px"}},M))}),e.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:[b.votes.length,"í‘œ"]})]})]},C)})})]},i.id))})]}),u&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(5px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>n(!1),children:e.jsxs("div",{className:"glass-panel",style:{width:"450px",padding:"30px"},onClick:i=>i.stopPropagation(),children:[e.jsx("h3",{style:{margin:"0 0 20px"},children:"ìƒˆ ì¼ì • ì¶”ê°€"}),e.jsxs("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx("input",{placeholder:"ì¼ì • ì œëª© (ì˜ˆ: 3ë§‰ ë³´ìŠ¤ì „)",value:s.title,onChange:i=>x({...s,title:i.target.value}),required:!0,style:{padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"date",value:s.date,onChange:i=>x({...s,date:i.target.value}),required:!0,style:{flex:1,padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("select",{value:s.type,onChange:i=>x({...s,type:i.target.value}),style:{padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"},children:[e.jsx("option",{value:"vote",style:{color:"black"},children:"ğŸ—³ï¸ ì‹œê°„ ì¡°ìœ¨"}),e.jsx("option",{value:"fixed",style:{color:"black"},children:"âš”ï¸ í™•ì • ì¼ì •"})]})]}),s.type==="vote"?e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"8px"},children:[e.jsx("label",{style:{fontSize:"0.8rem",opacity:.7,marginBottom:"5px",display:"block"},children:"í›„ë³´ ì‹œê°„ ì¶”ê°€"}),e.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[e.jsx("input",{type:"time",value:o,onChange:i=>a(i.target.value),style:{flex:1,padding:"8px",borderRadius:"6px",border:"none"}}),e.jsx("button",{type:"button",onClick:d,style:{padding:"8px 15px",borderRadius:"6px",background:"var(--accent-color)",color:"white",border:"none",cursor:"pointer"},children:"ì¶”ê°€"})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"5px"},children:s.timeSlots.map(i=>e.jsxs("span",{style:{background:"rgba(255,255,255,0.1)",padding:"5px 10px",borderRadius:"15px",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"5px"},children:[i.time,e.jsx(Q,{size:12,style:{cursor:"pointer"},onClick:()=>f(i.time)})]},i.time))})]}):e.jsx("input",{type:"time",required:!0,value:s.fixedTime,onChange:i=>x({...s,fixedTime:i.target.value}),style:{padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{type:"button",onClick:()=>n(!1),style:{flex:1,padding:"12px",borderRadius:"8px",background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"white",cursor:"pointer"},children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",style:{flex:1,padding:"12px",borderRadius:"8px",background:"var(--accent-color)",border:"none",color:"white",cursor:"pointer"},children:"ë“±ë¡"})]})]})]})})]})},ot=({user:r})=>{const[l,g]=p.useState([]),[y,t]=p.useState(!0);p.useEffect(()=>{if(!r?.campId)return;const n=O(_(j,"save_reports_v2"),F("campId","==",r.campId),$("createdAt","desc"),ie(10)),s=J(n,x=>{const o=x.docs.map(a=>({id:a.id,...a.data()}));g(o),t(!1)});return()=>s()},[r?.campId]);const m=async n=>{confirm("ì´ ë¶„ì„ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await ee(D(j,"save_reports_v2",n))},c=({label:n,value:s,color:x})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx("span",{style:{width:"40px",fontWeight:"bold",fontSize:"0.8rem",color:"rgba(255,255,255,0.7)"},children:n}),e.jsx("div",{style:{flex:1,height:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${s/20*100}%`,height:"100%",background:x,transition:"width 0.5s"}})}),e.jsx("span",{style:{width:"25px",textAlign:"right",fontWeight:"bold"},children:s})]}),u=n=>{const s=n.target.files[0];s&&(t(!0),setTimeout(async()=>{const x={STR:Math.floor(Math.random()*10)+10,DEX:Math.floor(Math.random()*10)+10,CON:Math.floor(Math.random()*10)+10,INT:Math.floor(Math.random()*10)+10,WIS:Math.floor(Math.random()*10)+10,CHA:Math.floor(Math.random()*10)+10},o={filename:s.name,stats:x,meta:{mode:"Honour Mode (Detected)",version:"4.1.1.4",size:(s.size/1024/1024).toFixed(2)+" MB"},companions:[{name:"Shadowheart",img:"ğŸŒ™"},{name:"Astarion",img:"ğŸ§›"}],logs:["[Client] File loaded locally","[Parser] Header verified (LSOF v4)","[Analysis] Stats extracted successfully"],uploader:r.nickname,campId:r.campId,createdAt:le()};try{await Z(_(j,"save_reports_v2"),o),alert("ë¶„ì„ ì™„ë£Œ!")}catch(a){console.error(a),alert("ì—…ë¡œë“œ ì‹¤íŒ¨")}finally{t(!1)}},1500))};return e.jsxs("div",{style:{padding:"0 0 80px"},children:[e.jsxs("div",{className:"glass-panel",style:{marginBottom:"20px",textAlign:"center",border:"1px solid var(--accent-color)"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(Te,{color:"#a78bfa"})," ì„¸ì´ë¸Œ íŒŒì¼ ë¶„ì„ê¸°"]}),e.jsx("p",{style:{opacity:.8,fontSize:"0.9rem",maxWidth:"600px",margin:"0 auto 20px"},children:"ì„¸ì´ë¸Œ íŒŒì¼(.lsv)ì„ ì—…ë¡œë“œí•˜ì—¬ ìºë¦­í„° ëŠ¥ë ¥ì¹˜ì™€ ì§„í–‰ ìƒí™©ì„ ë¶„ì„í•˜ì„¸ìš”."}),e.jsxs("div",{style:{position:"relative",overflow:"hidden",display:"inline-block"},children:[e.jsxs("button",{style:{background:"var(--accent-color)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(te,{size:18})," íŒŒì¼ ì„ íƒ ë° ë¶„ì„"]}),e.jsx("input",{type:"file",accept:".lsv,.save",onChange:u,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:y?e.jsxs("div",{className:"glass-panel",style:{textAlign:"center",padding:"40px"},children:[e.jsx(be,{size:32,className:"spin",style:{marginBottom:"15px",color:"var(--accent-color)"}}),e.jsx("p",{children:"ì„¸ì´ë¸Œ íŒŒì¼ ë¶„ì„ ì¤‘..."})]}):l.length===0?e.jsxs("div",{className:"glass-panel",style:{textAlign:"center",padding:"40px"},children:[e.jsx(te,{size:48,style:{opacity:.3,marginBottom:"20px"}}),e.jsx("p",{children:"ë¶„ì„ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})]}):l.map(n=>e.jsxs("div",{className:"glass-panel",style:{position:"relative",animation:"fadeIn 0.5s"},children:[e.jsx("button",{onClick:()=>m(n.id),style:{position:"absolute",top:"15px",right:"15px",background:"transparent",border:"none",color:"#f87171",cursor:"pointer"},children:e.jsx(de,{size:16})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"10px"},children:[e.jsx(te,{size:20,color:"var(--accent-color)"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:n.filename}),e.jsxs("span",{style:{fontSize:"0.8rem",opacity:.5},children:[new Date(n.createdAt?.toDate?n.createdAt.toDate():n.createdAt).toLocaleString()," â€¢ ",n.uploader]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px"},children:[e.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem"},children:[e.jsx(ue,{size:14})," ëŠ¥ë ¥ì¹˜ (Stats)"]}),n.stats?e.jsxs(e.Fragment,{children:[e.jsx(c,{label:"STR",value:n.stats.STR,color:"#fca5a5"}),e.jsx(c,{label:"DEX",value:n.stats.DEX,color:"#86efac"}),e.jsx(c,{label:"CON",value:n.stats.CON,color:"#fbbf24"}),e.jsx(c,{label:"INT",value:n.stats.INT,color:"#93c5fd"}),e.jsx(c,{label:"WIS",value:n.stats.WIS,color:"#d8b4fe"}),e.jsx(c,{label:"CHA",value:n.stats.CHA,color:"#f472b6"})]}):e.jsx("p",{style:{fontSize:"0.8rem",opacity:.5},children:"ë°ì´í„° ì—†ìŒ"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px",flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem"},children:[e.jsx(X,{size:14})," ë©”íƒ€ ì •ë³´"]}),e.jsxs("div",{style:{fontSize:"0.8rem",display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsxs("p",{style:{margin:0},children:["ğŸ“‚ ëª¨ë“œ: ",n.meta?.mode||"Unknown"]}),e.jsxs("p",{style:{margin:0},children:["ğŸ’¾ ë²„ì „: ",n.meta?.version||"Unknown"]}),e.jsxs("p",{style:{margin:0},children:["ğŸ“¦ í¬ê¸°: ",n.meta?.size||"Unknown"]})]})]}),n.companions&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"12px"},children:[e.jsx("h4",{style:{margin:"0 0 5px",fontSize:"0.8rem",opacity:.8},children:"í•¨ê»˜í•˜ëŠ” ë™ë£Œ"}),e.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:n.companions.map((s,x)=>e.jsxs("span",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:"4px",fontSize:"0.7rem"},children:[s.img," ",s.name]},x))})]})]})]})]},n.id))})]})},ve=[{id:"barbarian",name:"ë°”ë°”ë¦¬ì•ˆ",icon:Ee,color:"#fca5a5"},{id:"bard",name:"ë°”ë“œ",icon:We,color:"#f9a8d4"},{id:"cleric",name:"í´ë ˆë¦­",icon:Me,color:"#d1d5db"},{id:"druid",name:"ë“œë£¨ì´ë“œ",icon:Le,color:"#bef264"},{id:"fighter",name:"íŒŒì´í„°",icon:X,color:"#93c5fd"},{id:"monk",name:"ëª½í¬",icon:Pe,color:"#7dd3fc"},{id:"paladin",name:"íŒ”ë¼ë”˜",icon:X,color:"#fbbf24"},{id:"ranger",name:"ë ˆì¸ì €",icon:Oe,color:"#86efac"},{id:"rogue",name:"ë¡œê·¸",icon:Fe,color:"#cbd5e1"},{id:"sorcerer",name:"ì†Œì„œëŸ¬",icon:Ue,color:"#c084fc"},{id:"warlock",name:"ì›Œë½",icon:He,color:"#e879f9"},{id:"wizard",name:"ìœ„ìë“œ",icon:qe,color:"#818cf8"}],T={width:"100%",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.2)",color:"white",marginBottom:"12px",fontSize:"1rem",transition:"border-color 0.2s, background 0.2s"},P={width:"100%",padding:"16px",borderRadius:"12px",border:"none",fontWeight:"bold",fontSize:"1.05rem",marginTop:"0",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},xe=({selected:r,onSelect:l})=>e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",maxHeight:"200px",overflowY:"auto",margin:"20px 0",padding:"5px"},children:ve.map(g=>e.jsxs("button",{onClick:()=>l(g),type:"button",style:{padding:"12px 8px",borderRadius:"12px",border:r?.id===g.id?`2px solid ${g.color}`:"1px solid rgba(255,255,255,0.05)",background:r?.id===g.id?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.2)",color:"white",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",transition:"all 0.2s",cursor:"pointer",transform:r?.id===g.id?"scale(1.05)":"scale(1)"},children:[e.jsx(g.icon,{size:24,color:g.color}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:r?.id===g.id?"bold":"normal"},children:g.name})]},g.id))}),re=({children:r,title:l,sub:g,onClose:y,error:t})=>e.jsx("div",{className:"modal-overlay",onClick:y,children:e.jsxs("div",{className:"modal-content",onClick:m=>m.stopPropagation(),children:[e.jsx("button",{onClick:y,style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",cursor:"pointer",zIndex:10},children:e.jsx(Q,{size:18})}),e.jsxs("div",{style:{padding:"30px 20px",textAlign:"center"},children:[l&&e.jsx("h2",{style:{fontSize:"2rem",marginBottom:"8px",fontWeight:"800",background:"linear-gradient(to right, #fff, #aaa)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:l}),g&&e.jsx("p",{style:{opacity:.7,fontSize:"0.95rem",marginBottom:"30px"},children:g}),r,t&&e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.2)",color:"#fca5a5",padding:"12px",borderRadius:"10px",marginTop:"20px",fontSize:"0.9rem",border:"1px solid rgba(239, 68, 68, 0.3)"},children:["âš ï¸ ",t]})]})]})}),ge=({onComplete:r,initialData:l})=>{const[g,y]=p.useState(l?"profile_view":"landing"),[t,m]=p.useState(l?.nickname||""),[c,u]=p.useState(""),[n,s]=p.useState(l?ve.find(h=>h.name===l.className):null),[x,o]=p.useState(""),[a,d]=p.useState(""),[f,v]=p.useState([]),[S,k]=p.useState(null),[A,R]=p.useState(!1),[W,i]=p.useState("");p.useEffect(()=>{l&&y("profile_view")},[l]);const b=()=>{m(""),u(""),s(null),o(""),d(""),k(null),i(""),v([])},C=()=>{i(""),y("landing")};p.useEffect(()=>{g==="join_camp"&&N()},[g]);const N=async()=>{R(!0);try{console.log("[Profile] Fetching active camps...");const w=(await oe(_(j,"camps"))).docs.map(z=>({id:z.id,...z.data()}));v(w),console.log("[Profile] Camps found:",w.length)}catch(h){console.error("[Profile] Error fetching camps:",h),i("ì˜ì§€ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{R(!1)}},I=async h=>{h.preventDefault(),R(!0),i("");try{console.log("[Auth] Attempting login for:",t);const w=await H(D(j,"users_v2",t));if(!w.exists())throw new Error("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ëª¨í—˜ê°€ì…ë‹ˆë‹¤.");const z=w.data();if(z.password!==c)throw new Error("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");console.log("[Auth] Login successful:",z),localStorage.setItem("bg3_user_profile",JSON.stringify(z)),r(z)}catch(w){console.error("[Auth] Login failed:",w),i(w.message)}finally{R(!1)}},E=async()=>{if(!t||!c||!n||!x||!a){i("ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}R(!0);try{console.log("[Camp] Creating new camp:",x);const h=D(j,"users_v2",t);if((await H(h)).exists())throw new Error("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.");const z=x.trim(),U=D(j,"camps",z);if((await H(U)).exists())throw new Error("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì˜ì§€ ì´ë¦„ì…ë‹ˆë‹¤.");const L={id:t,nickname:t,password:c,className:n.name,classId:n.id,isAdmin:!0,campId:z,createdAt:new Date().toISOString()},we={id:z,name:x,password:a,leaderId:t,members:[t],createdAt:new Date().toISOString()};await se(h,L),await se(U,we),console.log("[Camp] Camp and Admin created successfully"),localStorage.setItem("bg3_user_profile",JSON.stringify(L)),r(L)}catch(h){console.error("[Camp] Creation failed:",h),i(h.message)}finally{R(!1)}},B=async()=>{if(!t||!c||!n||!S||!a){i("ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}R(!0);try{console.log("[Camp] Joining camp:",S);const h=D(j,"users_v2",t);if((await H(h)).exists())throw new Error("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë‹‰ë„¤ì„ì…ë‹ˆë‹¤. (ë¡œê·¸ì¸ í•˜ì„¸ìš”)");const z=D(j,"camps",S),U=await H(z);if(!U.exists())throw new Error("ì˜ì§€ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");const K=U.data();if(K.password!==a)throw new Error("ì˜ì§€ ì…ì¥ ì•”í˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");if(K.members&&K.members.length>=4)throw new Error("ì˜ì§€ ì •ì›ì´ ê½‰ ì°¼ìŠµë‹ˆë‹¤. (ìµœëŒ€ 4ëª…)");const L={id:t,nickname:t,password:c,className:n.name,classId:n.id,isAdmin:!1,campId:S,createdAt:new Date().toISOString()};await se(h,L),await ce(z,{members:Je(t)}),console.log("[Camp] Joined successfully"),localStorage.setItem("bg3_user_profile",JSON.stringify(L)),r(L)}catch(h){console.error("[Camp] Join failed:",h),i(h.message)}finally{R(!1)}},M=()=>{confirm("ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(localStorage.removeItem("bg3_user_profile"),r(null),y("landing"),b())};return g==="profile_view"&&l?e.jsxs("div",{className:"glass-panel",style:{maxWidth:"450px",margin:"40px auto",padding:"40px",textAlign:"center"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:n?.color||"gray",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 0 30px ${n?.color||"gray"}`},children:n&&e.jsx(n.icon,{size:50,color:"white"})}),e.jsx("h3",{style:{fontSize:"1.8rem",margin:"0 0 8px",fontWeight:"bold"},children:l.nickname}),e.jsx("span",{style:{fontSize:"0.95rem",opacity:.8,background:"rgba(255,255,255,0.1)",padding:"6px 12px",borderRadius:"20px"},children:l.className})]}),e.jsxs("div",{style:{textAlign:"left",background:"rgba(0,0,0,0.2)",padding:"25px",borderRadius:"16px"},children:[e.jsxs("p",{style:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"15px",marginBottom:"15px"},children:[e.jsx("span",{style:{opacity:.6},children:"ì†Œì† ì•¼ì˜ì§€"}),e.jsx("b",{style:{fontSize:"1.1rem"},children:l.campId})]}),e.jsxs("p",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{opacity:.6},children:"ì§ì±…"}),e.jsx("b",{style:{color:l.isAdmin?"#f87171":"#4ade80"},children:l.isAdmin?"ì˜ì£¼ (Leader)":"ëŒ€ì› (Member)"})]})]}),e.jsxs("button",{onClick:M,style:{...P,background:"rgba(248, 113, 113, 0.1)",border:"1px solid rgba(248, 113, 113, 0.3)",color:"#f87171",marginTop:"40px"},children:[e.jsx(ae,{size:20}),"ë¡œê·¸ì•„ì›ƒ"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"glass-panel",style:{maxWidth:"1000px",width:"95%",padding:"60px 60px",textAlign:"center",minHeight:"550px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",justifyContent:"center",gap:"60px",width:"100%"},children:[e.jsx("div",{style:{flex:"1 1 300px",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:e.jsxs("div",{className:"logo-wrapper",style:{position:"relative",maxWidth:"420px",width:"100%"},children:[e.jsx("img",{src:V,alt:"Logo",onClick:()=>window.location.reload(),title:"ìƒˆë¡œê³ ì¹¨",style:{width:"100%",cursor:"pointer",transition:"transform 0.3s ease",display:"block"},onMouseOver:h=>h.currentTarget.style.transform="scale(1.03)",onMouseOut:h=>h.currentTarget.style.transform="scale(1)"}),e.jsx("div",{className:"logo-shine",style:{WebkitMaskImage:`url(${V})`,maskImage:`url(${V})`}})]})}),e.jsxs("div",{style:{flex:"1 1 300px",display:"flex",flexDirection:"column",gap:"20px",maxWidth:"350px",width:"100%"},children:[e.jsxs("button",{onClick:()=>{b(),y("login")},style:{...P,background:"rgba(255,255,255,0.08)",color:"white",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx($e,{size:20}),"ê¸°ì¡´ ëª¨í—˜ê°€ ë¡œê·¸ì¸"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",opacity:.3,fontSize:"0.8rem"},children:[e.jsx("div",{style:{flex:1,height:"1px",background:"white"}}),e.jsx("span",{children:"OR"}),e.jsx("div",{style:{flex:1,height:"1px",background:"white"}})]}),e.jsxs("button",{onClick:()=>{b(),y("join_camp")},style:{...P,background:"linear-gradient(45deg, #7c3aed, #db2777)",color:"white",boxShadow:"0 4px 15px rgba(124, 58, 237, 0.3)"},children:[e.jsx(G,{size:20}),"ì•¼ì˜ì§€ í•©ë¥˜í•˜ê¸° (ì¼ë°˜)"]}),e.jsxs("button",{onClick:()=>{b(),y("create_camp")},style:{...P,background:"linear-gradient(45deg, #ef4444, #f97316)",color:"white",boxShadow:"0 4px 15px rgba(239, 68, 68, 0.3)"},children:[e.jsx(je,{size:20}),"ìƒˆ ì•¼ì˜ì§€ ê±´ì„¤ (ê´€ë¦¬ì)"]}),e.jsxs("p",{style:{marginTop:"10px",opacity:.6,fontSize:"0.85rem",lineHeight:"1.5",fontWeight:"400",textAlign:"center"},children:["ë™ë£Œë“¤ê³¼ í•¨ê»˜ ë‚˜ë§Œì˜ ì´ì•¼ê¸°ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.",e.jsx("br",{}),e.jsx("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ 3 ì›ì •ëŒ€"}),"ë¥¼ ìœ„í•œ",e.jsx("br",{}),"í•„ìˆ˜ ì»´íŒ¨ë‹ˆì–¸ ì•±"]})]})]})}),g==="login"&&e.jsx(re,{title:"ë¡œê·¸ì¸",sub:"ë‹¤ì‹œ ì˜¤ì…¨êµ°ìš”, ëª¨í—˜ê°€ë‹˜.",onClose:C,error:W,children:e.jsxs("form",{onSubmit:I,children:[e.jsx("input",{type:"text",placeholder:"ë‹‰ë„¤ì„",value:t,onChange:h=>m(h.target.value),style:T}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",value:c,onChange:h=>u(h.target.value),style:T}),e.jsx("button",{type:"submit",style:{...P,background:"white",color:"black",marginTop:"20px"},disabled:A,children:A?"ì¸ì¦ í™•ì¸ ì¤‘...":"ì•¼ì˜ì§€ ì…ì¥"})]})}),g==="create_camp"&&e.jsxs(re,{title:"ì•¼ì˜ì§€ ê±´ì„¤",sub:"ë‹¹ì‹ ë§Œì˜ íŒŒí‹°ë¥¼ ì´ëŒì–´ë³´ì„¸ìš”.",onClose:C,error:W,children:[e.jsxs("div",{style:{textAlign:"left",marginBottom:"20px"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"10px",marginBottom:"15px"},children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"#fca5a5",fontWeight:"bold",display:"block",marginBottom:"8px"},children:"ê´€ë¦¬ì(ì˜ì£¼) ì •ë³´"}),e.jsx("input",{type:"text",placeholder:"ì˜ì£¼ ë‹‰ë„¤ì„",value:t,onChange:h=>m(h.target.value),style:T}),e.jsx("input",{type:"password",placeholder:"ê°œì¸ ë¹„ë°€ë²ˆí˜¸",value:c,onChange:h=>u(h.target.value),style:{...T,marginBottom:0}})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"10px",marginBottom:"15px"},children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"#c4b5fd",fontWeight:"bold",display:"block",marginBottom:"8px"},children:"ì˜ì§€(Room) ì„¤ì •"}),e.jsx("input",{type:"text",placeholder:"ì•¼ì˜ì§€ ì´ë¦„ (IDë¡œ ì‚¬ìš©ë¨)",value:x,onChange:h=>o(h.target.value),style:T}),e.jsx("input",{type:"text",placeholder:"ì˜ì§€ ì…ì¥ ì•”í˜¸ (íŒ€ì› ê³µìœ ìš©)",value:a,onChange:h=>d(h.target.value),style:{...T,borderColor:"#818cf8",color:"#818cf8",marginBottom:0}})]}),e.jsx("label",{style:{fontSize:"0.9rem",color:"white",opacity:.8,marginTop:"5px",display:"block"},children:"ë‚˜ì˜ ì§ì—… ì„ íƒ"}),e.jsx(xe,{selected:n,onSelect:s})]}),e.jsx("button",{onClick:E,style:{...P,background:"#ef4444",color:"white"},disabled:A,children:A?"ì˜í†  ì„ í¬ ì¤‘...":"ê±´ì„¤ ì™„ë£Œ ë° ì…ì¥"})]}),g==="join_camp"&&e.jsxs(re,{title:"ì•¼ì˜ì§€ í•©ë¥˜",sub:"ë™ë£Œë“¤ì´ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.",onClose:C,error:W,children:[e.jsxs("div",{style:{textAlign:"left",marginBottom:"20px"},children:[!S&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("span",{style:{opacity:.7,fontSize:"0.9rem"},children:"ì°¸ì—¬ ê°€ëŠ¥í•œ ì˜ì§€"}),e.jsxs("button",{onClick:N,style:{background:"none",border:"none",color:"var(--accent-color)",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(be,{size:12})," ëª©ë¡ ê°±ì‹ "]})]}),e.jsx("div",{style:{maxHeight:"250px",overflowY:"auto",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:"10px",background:"rgba(0,0,0,0.2)"},children:A&&f.length===0?e.jsx("p",{style:{textAlign:"center",opacity:.5,padding:"20px"},children:"íƒìƒ‰ ì¤‘..."}):f.length===0?e.jsx("p",{style:{textAlign:"center",opacity:.5,padding:"20px"},children:"í™œì„±í™”ëœ ì˜ì§€ê°€ ì—†ìŠµë‹ˆë‹¤."}):f.map(h=>e.jsxs("div",{onClick:()=>k(h.id),style:{padding:"16px",marginBottom:"8px",borderRadius:"10px",cursor:"pointer",background:"rgba(255,255,255,0.05)",border:"1px solid transparent",transition:"all 0.2s",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseOver:w=>{w.currentTarget.style.background="rgba(255,255,255,0.1)",w.currentTarget.style.borderColor="rgba(255,255,255,0.2)"},onMouseOut:w=>{w.currentTarget.style.background="rgba(255,255,255,0.05)",w.currentTarget.style.borderColor="transparent"},children:[e.jsxs("span",{style:{fontWeight:"bold"},children:["ğŸ° ",h.name]}),e.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7,background:"rgba(0,0,0,0.3)",padding:"4px 8px",borderRadius:"4px"},children:[h.members?.length||0,"/4ëª…"]})]},h.id))})]}),S&&e.jsxs("div",{style:{animation:"fadeIn 0.3s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("button",{onClick:()=>k(null),style:{background:"none",border:"none",color:"white",opacity:.5,cursor:"pointer"},children:"â†"}),e.jsx("h3",{style:{margin:0,fontSize:"1.2rem"},children:f.find(h=>h.id===S)?.name})]}),e.jsx("input",{type:"text",placeholder:"ì˜ì§€ ì…ì¥ ì•”í˜¸",value:a,onChange:h=>d(h.target.value),style:{...T,borderColor:"#818cf8",color:"#818cf8"}}),e.jsx("div",{style:{height:"10px"}}),e.jsx("input",{type:"text",placeholder:"ë‚´ ë‹‰ë„¤ì„",value:t,onChange:h=>m(h.target.value),style:T}),e.jsx("input",{type:"password",placeholder:"ë‚´ ë¹„ë°€ë²ˆí˜¸",value:c,onChange:h=>u(h.target.value),style:T}),e.jsx("label",{style:{fontSize:"0.9rem",color:"white",opacity:.8,marginTop:"15px",display:"block"},children:"ë‚˜ì˜ ì§ì—… ì„ íƒ"}),e.jsx(xe,{selected:n,onSelect:s})]})]}),S&&e.jsx("button",{onClick:B,style:{...P,background:"var(--accent-color)",color:"white"},disabled:A,children:A?"ì…ì¥ ì¤‘...":"í•©ë¥˜í•˜ê¸°"})]})]})},lt=({user:r})=>{const[l,g]=p.useState([]),[y,t]=p.useState(!0);p.useEffect(()=>{if(!r?.campId)return;const u=O(_(j,"users_v2"),F("campId","==",r.campId)),n=J(u,s=>{const x=s.docs.map(o=>({id:o.id,...o.data()}));g(x),t(!1)});return()=>n()},[r?.campId]);const m=async u=>{if(window.confirm(`ì •ë§ '${u.nickname}' ë‹˜ì„ ì˜ì§€ì—ì„œ ì¶”ë°©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))try{await ee(D(j,"users_v2",u.id));const n=D(j,"camps",r.campId);await ce(n,{members:Ye(u.nickname)}),alert("ì¶”ë°©ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(n){console.error("Kick failed:",n),alert("ì¶”ë°© ì‹¤íŒ¨: "+n.message)}},c=async()=>{if(!window.confirm(`âš ï¸ ê²½ê³ : ì˜ì§€ë¥¼ í­íŒŒí•˜ë©´ ëª¨ë“  ë°ì´í„°ì™€ ë©¤ë²„ê°€ ì‚­ì œë©ë‹ˆë‹¤.
ì •ë§ ì´ ì•¼ì˜ì§€ë¥¼ í•´ì²´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))return;if(prompt("ì˜ì§€ë¥¼ ì‚­ì œí•˜ë ¤ë©´ 'ì˜ì§€ í­íŒŒ'ë¼ê³  ì…ë ¥í•˜ì„¸ìš”.")!=="ì˜ì§€ í­íŒŒ")return alert("ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");try{t(!0);const s=Xe(j),x=D(j,"camps",r.campId);s.delete(x),l.forEach(d=>{const f=D(j,"users_v2",d.id);s.delete(f)});const o=O(_(j,"chats"),F("campId","==",r.campId));(await oe(o)).forEach(d=>{s.delete(d.ref)}),await s.commit(),alert("ì•¼ì˜ì§€ê°€ ì—­ì‚¬ ì†ìœ¼ë¡œ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤."),window.location.reload()}catch(s){console.error("Destroy failed:",s),alert("ì‚­ì œ ì‹¤íŒ¨: "+s.message)}finally{t(!1)}};return e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",paddingBottom:"80px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"30px",marginBottom:"30px",border:"1px solid var(--accent-color)",background:"rgba(50, 0, 0, 0.3)"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:"0 0 10px",color:"#fca5a5"},children:[e.jsx(X,{})," ì˜ì£¼ ê´€ë¦¬ì‹¤ (Admin)"]}),e.jsxs("p",{style:{opacity:.8,fontSize:"0.9rem"},children:["í˜„ì¬ ì•¼ì˜ì§€: ",e.jsx("b",{children:r.campId})," ",e.jsx("br",{}),"ê¶Œí•œ: ",e.jsx("span",{style:{color:"var(--accent-color)"},children:"Master"})]})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"0",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"20px",background:"rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs("h3",{style:{margin:0,fontSize:"1.1rem"},children:["ëŒ€ì› ëª©ë¡ (",l.length,"/4)"]})}),l.map(u=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",background:u.isAdmin?"var(--accent-color)":"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.isAdmin?e.jsx(je,{size:22,color:"white"}):e.jsx(Ke,{size:22})}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px",fontSize:"1.1rem"},children:[u.nickname,e.jsx("span",{style:{fontSize:"0.7rem",padding:"3px 8px",borderRadius:"6px",background:"rgba(255,255,255,0.1)",opacity:.8},children:u.className||"ëª¨í—˜ê°€"})]}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.5,marginTop:"4px"},children:u.isAdmin?"ì˜ì£¼ (Leader)":"ëŒ€ì› (Member)"})]})]}),!u.isAdmin&&e.jsxs("button",{onClick:()=>m(u),style:{padding:"10px 15px",borderRadius:"8px",background:"rgba(248, 113, 113, 0.1)",border:"1px solid rgba(248, 113, 113, 0.3)",color:"#f87171",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ge,{size:16})," ì¶”ë°©"]})]},u.id)),l.length===0&&!y&&e.jsx("div",{style:{padding:"40px",textAlign:"center",opacity:.5},children:"ë©¤ë²„ê°€ ì—†ìŠµë‹ˆë‹¤."})]}),e.jsxs("div",{style:{marginTop:"50px",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"30px"},children:[e.jsxs("h3",{style:{color:"#ef4444",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Ve,{})," ìœ„í—˜ êµ¬ì—­"]}),e.jsxs("div",{className:"glass-panel",style:{borderColor:"#ef4444",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 5px"},children:"ì˜ì§€ í­íŒŒ"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6},children:"ì´ ì•¼ì˜ì§€ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤."})]}),e.jsx("button",{onClick:c,style:{background:"#ef4444",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer"},children:"í­íŒŒ ì‹¤í–‰"})]})]})]})},dt=({user:r})=>{const[l,g]=p.useState([]),[y,t]=p.useState(!1),[m,c]=p.useState({title:"",content:"",image:null}),u=p.useRef(null);p.useEffect(()=>{if(!r?.campId)return;const o=O(_(j,"tactics"),F("campId","==",r.campId),$("createdAt","desc")),a=J(o,d=>{const f=d.docs.map(v=>({id:v.id,...v.data()}));g(f)});return()=>a()},[r?.campId]);const n=o=>{const a=o.target.files[0];if(a){if(a.size>1024*1024)return alert("ì´ë¯¸ì§€ëŠ” 1MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");const d=new FileReader;d.onloadend=()=>{c(f=>({...f,image:d.result}))},d.readAsDataURL(a)}},s=async o=>{if(o.preventDefault(),!(!m.title||!r.campId))try{await Z(_(j,"tactics"),{...m,campId:r.campId,author:r.nickname,createdAt:le()}),t(!1),c({title:"",content:"",image:null})}catch(a){console.error(a),alert("ê²Œì‹œ ì‹¤íŒ¨")}},x=async o=>{window.confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await ee(D(j,"tactics",o))};return e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",paddingBottom:"80px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px",marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:0},children:[e.jsx(he,{className:"text-accent"})," ì „ìˆ  ê²Œì‹œíŒ (Tactics Board)"]}),e.jsx("p",{style:{margin:"5px 0 0",opacity:.7,fontSize:"0.9rem"},children:"ê³µëµê³¼ íŒì„ ê³µìœ í•˜ì„¸ìš”."})]}),e.jsxs("button",{onClick:()=>t(!0),style:{background:"var(--accent-color)",color:"white",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(ye,{size:18})," ì „ìˆ  ê³µìœ "]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:l.map(o=>e.jsxs("div",{className:"glass-panel",style:{padding:"0",overflow:"hidden",display:"flex",flexDirection:"column"},children:[o.image&&e.jsx("div",{style:{width:"100%",height:"200px",overflow:"hidden",background:"#000"},children:e.jsx("img",{src:o.image,alt:"tactic",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsxs("div",{style:{padding:"20px",flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"10px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.2rem"},children:o.title}),(r.isAdmin||r.nickname===o.author)&&e.jsx("button",{onClick:()=>x(o.id),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:e.jsx(de,{size:16})})]}),e.jsx("p",{style:{fontSize:"0.9rem",opacity:.8,whiteSpace:"pre-wrap",lineHeight:"1.5"},children:o.content})]}),e.jsxs("div",{style:{padding:"15px 20px",background:"rgba(0,0,0,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.8rem",opacity:.6},children:[e.jsxs("span",{children:["by ",o.author]}),o.createdAt&&e.jsx("span",{children:new Date(o.createdAt?.toDate?o.createdAt.toDate():o.createdAt).toLocaleDateString()})]})]},o.id))}),y&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(5px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>t(!1),children:e.jsxs("div",{className:"glass-panel",style:{width:"500px",padding:"30px"},onClick:o=>o.stopPropagation(),children:[e.jsx("h3",{style:{margin:"0 0 20px"},children:"ìƒˆ ì „ìˆ  ê³µìœ "}),e.jsxs("form",{onSubmit:s,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx("input",{placeholder:"ì œëª© (ì˜ˆ: ë¼íŒŒì—˜ ì „íˆ¬ í¬ì§€ì…”ë‹)",value:m.title,onChange:o=>c({...m,title:o.target.value}),required:!0,style:{padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsx("textarea",{placeholder:"ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...",value:m.content,onChange:o=>c({...m,content:o.target.value}),rows:5,style:{padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px",resize:"vertical"}}),e.jsxs("div",{style:{border:"1px dashed rgba(255,255,255,0.3)",borderRadius:"8px",padding:"20px",textAlign:"center"},children:[m.image?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx("img",{src:m.image,alt:"Preview",style:{maxHeight:"200px",maxWidth:"100%",borderRadius:"8px"}}),e.jsx("button",{type:"button",onClick:()=>c({...m,image:null}),style:{position:"absolute",top:-10,right:-10,background:"red",borderRadius:"50%",width:"24px",height:"24px",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Q,{size:14})})]}):e.jsxs("button",{type:"button",onClick:()=>u.current.click(),style:{background:"none",border:"none",color:"var(--accent-color)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"5px"},children:[e.jsx(fe,{size:32}),e.jsx("span",{children:"ì´ë¯¸ì§€ ì¶”ê°€ (ìŠ¤í¬ë¦°ìƒ· ë“±)"})]}),e.jsx("input",{type:"file",ref:u,onChange:n,accept:"image/*",style:{display:"none"}})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{type:"button",onClick:()=>t(!1),style:{flex:1,padding:"12px",borderRadius:"8px",background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"white",cursor:"pointer"},children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",style:{flex:1,padding:"12px",borderRadius:"8px",background:"var(--accent-color)",border:"none",color:"white",cursor:"pointer"},children:"ê²Œì‹œ"})]})]})]})})]})},ct=()=>{const[r,l]=p.useState("home"),[g,y]=p.useState(window.innerWidth<768),[t,m]=p.useState(()=>{try{return JSON.parse(localStorage.getItem("bg3_user_profile"))}catch{return null}});p.useEffect(()=>{const n=()=>y(window.innerWidth<768);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),p.useEffect(()=>{},[t]);const c=n=>{m(n)},u=()=>{switch(r){case"home":return e.jsx(ne,{user:t,setActiveTab:l});case"chat":return e.jsx(at,{user:t});case"calendar":return e.jsx(it,{user:t});case"tactics":return e.jsx(dt,{user:t});case"save":return e.jsx(ot,{user:t});case"profile":return e.jsx(ge,{onComplete:c,initialData:t});case"admin":return t?.isAdmin?e.jsx(lt,{user:t}):e.jsx(ne,{user:t});default:return e.jsx(ne,{user:t})}};return t?e.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"var(--bg-color)",color:"white"},children:[e.jsx(rt,{activeTab:r,setActiveTab:l,isMobile:g,user:t}),e.jsx("main",{style:{flex:1,padding:g?"80px 20px 80px":"20px",overflowY:"auto",position:"relative"},children:u()})]}):e.jsx(ge,{onComplete:c})};function pt(){return e.jsx(ct,{})}class xt extends q.Component{constructor(l){super(l),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(l){return{hasError:!0}}componentDidCatch(l,g){this.setState({error:l,errorInfo:g}),console.error("Uncaught error:",l,g)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"white",background:"#333"},children:[e.jsx("h1",{children:"Something went wrong."}),e.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),e.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px"},children:"Reload"})]}):this.props.children}}Qe.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(xt,{children:e.jsx(pt,{})})}));
