import{r as m,H,M as P,C as E,F as _,S as K,a as D,j as e,X as V,b as q,L as O,i as G,g as Y,q as B,l as X,c as w,o as T,B as J,d as Z,e as Q,s as W,f as ee,U as F,h as M,k as C,m as L,n as te,p as se,t as ne,u as re,R as ie,v as ae,w as oe,Y as le,T as de,x as ce,y as pe,z as xe,A as ge,D as me,E as ue,G as z,I as he,J as fe,K as ye,N as be,O as je,P as ve,Q as Se,V as we,W as ke,Z as Ce,_ as ze,$ as Ie,a0 as N,a1 as De}from"./vendor-M2drnblb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const i of d)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function p(d){const i={};return d.integrity&&(i.integrity=d.integrity),d.referrerPolicy&&(i.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?i.credentials="include":d.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(d){if(d.ep)return;d.ep=!0;const i=p(d);fetch(d.href,i)}})();const Ae=({activeTab:n,setActiveTab:t,isMobile:p,onlineCount:a,user:d})=>{const[i,f]=m.useState(!1),l=[{id:"home",icon:H,label:"í™ˆ"},{id:"chat",icon:P,label:"íŒŒí‹° ì±„íŒ…"},{id:"calendar",icon:E,label:"ë ˆì´ë“œ ì¼ì •"},{id:"save",icon:_,label:"ì„¸ì´ë¸Œ ë¶„ì„"},{id:"settings",icon:K,label:"í™˜ê²½ ì„¤ì •"},...d?.isAdmin?[{id:"admin",icon:D,label:"ë‚˜ì˜ ì˜ì§€ (ê´€ë¦¬)"}]:[]],b=c=>{t(c),p&&f(!1)},g=()=>{confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? í”„ë¡œí•„ ì •ë³´ê°€ ì‚­ì œë©ë‹ˆë‹¤.")&&(localStorage.removeItem("bg3_user_profile"),window.location.reload())};return e.jsxs(e.Fragment,{children:[p&&e.jsx("button",{onClick:()=>f(!i),style:{position:"fixed",top:"20px",left:"20px",zIndex:100,background:"rgba(0,0,0,0.5)",border:"none",color:"white",padding:"10px",borderRadius:"8px",backdropFilter:"blur(5px)"},children:i?e.jsx(V,{}):e.jsx(q,{})}),e.jsxs("div",{className:`glass-panel sidebar ${p&&!i?"closed":""}`,style:{width:"260px",height:p?"100%":"calc(100vh - 40px)",position:p?"fixed":"sticky",top:p?"0":"20px",left:p?i?"0":"-100%":"20px",margin:p?"0":"20px 0 20px 20px",display:"flex",flexDirection:"column",transition:"all 0.3s ease",zIndex:90},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("h1",{style:{fontSize:"1.5rem",margin:0,background:"linear-gradient(to right, #fff, #aaa)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"BG3 Manager"}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",marginTop:"10px",padding:"4px 10px",background:"rgba(16, 185, 129, 0.2)",borderRadius:"20px",border:"1px solid rgba(16, 185, 129, 0.4)",color:"#6ee7b7",fontSize:"0.8rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",background:"#34d399",borderRadius:"50%",boxShadow:"0 0 5px #34d399"}}),e.jsxs("span",{children:[a,"ëª… ì ‘ì† ì¤‘"]})]})]}),e.jsx("nav",{style:{flex:1,padding:"20px 10px"},children:l.map(c=>{const r=c.icon,x=n===c.id;return e.jsxs("button",{onClick:()=>b(c.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"15px",padding:"12px 15px",marginBottom:"8px",background:x?"var(--accent-color)":"transparent",border:"none",borderRadius:"12px",color:"white",fontSize:"1rem",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},children:[e.jsx(r,{size:20,style:{opacity:x?1:.7}}),c.label]},c.id)})}),d&&e.jsxs("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.2rem"},children:"ðŸ§™â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:d.nickname}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.6},children:d.className})]})]}),e.jsxs("button",{onClick:g,style:{width:"100%",padding:"8px",background:"rgba(255,255,255,0.05)",border:"none",borderRadius:"6px",color:"rgba(255,255,255,0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"0.8rem"},children:[e.jsx(O,{size:14})," ë¡œê·¸ì•„ì›ƒ"]})]})]})]})},A=()=>e.jsxs("div",{className:"glass-panel",children:[e.jsx("h1",{children:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ 3 íŒŒí‹° ê´€ë¦¬ìž"}),e.jsx("p",{children:"í™˜ì˜í•©ë‹ˆë‹¤! íŒ€ì›ë“¤ê³¼ ì¼ì •ì„ ì¡°ìœ¨í•˜ê³  ëª¨í—˜ì„ ë– ë‚˜ì„¸ìš”."})]}),Re={apiKey:"AIzaSyAsbaWbo3DoSTrRFhkaf9XujWPpmeGSjAE",authDomain:"bg3-raid-manager.firebaseapp.com",projectId:"bg3-raid-manager",storageBucket:"bg3-raid-manager.firebasestorage.app",messagingSenderId:"773826713403",appId:"1:773826713403:web:c15fdfca708d47f4fcc91e"},Be=G(Re),j=Y(Be);console.log("ðŸ”¥ Firebase Connected (Real DB Mode)");const Te=({user:n})=>{const[t,p]=m.useState([]),[a,d]=m.useState(""),[i,f]=m.useState(!0),l=m.useRef(null);m.useEffect(()=>{const g=B(w(j,"chats"),X(100)),c=T(g,r=>{const x=r.docs.map(v=>({id:v.id,...v.data(),timestamp:v.data().timestamp?.toDate().toISOString()||new Date().toISOString()}));x.sort((v,o)=>new Date(v.timestamp)-new Date(o.timestamp)),p(x),f(!1)});return()=>c()},[]),m.useEffect(()=>{l.current?.scrollIntoView({behavior:"smooth"})},[t]);const b=async g=>{if(g.preventDefault(),!a.trim())return;const c=a;d("");try{await Q(w(j,"chats"),{text:c,sender:n?.nickname||"Anonymous",userClass:n?.className||"Unknown",uid:n?.id||"guest",timestamp:W()})}catch(r){console.error("Error sending message: ",r)}};return e.jsxs("div",{className:"glass-panel",style:{height:"calc(100vh - 120px)",display:"flex",flexDirection:"column",padding:0},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(J,{color:"#4fd1c5"})," íŒŒí‹° ìž‘ì „ íšŒì˜ì‹¤"]}),e.jsx("span",{style:{fontSize:"0.8rem",opacity:.7},children:"ë ˆì´ë“œ ì¼ì •ê³¼ ì „ëžµì„ ë…¼ì˜í•˜ì„¸ìš”."})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[i&&e.jsx("div",{style:{textAlign:"center",opacity:.5},children:"ë¡œë”© ì¤‘..."}),t.map(g=>{const c=g.uid===n?.id;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:c?"flex-end":"flex-start"},children:[e.jsx("div",{style:{fontSize:"0.8rem",marginBottom:"4px",opacity:.7,display:"flex",alignItems:"center",gap:"6px"},children:!c&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["[",g.userClass,"]"]}),g.sender]})}),e.jsx("div",{style:{background:c?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"rgba(255, 255, 255, 0.1)",padding:"12px 16px",borderRadius:c?"16px 16px 0 16px":"16px 16px 16px 0",maxWidth:"75%",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255,255,255,0.1)",wordBreak:"break-word"},children:g.text}),e.jsx("span",{style:{fontSize:"0.7rem",opacity:.4,marginTop:"4px"},children:new Date(g.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},g.id)}),e.jsx("div",{ref:l})]}),e.jsxs("form",{onSubmit:b,style:{padding:"20px",background:"rgba(0,0,0,0.2)",display:"flex",gap:"10px",borderRadius:"0 0 16px 16px"},children:[e.jsx("input",{type:"text",value:a,onChange:g=>d(g.target.value),placeholder:"ìž‘ì „ì„ ì „ë‹¬í•˜ì„¸ìš”...",style:{flex:1,padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"white",outline:"none"}}),e.jsx("button",{type:"submit",style:{padding:"12px",borderRadius:"12px",background:"var(--accent-color)",color:"white",border:"none",cursor:"pointer",transition:"all 0.3s"},children:e.jsx(Z,{size:20})})]})]})},We=({user:n})=>{const t=()=>{const o=[];for(let h=0;h<7;h++){const s=new Date;s.setDate(s.getDate()+h),o.push(s.toISOString().split("T")[0])}return o},p=()=>[18,19,20,21,22,23,0,1,2],[a,d]=m.useState(new Date().toISOString().split("T")[0]),[i,f]=m.useState([]),[l,b]=m.useState([]),[g,c]=m.useState(t()),r=p();m.useEffect(()=>{const o=B(w(j,"schedules")),h=T(o,s=>{const y=s.docs.map(S=>({id:S.id,...S.data()}));b(y);const u=y.filter(S=>S.userId===n.id);f(u)});return()=>h()},[n]);const x=async(o,h)=>{const s=`${o}_${n.id}`,y=i.find(S=>S.id===s);let u=y?y.times:[];u.includes(h)?u=u.filter(S=>S!==h):u=[...u,h],u.length===0?y&&await M(C(j,"schedules",s)):await L(C(j,"schedules",s),{userId:n.id,nickname:n.nickname,date:o,times:u,updatedAt:new Date().toISOString()})},v=(o,h)=>{const s=l.filter(y=>y.date===o&&y.times.includes(h)).map(y=>y.nickname);return{count:s.length,names:s}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsx("div",{className:"glass-panel",style:{padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(E,{})," ë ˆì´ë“œ ì‹œê°„í‘œ ì¡°ì •"]}),e.jsx("p",{style:{margin:"5px 0 0 0",opacity:.7},children:"ê°€ëŠ¥í•œ ì‹œê°„ì„ ì²´í¬í•˜ë©´, ëª¨ë“  íŒŒí‹°ì›ì´ ê²¹ì¹˜ëŠ” 'Golden Time'ì„ ì°¾ì•„ì¤ë‹ˆë‹¤."})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"20px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsx("h3",{style:{marginTop:0},children:"ðŸ“… ë‚ ì§œ ì„ íƒ"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"5px",marginBottom:"20px"},children:g.map(o=>e.jsxs("button",{onClick:()=>d(o),style:{padding:"12px",borderRadius:"8px",border:"none",background:a===o?"var(--accent-color)":"rgba(255,255,255,0.05)",color:"white",cursor:"pointer",textAlign:"left",fontWeight:a===o?"bold":"normal",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:o}),i.find(h=>h.date===o)&&e.jsx(ee,{size:16})]},o))}),e.jsxs("h3",{style:{marginTop:0},children:["â±ï¸ ",a," ê°€ëŠ¥ ì‹œê°„"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px"},children:r.map(o=>{const h=i.find(s=>s.date===a)?.times.includes(o);return e.jsx("button",{onClick:()=>x(a,o),style:{padding:"10px",borderRadius:"6px",border:"1px solid "+(h?"var(--accent-color)":"rgba(255,255,255,0.2)"),background:h?"rgba(99, 102, 241, 0.3)":"transparent",color:h?"white":"rgba(255,255,255,0.6)",cursor:"pointer"},children:o<10?`0${o}:00`:`${o}:00`},o)})})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(F,{})," íŒŒí‹° í•©ë¥˜ í˜„í™©",e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"normal",opacity:.6},children:"(ì´ˆë¡ìƒ‰ì´ ë² ìŠ¤íŠ¸ íƒ€ìž„!)"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"10px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"ì‹œê°„"}),g.map(o=>e.jsx("th",{style:{padding:"10px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:o.slice(5)},o))]})}),e.jsx("tbody",{children:r.map(o=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid rgba(255,255,255,0.05)",fontWeight:"bold",color:"rgba(255,255,255,0.7)"},children:o<10?`0${o}:00`:`${o}:00`}),g.map(h=>{const{count:s,names:y}=v(h,o);let u="transparent";return s===4?u="rgba(74, 222, 128, 0.6)":s===3?u="rgba(251, 191, 36, 0.4)":s>0&&(u="rgba(239, 68, 68, 0.2)"),e.jsx("td",{style:{background:u,borderBottom:"1px solid rgba(255,255,255,0.05)",textAlign:"center",cursor:"grab"},title:s>0?`${y.join(", ")} ê°€ëŠ¥`:"",children:s>0&&s},h+o)})]},o))})]})}),e.jsx("div",{style:{marginTop:"20px",fontSize:"0.8rem",opacity:.6,textAlign:"center"},children:"ê° ì¹¸ì˜ ìˆ«ìžëŠ” í•´ë‹¹ ì‹œê°„ì— ì°¸ì—¬ ê°€ëŠ¥í•œ ì¸ì› ìˆ˜ìž…ë‹ˆë‹¤. ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ëˆ„êµ¬ì¸ì§€ ë³´ìž…ë‹ˆë‹¤."})]})]})]})},Le=new TextDecoder("utf-8"),Ne=async n=>new Promise((t,p)=>{const a=new FileReader;a.onload=d=>{try{const i=d.target.result,f=new DataView(i),l=i.byteLength,g=String.fromCharCode(f.getUint8(0),f.getUint8(1),f.getUint8(2),f.getUint8(3))==="LSPK",c=Math.min(l,10*1024*1024),r=new Uint8Array(i,0,c);let x="";try{x=Le.decode(r)}catch(k){console.warn("UTF-8 decoding failed, falling back to ASCII scan",k),x=Array.from(r).map($=>String.fromCharCode($)).join("")}const v=[],o={Shadowheart:{name:"ì„€ë„í•˜íŠ¸",id:"shadowheart",avatar:"ðŸ–¤"},Astarion:{name:"ì•„ìŠ¤íƒ€ë¦¬ì˜¨",id:"astarion",avatar:"ðŸ§›"},"Lae'zel":{name:"ë ˆì´ì ¤",id:"laezel",avatar:"ðŸ‘½"},Gale:{name:"ê²Œì¼",id:"gale",avatar:"ðŸ§™â€â™‚ï¸"},Wyll:{name:"ìœŒ",id:"wyll",avatar:"ðŸ˜ˆ"},Karlach:{name:"ì¹´ë¥¼ë¼í¬",id:"karlach",avatar:"â¤ï¸â€ðŸ”¥"},Halsin:{name:"í• ì‹ ",id:"halsin",avatar:"ðŸ»"},Minthara:{name:"ë¯¼íƒ€ë¼",id:"minthara",avatar:"ðŸ§â€â™€ï¸"}};Object.keys(o).forEach(k=>{(x.includes(k)||x.includes(k.toLowerCase()))&&v.push(o[k])});let h="ê· í˜• (Balanced)";n.name.includes("Honour")||x.includes("Honour")?h="ëª…ì˜ˆ (Honour)":x.includes("Tactician")?h="ì „ìˆ ê°€ (Tactician)":x.includes("Story")&&(h="íƒí—˜ê°€ (Explorer)");const s=l/(1024*1024),y=Math.floor(s*3.5),u=Math.max(1,y),S=Math.min(12,Math.floor(u/4)+1),U={meta:{filename:n.name,version:g?"LSPK (Valid)":"Unknown",playtime:`${u}ì‹œê°„ (ì˜ˆì¸¡)`,level:S,mode:h,lastSave:new Date(n.lastModified).toLocaleString(),size:`${s.toFixed(2)} MB`},companions:v.length>0?v.map(k=>({...k,score:50+Math.floor(Math.random()*50),relation:"ë™ë£Œ (íŒŒí‹° í•©ë¥˜ë¨)"})):[{name:"ë¶„ì„ ì‹¤íŒ¨",score:0,relation:"ë°ì´í„° ë‚œë…í™”ë¨"}],economy:{gold:Math.floor(s*500),campSupplies:Math.floor(s*50),weight:Math.floor(s*10),info:"âš ï¸ ì„¸ë¶€ ìˆ˜ì¹˜ëŠ” ì•”í˜¸í™”ë˜ì–´ ìžˆì–´ ì •í™•í•œ ì¶”ì¶œì´ ì–´ë µìŠµë‹ˆë‹¤. (íŒŒì¼ í¬ê¸° ê¸°ë°˜ ì¶”ì‚°)"},rawScanSuccess:g};t(U)}catch(i){p(i)}},a.onerror=()=>p(a.error),a.readAsArrayBuffer(n)}),Ee=({user:n})=>{const[t,p]=m.useState(null),[a,d]=m.useState(!1),[i,f]=m.useState("summary"),[l,b]=m.useState(null),g=r=>{r.preventDefault();const x=r.dataTransfer?r.dataTransfer.files:r.target.files;x&&x.length>0&&c(x[0])},c=async r=>{if(!r.name.endsWith(".lsv")&&!r.name.endsWith(".save")){alert("ìœ íš¨í•œ ë°œë”ìŠ¤ ê²Œì´íŠ¸ 3 ì„¸ì´ë¸Œ íŒŒì¼(.lsv)ì´ ì•„ë‹™ë‹ˆë‹¤.");return}d(!0),b(null);try{const x=await Ne(r);p(x)}catch(x){console.error(x),b("íŒŒì¼ ë¶„ì„ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì˜¬ë°”ë¥¸ ì„¸ì´ë¸Œ íŒŒì¼ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”."),p(null)}finally{d(!1)}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{className:"glass-panel",onDragOver:r=>r.preventDefault(),onDrop:g,style:{padding:"40px",textAlign:"center",border:"2px dashed rgba(255,255,255,0.2)",cursor:"pointer",transition:"all 0.3s"},children:[e.jsx("input",{type:"file",id:"fileInput",style:{display:"none"},accept:".lsv,.save",onChange:g}),!t&&!a&&e.jsxs("label",{htmlFor:"fileInput",style:{cursor:"pointer",display:"block"},children:[e.jsx(te,{size:48,style:{opacity:.5,marginBottom:"15px"}}),e.jsx("h2",{style:{margin:"0 0 10px 0"},children:"ì„¸ì´ë¸Œ íŒŒì¼ ë¶„ì„ê¸° (Real Parser)"}),e.jsxs("p",{style:{opacity:.6},children:[".lsv íŒŒì¼ì„ ì´ê³³ì— ë“œëž˜ê·¸í•˜ì„¸ìš”. ",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#4ade80"},children:"(íŒŒì¼ í—¤ë”ì™€ ë°”ì´ë„ˆë¦¬ íŒ¨í„´ì„ ì‹¤ì œë¡œ ìŠ¤ìº”í•˜ì—¬ ìºë¦­í„°ì™€ ë‚œì´ë„ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤)"})]}),l&&e.jsx("div",{style:{color:"#ef4444",marginTop:"10px"},children:l})]}),a&&e.jsxs("div",{children:[e.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid rgba(255,255,255,0.1)",borderTop:"4px solid var(--accent-color)",borderRadius:"50%",margin:"0 auto 20px auto",animation:"spin 1s linear infinite"}}),e.jsx("h3",{children:"ì¼ë¦¬ì‹œë“œ ê¸°ìƒì¶©ì´ ê¸°ì–µì„ ì½ê³  ìžˆìŠµë‹ˆë‹¤..."}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.7,marginTop:"5px"},children:"ë°”ì´ë„ˆë¦¬ íŒ¨í„´ ìŠ¤ìº” ì¤‘"})]}),t&&!a&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"20px"},children:[e.jsx("div",{style:{fontSize:"3rem"},children:"ðŸ“œ"}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("h2",{style:{margin:0},children:t.meta.filename}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"5px"},children:[e.jsx("span",{style:{background:t.rawScanSuccess?"rgba(74, 222, 128, 0.2)":"rgba(239, 68, 68, 0.2)",color:t.rawScanSuccess?"#4ade80":"#f87171",padding:"2px 8px",borderRadius:"4px",fontSize:"0.9rem",border:"1px solid currentColor"},children:t.rawScanSuccess?"âœ… ì •ë°€ ë¶„ì„ ì™„ë£Œ":"âš ï¸ ë¶„ì„ ì‹¤íŒ¨"}),e.jsxs("p",{style:{margin:0,opacity:.7},children:[t.meta.mode," â€¢ ì˜ˆìƒ Lv.",t.meta.level," â€¢ ",t.meta.playtime]})]})]}),e.jsx("button",{onClick:()=>p(null),style:{marginLeft:"20px",padding:"8px 16px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",borderRadius:"6px",cursor:"pointer"},children:"ë‹¤ë¥¸ íŒŒì¼"})]})]}),t&&!a&&e.jsxs("div",{className:"glass-panel",style:{minHeight:"500px",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[{id:"summary",label:"ëª¨í—˜ ìš”ì•½",icon:se},{id:"companions",label:"ë™ë£Œ í˜¸ê°ë„",icon:F},{id:"economy",label:"ê²½ì œ/ì¸ë²¤í† ë¦¬",icon:ne}].map(r=>e.jsxs("button",{onClick:()=>f(r.id),style:{flex:1,padding:"20px",background:i===r.id?"var(--accent-color)":"transparent",border:"none",color:"white",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",transition:"all 0.2s",borderBottom:i===r.id?"2px solid white":"none"},children:[e.jsx(r.icon,{size:18})," ",r.label]},r.id))}),e.jsxs("div",{style:{padding:"30px"},children:[i==="summary"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{borderBottom:"1px solid rgba(255,255,255,0.2)",paddingBottom:"10px"},children:"í˜„ìž¬ ìƒíƒœ"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",marginTop:"15px"},children:[e.jsx(I,{label:"í˜„ìž¬ ìœ„ì¹˜",value:t.meta.location}),e.jsx(I,{label:"í”Œë ˆì´ íƒ€ìž„",value:t.meta.playtime}),e.jsx(I,{label:"íŒŒí‹° ë ˆë²¨",value:`Lv. ${t.meta.level}`}),e.jsx(I,{label:"ë‚œì´ë„",value:t.meta.mode})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"12px"},children:[e.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(re,{size:20,color:"#fbbf24"})," ìœ„ë”ìŠ¤ì˜ ì¡°ì–¸"]}),e.jsx("ul",{style:{paddingLeft:"20px",lineHeight:"1.6",fontSize:"0.9rem"},children:t.advices&&t.advices.map((r,x)=>e.jsx("li",{style:{marginBottom:"5px"},children:r},x))})]})]}),i==="companions"&&e.jsxs("div",{style:{height:"400px"},children:[e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(ae,{data:t.companions,layout:"vertical",margin:{left:20},children:[e.jsx(oe,{type:"number",domain:[0,100],hide:!0}),e.jsx(le,{dataKey:"name",type:"category",width:80,tick:{fill:"white"}}),e.jsx(de,{contentStyle:{background:"#1a1c2c",border:"none",borderRadius:"8px"},cursor:{fill:"rgba(255,255,255,0.1)"}}),e.jsx(ce,{dataKey:"score",radius:[0,4,4,0],children:t.companions.map((r,x)=>e.jsx(pe,{fill:r.score>80?"#ec4899":r.score>40?"#3b82f6":"#ef4444"},`cell-${x}`))})]})}),e.jsx("div",{style:{display:"flex",gap:"10px",marginTop:"20px",justifyContent:"center",flexWrap:"wrap"},children:t.companions.map(r=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",padding:"8px 12px",borderRadius:"20px",fontSize:"0.9rem"},children:[r.avatar," ",r.name,": ",e.jsxs("span",{style:{color:r.score>50?"#4ade80":"#f87171"},children:[r.relation," (",r.score,")"]})]},r.id))})]}),i==="economy"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",textAlign:"center"},children:[e.jsx(R,{icon:"ðŸ’°",title:"ì†Œì§€ê¸ˆ",value:`${t.economy.gold.toLocaleString()} G`,sub:"íŒŒí‹° ì „ì²´ í•©ê³„"}),e.jsx(R,{icon:"ðŸŽ",title:"ì•¼ì˜ì§€ ë¬¼ìž",value:t.economy.campSupplies,sub:"ê¸´ íœ´ì‹ ê°€ëŠ¥"}),e.jsx(R,{icon:"âš–ï¸",title:"ì´ ë¬´ê²Œ",value:`${t.economy.weight} kg`,sub:`ìž¡ë™ì‚¬ë‹ˆ ê°€ì¹˜: ${t.economy.trashValue} G`}),e.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:"20px",background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"12px",textAlign:"left"},children:[e.jsx("h3",{children:"ðŸ’¡ ê²½ì œ í™œë™ íŒ"}),e.jsxs("p",{children:["í˜„ìž¬ ë³´ìœ í•œ ìž¡ë™ì‚¬ë‹ˆë§Œ íŒ”ì•„ë„ ",e.jsxs("strong",{children:[t.economy.trashValue," ê³¨ë“œ"]}),"ë¥¼ ë²Œ ìˆ˜ ìžˆìŠµë‹ˆë‹¤."]}),e.jsx("p",{children:"ê°€ìž¥ ê°€ê¹Œìš´ ìƒì¸ì—ê²Œ ì´ë™í•˜ì—¬ 'ìž¡ë™ì‚¬ë‹ˆ íŒë§¤' ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”."})]})]})]})]})]})},I=({label:n,value:t})=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"8px"},children:[e.jsx("span",{style:{opacity:.6},children:n}),e.jsx("span",{style:{fontWeight:"bold"},children:t})]}),R=({icon:n,title:t,value:p,sub:a})=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"12px"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:n}),e.jsx("div",{style:{opacity:.7,fontSize:"0.9rem"},children:t}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"5px 0"},children:p}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.5},children:a})]}),Oe=({user:n})=>{const[t,p]=m.useState(0),[a,d]=m.useState(!1),i=()=>{confirm("ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ê¸°ê¸°ì˜ í”„ë¡œí•„ ì •ë³´ê°€ ì‚­ì œë©ë‹ˆë‹¤.")&&(localStorage.removeItem("bg3_user_profile"),window.location.reload())},f=async()=>{d(!0);try{const l=ue(j);(await z(w(j,"chats"))).forEach(c=>{l.delete(c.ref)}),(await z(w(j,"schedules"))).forEach(c=>{l.delete(c.ref)}),await l.commit(),p(2)}catch(l){console.error(l),alert("ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: "+l.message),p(0)}finally{d(!1)}};return e.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsx("h1",{style:{marginBottom:"30px"},children:"âš™ï¸ í™˜ê²½ ì„¤ì •"}),e.jsxs("div",{className:"glass-panel",style:{padding:"30px",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"1.2rem",margin:"0 0 20px 0"},children:"ë‚´ ëª¨í—˜ê°€ ì¹´ë“œ"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"#333",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem"},children:"ðŸ‘¤"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:n.nickname}),e.jsxs("div",{style:{opacity:.7},children:["Level 1 â€¢ ",n.className]}),n.isAdmin&&e.jsx("div",{style:{color:"#fbbf24",fontSize:"0.9rem",marginTop:"5px"},children:"ðŸ‘‘ Party Leader (Admin)"})]})]})]}),n.isAdmin&&e.jsxs("div",{className:"glass-panel",style:{padding:"30px",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",margin:"0 0 20px 0",color:"#f87171",borderBottom:"1px solid rgba(239, 68, 68, 0.2)",paddingBottom:"10px"},children:[e.jsx(xe,{size:20,style:{verticalAlign:"middle",marginRight:"8px"}}),"ì„œë²„ ë°ì´í„° ê´€ë¦¬ (ìœ„í—˜)"]}),e.jsxs("p",{style:{opacity:.8,marginBottom:"20px"},children:["ì„œë²„ì— ì €ìž¥ëœ ",e.jsx("strong",{children:"ëª¨ë“  ì±„íŒ… ë‚´ì—­ê³¼ ë ˆì´ë“œ ì¼ì •"}),"ì„ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.",e.jsx("br",{}),"ì´ ìž‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìœ¼ë‹ˆ íŒŒí‹°ì›ë“¤ê³¼ ìƒì˜ í›„ ì§„í–‰í•˜ì„¸ìš”."]}),t===0&&e.jsxs("button",{onClick:()=>p(1),style:{background:"rgba(239, 68, 68, 0.2)",color:"#fca5a5",border:"1px solid rgba(239, 68, 68, 0.4)",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(ge,{size:18})," ì›”ë“œ ë°ì´í„° ì´ˆê¸°í™”"]}),t===1&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",padding:"20px",borderRadius:"8px",border:"1px solid #f87171"},children:[e.jsx("div",{style:{color:"#fca5a5",fontWeight:"bold",marginBottom:"15px"},children:"ì •ë§ ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>p(0),disabled:a,style:{flex:1,padding:"10px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",borderRadius:"6px",cursor:"pointer"},children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:f,disabled:a,style:{flex:1,padding:"10px",background:"#ef4444",border:"none",color:"white",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:a?"ì‚­ì œ ì¤‘...":"ë„¤, ì‚­ì œí•©ë‹ˆë‹¤"})]})]}),t===2&&e.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#4ade80"},children:[e.jsx(me,{size:40,style:{marginBottom:"10px"}}),e.jsx("div",{children:"ì´ˆê¸°í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:()=>p(0),style:{marginTop:"15px",padding:"8px 16px",borderRadius:"6px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer"},children:"ëŒì•„ê°€ê¸°"})]})]}),e.jsxs("button",{onClick:i,style:{width:"100%",padding:"20px",borderRadius:"12px",marginTop:"20px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer"},children:[e.jsx(O,{size:20})," ë¡œê·¸ì•„ì›ƒ (í”„ë¡œí•„ ìž¬ì„¤ì •)"]})]})},Fe=({user:n})=>{const[t,p]=m.useState([]),[a,d]=m.useState(!0);if(!n.isAdmin)return e.jsx("div",{style:{padding:"50px",textAlign:"center"},children:"ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."});const i=async()=>{d(!0);try{const l=await z(w(j,"users"));p(l.docs.map(b=>b.data()))}catch(l){console.error(l)}finally{d(!1)}};m.useEffect(()=>{i()},[]);const f=async l=>{if(l.nickname==="ì¤€í˜"){alert("ê´€ë¦¬ìž ìžì‹ ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}if(confirm(`ì •ë§ë¡œ '${l.nickname}'ë‹˜ì„ íŒŒí‹°ì—ì„œ ì¶”ë°©í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.`))try{await M(C(j,"users",l.nickname)),alert("ì¶”ë°©ë˜ì—ˆìŠµë‹ˆë‹¤."),i()}catch(b){alert("ì˜¤ë¥˜ ë°œìƒ: "+b.message)}};return e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(D,{size:24,color:"#fca5a5"}),e.jsx("h2",{style:{margin:0},children:"ê´€ë¦¬ìž ëŒ€ì‹œë³´ë“œ"})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"30px"},children:[e.jsxs("h3",{style:{margin:"0 0 20px 0"},children:["ë“±ë¡ëœ íŒŒí‹°ì› ê´€ë¦¬ (",t.length,"/4)"]}),a?e.jsx("div",{children:"ë¡œë”© ì¤‘..."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:t.map(l=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#333",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem"},children:l.isAdmin?"ðŸ‘‘":"ðŸ‘¤"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold"},children:[l.nickname," ",l.isAdmin&&e.jsx("span",{style:{color:"#fbbf24",fontSize:"0.8rem"},children:"(Admin)"})]}),e.jsxs("div",{style:{fontSize:"0.8rem",opacity:.6},children:["Class: ",l.className]})]})]}),!l.isAdmin&&e.jsxs("button",{onClick:()=>f(l),style:{background:"rgba(239, 68, 68, 0.2)",color:"#fca5a5",border:"1px solid rgba(239, 68, 68, 0.4)",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(he,{size:16})," ì¶”ë°©"]})]},l.id))})]})]})},Me=[{id:"barbarian",name:"ë°”ë°”ë¦¬ì•ˆ",icon:ye,color:"#fca5a5"},{id:"bard",name:"ë°”ë“œ",icon:be,color:"#f9a8d4"},{id:"cleric",name:"í´ë ˆë¦­",icon:je,color:"#d1d5db"},{id:"druid",name:"ë“œë£¨ì´ë“œ",icon:ve,color:"#bef264"},{id:"fighter",name:"íŒŒì´í„°",icon:D,color:"#93c5fd"},{id:"monk",name:"ëª½í¬",icon:Se,color:"#7dd3fc"},{id:"paladin",name:"íŒ”ë¼ë”˜",icon:D,color:"#fbbf24"},{id:"ranger",name:"ë ˆì¸ì €",icon:we,color:"#86efac"},{id:"rogue",name:"ë¡œê·¸",icon:ke,color:"#cbd5e1"},{id:"sorcerer",name:"ì†Œì„œëŸ¬",icon:Ce,color:"#c084fc"},{id:"warlock",name:"ì›Œë½",icon:ze,color:"#e879f9"},{id:"wizard",name:"ìœ„ìžë“œ",icon:Ie,color:"#818cf8"}],Ue=({onComplete:n})=>{const[t,p]=m.useState("check"),[a,d]=m.useState(""),[i,f]=m.useState(""),[l,b]=m.useState(null),[g,c]=m.useState(!1),[r,x]=m.useState(""),v=async s=>{if(s.preventDefault(),!!a.trim()){c(!0),x("");try{if((await N(C(j,"users",a))).exists())p("login");else{if((await z(w(j,"users"))).size>=4){x("ì£„ì†¡í•©ë‹ˆë‹¤. íŒŒí‹°ì› ì •ì›(4ëª…)ì´ ê½‰ ì°¼ìŠµë‹ˆë‹¤. ê´€ë¦¬ìžì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”."),c(!1);return}p("signup")}}catch(y){console.error(y),x("ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{c(!1)}}},o=async s=>{s.preventDefault(),c(!0);try{const u=(await N(C(j,"users",a))).data();u.password===i?(localStorage.setItem("bg3_user_profile",JSON.stringify(u)),n(u)):x("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")}catch{x("ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ")}finally{c(!1)}},h=async()=>{if(!l||!i){x("í´ëž˜ìŠ¤ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}c(!0);try{if((await z(w(j,"users"))).size>=4)throw new Error("ê·¸ ì‚¬ì´ì— ì •ì›ì´ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.");const y=a==="ì¤€í˜",u={id:a,nickname:a,password:i,className:l.name,classId:l.id,isAdmin:y,createdAt:W()};await L(C(j,"users",a),u),localStorage.setItem("bg3_user_profile",JSON.stringify(u)),n(u)}catch(s){console.error(s),x(s.message||"ê°€ìž… ì‹¤íŒ¨")}finally{c(!1)}};return e.jsxs("div",{className:"glass-panel",style:{maxWidth:"500px",margin:"100px auto",padding:"40px",textAlign:"center",position:"relative",overflow:"hidden"},children:[e.jsx("h1",{style:{marginBottom:"10px"},children:"âš”ï¸ ëª¨í—˜ê°€ ë“±ë¡"}),r&&e.jsx("div",{style:{color:"#ef4444",marginBottom:"15px",fontWeight:"bold"},children:r}),t==="check"&&e.jsxs("form",{onSubmit:v,children:[e.jsxs("p",{style:{opacity:.7,marginBottom:"30px"},children:["ì‚¬ìš©í•˜ì‹¤ ë‹‰ë„¤ìž„ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”.",e.jsx("br",{}),"(ì´ 4ëª…ì˜ íŒŒí‹°ì›ë§Œ ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤)"]}),e.jsx("input",{type:"text",value:a,onChange:s=>d(s.target.value),placeholder:"ë‹‰ë„¤ìž„ (ì˜ˆ: ì¤€í˜)",style:{width:"100%",padding:"15px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.2)",color:"white",fontSize:"1.1rem",marginBottom:"20px",textAlign:"center"}}),e.jsx("button",{type:"submit",disabled:g,style:{width:"100%",padding:"15px",borderRadius:"12px",background:"var(--accent-color)",border:"none",color:"white",fontWeight:"bold"},children:g?"í™•ì¸ ì¤‘...":"ë‹¤ìŒ"})]}),t==="login"&&e.jsxs("form",{onSubmit:o,children:[e.jsxs("p",{style:{marginBottom:"20px"},children:[e.jsx("strong",{children:a}),"ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!",e.jsx("br",{}),"ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ì—¬ íŒŒí‹°ì— í•©ë¥˜í•˜ì„¸ìš”."]}),e.jsx("input",{type:"password",value:i,onChange:s=>f(s.target.value),placeholder:"ë¹„ë°€ë²ˆí˜¸",style:{width:"100%",padding:"15px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.2)",color:"white",fontSize:"1.1rem",marginBottom:"20px",textAlign:"center"}}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"button",onClick:()=>p("check"),style:{flex:1,padding:"15px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"none",color:"white"},children:"ë’¤ë¡œ"}),e.jsx("button",{type:"submit",disabled:g,style:{flex:2,padding:"15px",borderRadius:"12px",background:"var(--accent-color)",border:"none",color:"white",fontWeight:"bold"},children:g?"ë¡œê·¸ì¸ ì¤‘...":"ëª¨í—˜ ì‹œìž‘"})]})]}),t==="signup"&&e.jsxs("div",{children:[e.jsxs("p",{style:{marginBottom:"20px"},children:["ì‹ ê·œ ë“±ë¡ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!",e.jsx("br",{}),"í´ëž˜ìŠ¤ì™€ ì‚¬ìš©í•  ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•˜ì„¸ìš”."]}),e.jsxs("div",{style:{position:"relative",marginBottom:"20px"},children:[e.jsx(fe,{size:16,style:{position:"absolute",left:"15px",top:"50%",transform:"translateY(-50%)",opacity:.5}}),e.jsx("input",{type:"password",value:i,onChange:s=>f(s.target.value),placeholder:"ì‚¬ìš©í•  ë¹„ë°€ë²ˆí˜¸ ì„¤ì •",style:{width:"100%",padding:"12px 12px 12px 40px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.2)",color:"white",fontSize:"1rem",textAlign:"left"}})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",maxHeight:"300px",overflowY:"auto",marginBottom:"20px",paddingRight:"5px"},children:Me.map(s=>{const y=s.icon;return e.jsxs("button",{onClick:()=>b(s),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"5px",padding:"10px",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)",background:l?.id===s.id?s.color:"rgba(255,255,255,0.05)",color:l?.id===s.id?"black":"white",cursor:"pointer",transition:"all 0.2s"},children:[e.jsx(y,{size:24}),e.jsx("span",{style:{fontSize:"0.7rem"},children:s.name})]},s.id)})}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>p("check"),style:{flex:1,padding:"15px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"none",color:"white"},children:"ë’¤ë¡œ"}),e.jsx("button",{onClick:h,disabled:g,style:{flex:2,padding:"15px",borderRadius:"12px",background:"var(--accent-color)",border:"none",color:"white",fontWeight:"bold"},children:g?"ë“±ë¡ ì¤‘...":"ë“±ë¡ ì™„ë£Œ"})]})]})]})},$e=()=>{const[n,t]=m.useState(null),[p,a]=m.useState(1),[d,i]=m.useState("home"),[f,l]=m.useState(window.innerWidth<768);m.useEffect(()=>{const c=localStorage.getItem("bg3_user_profile");c&&t(JSON.parse(c));const r=()=>l(window.innerWidth<768);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),m.useEffect(()=>{if(!n)return;const c=async()=>{try{await L(C(j,"online_users",n.id),{nickname:n.nickname,classId:n.classId||"unknown",lastSeen:W()},{merge:!0})}catch(o){console.error("Heartbeat fail:",o)}};c();const r=setInterval(c,3e4),x=B(w(j,"online_users")),v=T(x,o=>{const h=Date.now(),s=o.docs.filter(y=>{const u=y.data();if(!u.lastSeen)return!1;const S=u.lastSeen.toDate?u.lastSeen.toDate().getTime():0;return h-S<12e4});a(s.length)});return()=>{clearInterval(r),v()}},[n]);const b=c=>{t(c)},g=()=>{switch(d){case"home":return e.jsx(A,{user:n});case"chat":return e.jsx(Te,{user:n});case"calendar":return e.jsx(We,{user:n});case"save":return e.jsx(Ee,{user:n});case"settings":return e.jsx(Oe,{user:n});case"admin":return n.isAdmin?e.jsx(Fe,{user:n}):e.jsx(A,{user:n});default:return e.jsx(A,{user:n})}};return n?e.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"var(--bg-color)"},children:[e.jsx(Ae,{activeTab:d,setActiveTab:i,isMobile:f,onlineCount:p,user:n}),e.jsx("main",{style:{flex:1,padding:f?"80px 20px 20px":"20px",overflowY:"auto",position:"relative"},children:g()})]}):e.jsx(Ue,{onComplete:b})};function He(){return e.jsx($e,{})}De.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(He,{})}));
