import{r as o,j as e,X as F,M as L,H as E,a as O,C as P,F as W,L as q,i as H,g as $,q as C,l as K,c as w,o as M,B as G,S as J,b as _,s as B,f as z,d as U,e as Y,h as T,k as X,m as Z,U as V,n as Q,p as ee,R as te,t as re,P as ae,u as ne,v as se,w as ie,T as oe,J as le,x as de,Z as ce,y as pe,z as xe,A as ue,D as ge,E as me,G as he,I as fe}from"./vendor-BgNVohLI.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))u(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const t of n.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&u(t)}).observe(document,{childList:!0,subtree:!0});function l(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(a){if(a.ep)return;a.ep=!0;const n=l(a);fetch(a.href,n)}})();const be=({activeTab:s,setActiveTab:p,isMobile:l,onlineCount:u,user:a})=>{const[n,t]=o.useState(!1),d=[{id:"home",icon:E,label:"í™ˆ"},{id:"chat",icon:O,label:"íŒŒí‹° ì±„íŒ…"},{id:"calendar",icon:P,label:"ë ˆì´ë“œ ì¼ì •"},{id:"save",icon:W,label:"ì„¸ì´ë¸Œ ë¶„ì„"}],h=i=>{p(i),l&&t(!1)},x=()=>{confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? í”„ë¡œí•„ ì •ë³´ê°€ ì‚­ì œë©ë‹ˆë‹¤.")&&(localStorage.removeItem("bg3_user_profile"),window.location.reload())};return e.jsxs(e.Fragment,{children:[l&&e.jsx("button",{onClick:()=>t(!n),style:{position:"fixed",top:"20px",left:"20px",zIndex:100,background:"rgba(0,0,0,0.5)",border:"none",color:"white",padding:"10px",borderRadius:"8px",backdropFilter:"blur(5px)"},children:n?e.jsx(F,{}):e.jsx(L,{})}),e.jsxs("div",{className:`glass-panel sidebar ${l&&!n?"closed":""}`,style:{width:"260px",height:l?"100%":"calc(100vh - 40px)",position:l?"fixed":"sticky",top:l?"0":"20px",left:l?n?"0":"-100%":"20px",margin:l?"0":"20px 0 20px 20px",display:"flex",flexDirection:"column",transition:"all 0.3s ease",zIndex:90},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("h1",{style:{fontSize:"1.5rem",margin:0,background:"linear-gradient(to right, #fff, #aaa)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"BG3 Manager"}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",marginTop:"10px",padding:"4px 10px",background:"rgba(16, 185, 129, 0.2)",borderRadius:"20px",border:"1px solid rgba(16, 185, 129, 0.4)",color:"#6ee7b7",fontSize:"0.8rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",background:"#34d399",borderRadius:"50%",boxShadow:"0 0 5px #34d399"}}),e.jsxs("span",{children:[u,"ëª… ì ‘ì† ì¤‘"]})]})]}),e.jsx("nav",{style:{flex:1,padding:"20px 10px"},children:d.map(i=>{const f=i.icon,b=s===i.id;return e.jsxs("button",{onClick:()=>h(i.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"15px",padding:"12px 15px",marginBottom:"8px",background:b?"var(--accent-color)":"transparent",border:"none",borderRadius:"12px",color:"white",fontSize:"1rem",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},children:[e.jsx(f,{size:20,style:{opacity:b?1:.7}}),i.label]},i.id)})}),a&&e.jsxs("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.2rem"},children:"ðŸ§™â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:a.nickname}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.6},children:a.className})]})]}),e.jsxs("button",{onClick:x,style:{width:"100%",padding:"8px",background:"rgba(255,255,255,0.05)",border:"none",borderRadius:"6px",color:"rgba(255,255,255,0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"0.8rem"},children:[e.jsx(q,{size:14})," ë¡œê·¸ì•„ì›ƒ"]})]})]})]})},D=()=>e.jsxs("div",{className:"glass-panel",children:[e.jsx("h1",{children:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ 3 íŒŒí‹° ê´€ë¦¬ìž"}),e.jsx("p",{children:"í™˜ì˜í•©ë‹ˆë‹¤! íŒ€ì›ë“¤ê³¼ ì¼ì •ì„ ì¡°ìœ¨í•˜ê³  ëª¨í—˜ì„ ë– ë‚˜ì„¸ìš”."})]}),ye={apiKey:"AIzaSyAsbaWbo3DoSTrRFhkaf9XujWPpmeGSjAE",authDomain:"bg3-raid-manager.firebaseapp.com",projectId:"bg3-raid-manager",storageBucket:"bg3-raid-manager.firebasestorage.app",messagingSenderId:"773826713403",appId:"1:773826713403:web:c15fdfca708d47f4fcc91e"},je=H(ye),y=$(je);console.log("ðŸ”¥ Firebase Connected (Real DB Mode)");const ve=({user:s})=>{const[p,l]=o.useState([]),[u,a]=o.useState(""),[n,t]=o.useState(!0),d=o.useRef(null);o.useEffect(()=>{const x=C(w(y,"chats"),K(100)),i=M(x,f=>{const b=f.docs.map(r=>({id:r.id,...r.data(),timestamp:r.data().timestamp?.toDate().toISOString()||new Date().toISOString()}));b.sort((r,g)=>new Date(r.timestamp)-new Date(g.timestamp)),l(b),t(!1)});return()=>i()},[]),o.useEffect(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[p]);const h=async x=>{if(x.preventDefault(),!u.trim())return;const i=u;a("");try{await _(w(y,"chats"),{text:i,sender:s?.nickname||"Anonymous",userClass:s?.className||"Unknown",uid:s?.id||"guest",timestamp:B()})}catch(f){console.error("Error sending message: ",f)}};return e.jsxs("div",{className:"glass-panel",style:{height:"calc(100vh - 120px)",display:"flex",flexDirection:"column",padding:0},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(G,{color:"#4fd1c5"})," íŒŒí‹° ìž‘ì „ íšŒì˜ì‹¤"]}),e.jsx("span",{style:{fontSize:"0.8rem",opacity:.7},children:"ë ˆì´ë“œ ì¼ì •ê³¼ ì „ëžµì„ ë…¼ì˜í•˜ì„¸ìš”."})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[n&&e.jsx("div",{style:{textAlign:"center",opacity:.5},children:"ë¡œë”© ì¤‘..."}),p.map(x=>{const i=x.uid===s?.id;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:i?"flex-end":"flex-start"},children:[e.jsx("div",{style:{fontSize:"0.8rem",marginBottom:"4px",opacity:.7,display:"flex",alignItems:"center",gap:"6px"},children:!i&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["[",x.userClass,"]"]}),x.sender]})}),e.jsx("div",{style:{background:i?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"rgba(255, 255, 255, 0.1)",padding:"12px 16px",borderRadius:i?"16px 16px 0 16px":"16px 16px 16px 0",maxWidth:"75%",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255,255,255,0.1)",wordBreak:"break-word"},children:x.text}),e.jsx("span",{style:{fontSize:"0.7rem",opacity:.4,marginTop:"4px"},children:new Date(x.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},x.id)}),e.jsx("div",{ref:d})]}),e.jsxs("form",{onSubmit:h,style:{padding:"20px",background:"rgba(0,0,0,0.2)",display:"flex",gap:"10px",borderRadius:"0 0 16px 16px"},children:[e.jsx("input",{type:"text",value:u,onChange:x=>a(x.target.value),placeholder:"ìž‘ì „ì„ ì „ë‹¬í•˜ì„¸ìš”...",style:{flex:1,padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"white",outline:"none"}}),e.jsx("button",{type:"submit",style:{padding:"12px",borderRadius:"12px",background:"var(--accent-color)",color:"white",border:"none",cursor:"pointer",transition:"all 0.3s"},children:e.jsx(J,{size:20})})]})]})},Se=()=>{const[s,p]=o.useState([]),[l,u]=o.useState(new Date),[a,n]=o.useState(!1),[t,d]=o.useState({title:"",time:"20:00",type:"raid",members:""});o.useEffect(()=>{const r=C(w(y,"schedules")),g=M(r,j=>{const c=j.docs.map(m=>({id:m.id,...m.data()}));p(c)});return()=>g()},[]);const h=z(l,"yyyy-MM-dd"),x=s.filter(r=>r.date===h),i=async r=>{r.preventDefault();try{await _(w(y,"schedules"),{...t,date:h,members:t.members.split(",").map(g=>g.trim()).filter(g=>g)}),n(!1),d({title:"",time:"20:00",type:"raid",members:""})}catch(g){console.error("Error adding schedule: ",g),alert("ì¼ì • ì¶”ê°€ ì‹¤íŒ¨!")}},f=async r=>{window.confirm("ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await Y(T(y,"schedules",r))},b=({date:r,view:g})=>{if(g==="month"){const j=z(r,"yyyy-MM-dd");if(s.some(m=>m.date===j))return e.jsx("div",{style:{height:"6px",width:"6px",background:"var(--accent-color)",borderRadius:"50%",margin:"2px auto"}})}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",gap:"30px",flexDirection:"column"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsx("style",{children:`
                    .react-calendar { background: transparent; border: none; width: 100%; color: white; font-family: inherit; }
                    .react-calendar__navigation button { color: white; min-width: 44px; background: none; font-size: 1.2rem; }
                    .react-calendar__navigation button:enabled:hover, .react-calendar__navigation button:enabled:focus { background-color: rgba(255,255,255,0.1); }
                    .react-calendar__month-view__weekdays { text-align: center; text-transform: uppercase; font-weight: bold; font-size: 0.8em; opacity: 0.7; }
                    .react-calendar__month-view__days__day { color: white; padding: 10px; background: transparent; border: none; }
                    .react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background-color: rgba(255,255,255,0.1); border-radius: 8px; }
                    .react-calendar__tile--now { background: rgba(255,255,255,0.2) !important; border-radius: 8px; }
                    .react-calendar__tile--active { background: var(--accent-color) !important; color: white !important; border-radius: 8px; }
                    abbr[title] { text-decoration: none; }
                `}),e.jsx(U,{onChange:u,value:l,locale:"ko-KR",tileContent:b})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"20px",minHeight:"200px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsxs("h3",{style:{margin:0},children:[z(l,"Mì›” dì¼ (E)",{locale:X})," ì¼ì •"]}),e.jsx("button",{onClick:()=>n(!0),style:{background:"var(--accent-color)",border:"none",color:"white",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"+ ì¼ì • ì¶”ê°€"})]}),x.length===0?e.jsx("div",{style:{textAlign:"center",padding:"30px",opacity:.5},children:"ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:x.map(r=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",borderLeft:`4px solid ${r.type==="raid"?"#f87171":"#60a5fa"}`},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:r.title}),e.jsxs("div",{style:{fontSize:"0.9rem",opacity:.7,marginTop:"4px"},children:["â° ",r.time," | ðŸ‘¥ ",r.members?.join(", ")||"-"]})]}),e.jsx("button",{onClick:()=>f(r.id),style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:"ì‚­ì œ"})]},r.id))})]}),a&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(5px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>n(!1),children:e.jsxs("div",{className:"glass-panel",style:{width:"350px",padding:"30px"},onClick:r=>r.stopPropagation(),children:[e.jsx("h3",{children:"ðŸ“… ìƒˆ ì¼ì • ë“±ë¡"}),e.jsxs("p",{style:{opacity:.6,fontSize:"0.9rem",marginBottom:"20px"},children:[z(l,"yyyyë…„ Mì›” dì¼"),"ì— ì¼ì •ì„ ì¶”ê°€í•©ë‹ˆë‹¤."]}),e.jsxs("form",{onSubmit:i,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx("input",{placeholder:"ì¼ì • ì œëª© (ì˜ˆ: ë¼íŒŒì—˜ ì§‘ë“¤ì´)",value:t.title,onChange:r=>d({...t,title:r.target.value}),required:!0,style:{padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"time",value:t.time,onChange:r=>d({...t,time:r.target.value}),required:!0,style:{flex:1,padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("select",{value:t.type,onChange:r=>d({...t,type:r.target.value}),style:{flex:1,padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"},children:[e.jsx("option",{value:"raid",style:{color:"black"},children:"âš”ï¸ ë ˆì´ë“œ"}),e.jsx("option",{value:"story",style:{color:"black"},children:"ðŸ“œ ìŠ¤í† ë¦¬"})]})]}),e.jsx("input",{placeholder:"ì°¸ì—¬ ë©¤ë²„ (ì‰¼í‘œ êµ¬ë¶„)",value:t.members,onChange:r=>d({...t,members:r.target.value}),style:{padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsx("button",{type:"submit",style:{marginTop:"10px",padding:"12px",borderRadius:"8px",background:"var(--accent-color)",border:"none",color:"white",cursor:"pointer",fontWeight:"bold"},children:"ë“±ë¡í•˜ê¸°"})]})]})})]})},we=()=>{const[s,p]=o.useState(!1),[l,u]=o.useState(null),[a,n]=o.useState(!1),[t,d]=o.useState(null),[h,x]=o.useState(null),i=c=>{c.preventDefault(),p(!1);const m=c.dataTransfer.files[0];m&&b(m)},f=c=>{const m=c.target.files[0];m&&b(m)},b=async c=>{u(c),n(!0),d(null),x(null);try{let k=(await new le().loadAsync(c)).file("meta.lsx");if(!k)console.warn("meta.lsx not found. Falling back to simulation."),await new Promise(S=>setTimeout(S,2e3)),d(j(c.name));else{const S=await k.async("string"),I=r(S);d(I)}}catch(m){console.warn("File parsing failed (likely binary format), switching to simulation mode:",m),await new Promise(v=>setTimeout(v,1e3)),d(j(c.name))}finally{n(!1)}},r=c=>{const v=parseInt((I=>{const N=new RegExp(`id="${I}"\\s+value="([^"]+)"`,"i"),R=c.match(N);return R?R[1]:null})("Level")||"1",10),k="ì‚¬ìš©ìž ì •ì˜",S=g(v);return{playtime:"ì•Œ ìˆ˜ ì—†ìŒ (Parsing Failed)",difficulty:k,party:`Lv.${v}`,stats:[{subject:"ì „íˆ¬ë ¥",A:Math.min(100,v*8+10),fullMark:100},{subject:"ëŒ€í™”",A:Math.floor(Math.random()*40)+60,fullMark:100},{subject:"íƒí—˜",A:Math.floor(Math.random()*40)+60,fullMark:100},{subject:"ì„  ì„±í–¥",A:Math.floor(Math.random()*100),fullMark:100},{subject:"ìš´",A:Math.floor(Math.random()*100),fullMark:100}],risk:"ì•ˆì „í•¨ (Metadata Verified)",summary:S}},g=c=>c<4?"ëª¨í—˜ì˜ ì‹œìž‘ìž…ë‹ˆë‹¤. 1ë§‰ì˜ í•´ë³€ê°€ì—ì„œ ê³ êµ°ë¶„íˆ¬í•˜ê³  ê³„ì‹œêµ°ìš”. ìžì› ê´€ë¦¬ì— ìœ ì˜í•˜ì„¸ìš”.":c<7?"1ë§‰ì˜ ì¤‘ë°˜ë¶€ë¥¼ ì§€ë‚˜ê³  ìžˆìŠµë‹ˆë‹¤. ì–¸ë”ë‹¤í¬ë‚˜ ì‚°ê¸¸ì„ íƒí—˜í•  ì¤€ë¹„ê°€ ë˜ì…¨ë‚˜ìš”?":c<10?"2ë§‰ì˜ ê·¸ë¦¼ìž ì €ì£¼ë°›ì€ ë•…ì„ ëŒíŒŒí•˜ê³  ê³„ì‹œëŠ”êµ°ìš”. íŒŒí‹°ì˜ ê²°ì†ë ¥ì´ ì¤‘ìš”í•œ ì‹œê¸°ìž…ë‹ˆë‹¤.":"ë§Œë ™ì— ê°€ê¹Œì›Œì¡ŒìŠµë‹ˆë‹¤. 3ë§‰ ë°œë”ìŠ¤ ê²Œì´íŠ¸ì˜ ë³µìž¡í•œ ì •ì¹˜ì™€ ì „íˆ¬ë¥¼ ì¦ê¸°ê³  ê³„ì‹œêµ°ìš”. ì—”ë”©ì´ ë¨¸ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.",j=c=>{const m=c.length;return{playtime:Math.floor(Math.random()*100)+10+"ì‹œê°„",difficulty:m%2===0?"ì „ìˆ ê°€ (Tactician)":"ê· í˜• (Balanced)",party:"Lv.?"+(Math.floor(Math.random()*12)+1),stats:[{subject:"ì „íˆ¬ë ¥",A:Math.floor(Math.random()*50)+50,fullMark:100},{subject:"ëŒ€í™”/ì„¤ë“",A:Math.floor(Math.random()*50)+50,fullMark:100},{subject:"íƒí—˜",A:Math.floor(Math.random()*50)+50,fullMark:100},{subject:"ì„  ì„±í–¥",A:Math.floor(Math.random()*100),fullMark:100},{subject:"ìš´",A:Math.floor(Math.random()*100),fullMark:100}],risk:"ìƒì„¸ ë°ì´í„° íŒë… ë¶ˆê°€ (ëŒ€ëžµì  ì¶”ì •)",summary:"ì„¸ì´ë¸Œ íŒŒì¼ì˜ ë‚´ë¶€ êµ¬ì¡°(LSF ë°”ì´ë„ˆë¦¬)ê°€ ì•”í˜¸í™”ë˜ì–´ ìžˆì–´ ìƒì„¸ ìŠ¤íƒ¯ì„ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. íŒŒì¼ëª…ê³¼ í¬ê¸°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ AI ì¶”ì •ì¹˜ë¥¼ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤."}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsxs("div",{className:"glass-panel",style:{textAlign:"center",padding:"40px 20px"},children:[e.jsxs("h2",{style:{fontSize:"2rem",marginBottom:"10px"},children:[e.jsx(Z,{style:{marginBottom:"-6px",marginRight:"10px"}}),"AI ì„¸ì´ë¸Œ ë¶„ì„ê¸°"]}),e.jsxs("p",{style:{opacity:.7},children:[".lsv íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ ë‚´ë¶€ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ì—¬ ì§„í–‰ ìƒí™©ì„ ìš”ì•½í•´ë“œë¦½ë‹ˆë‹¤.",e.jsx("br",{}),e.jsxs("span",{style:{fontSize:"0.8rem",color:"#fbbf24"},children:["âš ï¸ ë³´ì•ˆìƒ PC ê²½ë¡œ(",e.jsx("code",{children:"C:\\..."}),")ë¥¼ ì§ì ‘ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ì„ ì•„ëž˜ë¡œ ë“œëž˜ê·¸í•´ì£¼ì„¸ìš”."]})]})]}),!t&&e.jsxs("div",{className:"glass-panel",style:{border:s?"2px dashed var(--accent-color)":"2px dashed rgba(255,255,255,0.2)",padding:"60px",textAlign:"center",cursor:"pointer",background:s?"rgba(255,255,255,0.1)":"transparent",transition:"all 0.3s"},onDragOver:c=>{c.preventDefault(),p(!0)},onDragLeave:()=>p(!1),onDrop:i,onClick:()=>document.getElementById("fileInput").click(),children:[e.jsx("input",{id:"fileInput",type:"file",accept:".lsv,.zip",style:{display:"none"},onChange:f}),a?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[e.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid rgba(255,255,255,0.1)",borderTop:"4px solid var(--accent-color)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("p",{className:"animate-pulse",children:"ì„¸ì´ë¸Œ ì••ì¶• í•´ì œ ë° ë°ì´í„° íŒŒì‹± ì¤‘..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{size:48,style:{opacity:.5,marginBottom:"20px"}}),e.jsx("h3",{children:"ì„¸ì´ë¸Œ íŒŒì¼(.lsv)ì„ ì—¬ê¸°ë¡œ ë“œëž˜ê·¸í•˜ì„¸ìš”"}),e.jsx("p",{style:{fontSize:"0.9rem",opacity:.5,marginTop:"10px"},children:"ë˜ëŠ” í´ë¦­í•˜ì—¬ íŒŒì¼ ì„ íƒ"})]})]}),h&&e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.2)",padding:"15px",borderRadius:"8px",color:"#fca5a5",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Q,{size:20})," ",h]}),t&&e.jsxs("div",{className:"glass-panel",style:{animation:"fadeIn 0.5s ease-out"},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(ee,{size:20})," ë¶„ì„ ì™„ë£Œ: ",l.name]}),e.jsx("button",{onClick:()=>d(null),style:{background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"white",padding:"6px 12px",borderRadius:"20px",cursor:"pointer"},children:"ë‹¤ë¥¸ íŒŒì¼ ë¶„ì„"})]}),e.jsxs("div",{style:{padding:"30px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px"},children:[e.jsx("div",{style:{height:"300px"},children:e.jsx(te,{width:"100%",height:"100%",children:e.jsxs(re,{cx:"50%",cy:"50%",outerRadius:"80%",data:t.stats,children:[e.jsx(ae,{stroke:"rgba(255,255,255,0.2)"}),e.jsx(ne,{dataKey:"subject",tick:{fill:"white",fontSize:12}}),e.jsx(se,{angle:30,domain:[0,100],tick:!1,axisLine:!1}),e.jsx(ie,{name:"Player",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),e.jsx(oe,{contentStyle:{background:"rgba(0,0,0,0.8)",border:"none",borderRadius:"8px"},itemStyle:{color:"#fff"}})]})})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",justifyContent:"center"},children:[e.jsxs("div",{className:"stat-card",style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"12px"},children:[e.jsx("span",{style:{opacity:.6,fontSize:"0.9rem",display:"block",marginBottom:"8px"},children:"ðŸ¤– AI ìš”ì•½ ë¦¬í¬íŠ¸"}),e.jsxs("div",{style:{fontSize:"1.1rem",lineHeight:"1.6",borderLeft:"4px solid var(--accent-color)",paddingLeft:"15px"},children:['"',t.summary,'"']})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsxs("div",{className:"stat-card",style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"12px"},children:[e.jsx("span",{style:{opacity:.6,fontSize:"0.9rem"},children:"ë‚˜ì˜ íŒŒí‹°"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:t.party})]}),e.jsxs("div",{className:"stat-card",style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"12px"},children:[e.jsx("span",{style:{opacity:.6,fontSize:"0.9rem"},children:"ë°ì´í„° ìƒíƒœ"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",marginTop:"5px"},children:t.risk})]})]})]})]})]}),e.jsx("style",{children:`
                @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
                @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
            `})]})},A=[{id:"fighter",name:"íŒŒì´í„°",icon:de,color:"#ef4444"},{id:"wizard",name:"ìœ„ìžë“œ",icon:ce,color:"#3b82f6"},{id:"cleric",name:"í´ë ˆë¦­",icon:pe,color:"#fbbf24"},{id:"bard",name:"ë°”ë“œ",icon:xe,color:"#ec4899"},{id:"rogue",name:"ë¡œê·¸",icon:ue,color:"#10b981"},{id:"paladin",name:"íŒ”ë¼ë”˜",icon:ge,color:"#f59e0b"}],ke=({onComplete:s})=>{const[p,l]=o.useState(""),[u,a]=o.useState(A[0]),n=t=>{if(t.preventDefault(),!p.trim())return;const d={id:"user_"+Date.now()+Math.random().toString(36).substr(2,9),nickname:p.trim(),classId:u.id,className:u.name,createdAt:new Date().toISOString()};localStorage.setItem("bg3_user_profile",JSON.stringify(d)),s(d)};return e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",background:"linear-gradient(135deg, #1a1c2c 0%, #4a192c 100%)",color:"white"},children:e.jsxs("div",{className:"glass-panel",style:{width:"100%",maxWidth:"400px",padding:"40px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e.jsx(me,{size:48,color:"#fbbf24",style:{marginBottom:"10px"}}),e.jsx("h1",{style:{fontSize:"1.8rem",margin:"0 0 10px 0"},children:"ëª¨í—˜ê°€ ë“±ë¡"}),e.jsxs("p",{style:{opacity:.7},children:["ë°œë”ìŠ¤ ê²Œì´íŠ¸ë¡œ ë– ë‚˜ê¸° ì „,",e.jsx("br",{}),"ì‹ ë¶„ì„ ì¦ëª…í•˜ì‹­ì‹œì˜¤."]})]}),e.jsxs("form",{onSubmit:n,style:{display:"flex",flexDirection:"column",gap:"25px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"10px",fontSize:"0.9rem",opacity:.8},children:"ë‹‰ë„¤ìž„"}),e.jsx("input",{type:"text",value:p,onChange:t=>l(t.target.value),placeholder:"ì˜ˆ: íƒ€ë¸Œ, ì–´ë‘ìš´ì¶©ë™",required:!0,maxLength:10,style:{width:"100%",padding:"12px",boxSizing:"border-box",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:"white",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"10px",fontSize:"0.9rem",opacity:.8},children:"ì§ì—… ì„ íƒ"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px"},children:A.map(t=>{const d=t.icon,h=u.id===t.id;return e.jsxs("div",{onClick:()=>a(t),style:{border:h?`2px solid ${t.color}`:"1px solid rgba(255,255,255,0.1)",background:h?"rgba(255,255,255,0.1)":"transparent",borderRadius:"8px",padding:"10px",cursor:"pointer",textAlign:"center",transition:"all 0.2s"},children:[e.jsx(d,{size:24,color:t.color,style:{marginBottom:"5px"}}),e.jsx("div",{style:{fontSize:"0.8rem"},children:t.name})]},t.id)})})]}),e.jsx("button",{type:"submit",style:{marginTop:"20px",padding:"15px",borderRadius:"8px",background:"var(--accent-color)",border:"none",color:"white",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 15px rgba(0,0,0,0.3)",background:"linear-gradient(90deg, #d97706 0%, #b45309 100%)"},children:"ëª¨í—˜ ì‹œìž‘í•˜ê¸° âš”ï¸"})]})]})})},ze=()=>{const[s,p]=o.useState(null),[l,u]=o.useState(1),[a,n]=o.useState("home"),[t,d]=o.useState(window.innerWidth<768);o.useEffect(()=>{const i=localStorage.getItem("bg3_user_profile");i&&p(JSON.parse(i));const f=()=>d(window.innerWidth<768);return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),o.useEffect(()=>{if(!s)return;const i=async()=>{try{await he(T(y,"online_users",s.id),{nickname:s.nickname,classId:s.classId,lastSeen:B()},{merge:!0})}catch(g){console.error("Heartbeat fail:",g)}};i();const f=setInterval(i,6e4),b=C(w(y,"online_users")),r=M(b,g=>{u(g.size)});return()=>{clearInterval(f),r()}},[s]);const h=i=>{p(i)},x=()=>{switch(a){case"home":return e.jsx(D,{user:s});case"chat":return e.jsx(ve,{user:s});case"calendar":return e.jsx(Se,{user:s});case"save":return e.jsx(we,{user:s});default:return e.jsx(D,{user:s})}};return s?e.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"var(--bg-color)"},children:[e.jsx(be,{activeTab:a,setActiveTab:n,isMobile:t,onlineCount:l,user:s}),e.jsx("main",{style:{flex:1,padding:t?"80px 20px 20px":"20px",overflowY:"auto",position:"relative"},children:x()})]}):e.jsx(ke,{onComplete:h})};function Ie(){return e.jsx(ze,{})}fe.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(Ie,{})}));
