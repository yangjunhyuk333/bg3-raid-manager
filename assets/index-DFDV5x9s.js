import{r as o,j as e,X as te,M as se,H as ae,a as J,C as E,F as ne,U as W,i as re,g as ie,A as Y,b as le,q as T,c as z,o as N,l as P,d as $,e as oe,f as O,B as de,S as ce,h as X,s as pe,P as xe,k as ge,T as G,m as ue,n as K,p as k,t as me,u as F,v as L,w as q,R as he,x as B,y as ye,z as fe,D as be,E as je,G as ve,I as we,J as Se,Z as ke,W as Ce,K as ze,L as H,N as Ie}from"./vendor-DWH5sDXt.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&l(x)}).observe(document,{childList:!0,subtree:!0});function u(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(i){if(i.ep)return;i.ep=!0;const d=u(i);fetch(i.href,d)}})();const Z="/bg3-raid-manager/assets/logo-BZi5C21z.png",De=({activeTab:g,setActiveTab:c,isMobile:u})=>{const[l,i]=o.useState(!1),d=42,x=[{id:"home",label:"í™ˆ",icon:ae},{id:"chat",label:"ì±„íŒ…",icon:J},{id:"calendar",label:"ì¼ì •",icon:E},{id:"save",label:"ì„¸ì´ë¸Œ ë¶„ì„",icon:ne}],t=a=>{c(a),u&&i(!1)};return u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass",style:{position:"fixed",top:0,left:0,right:0,padding:"1rem",zIndex:1e3,display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:0},children:[e.jsx("h2",{style:{fontSize:"1.2rem",margin:0},children:"BG3 Manager"}),e.jsx("button",{onClick:()=>i(!l),style:{background:"transparent",color:"white"},children:l?e.jsx(te,{}):e.jsx(se,{})})]}),l&&e.jsx("nav",{className:"glass",style:{position:"fixed",top:"60px",left:0,right:0,bottom:0,zIndex:999,borderRadius:0,backdropFilter:"blur(20px)",display:"flex",flexDirection:"column",padding:"2rem"},children:x.map(a=>{const s=a.icon;return e.jsxs("button",{onClick:()=>t(a.id),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1.5rem",margin:"0.5rem 0",background:g===a.id?"var(--glass-border)":"transparent",color:"white",borderRadius:"12px",fontSize:"1.2rem"},children:[e.jsx(s,{})," ",a.label]},a.id)})})]}):e.jsxs("aside",{className:"glass",style:{width:"250px",height:"calc(100vh - 40px)",margin:"20px",padding:"20px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"0 0 20px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("img",{src:Z,alt:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ ì›ì •ëŒ€",style:{width:"100%",maxWidth:"200px",height:"auto",marginBottom:"10px"}}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",background:"rgba(0,0,0,0.3)",borderRadius:"10px",fontSize:"0.7rem",marginTop:"10px"},children:[e.jsx(W,{size:12}),e.jsxs("span",{children:[d,"ëª… ì ‘ì† ì¤‘"]})]})]}),e.jsx("nav",{style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"20px"},children:x.map(a=>{const s=a.icon;return e.jsxs("button",{onClick:()=>c(a.id),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:g===a.id?"rgba(255,255,255,0.1)":"transparent",color:"white",borderRadius:"8px",transition:"all 0.3s"},onMouseEnter:p=>p.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:p=>p.target.style.background=g===a.id?"rgba(255,255,255,0.1)":"transparent",children:[e.jsx(s,{size:20}),a.label]},a.id)})})]})},Re={apiKey:"AIzaSyAsbaWbo3DoSTrRFhkaf9XujWPpmeGSjAE",authDomain:"bg3-raid-manager.firebaseapp.com",projectId:"bg3-raid-manager",storageBucket:"bg3-raid-manager.firebasestorage.app",messagingSenderId:"773826713403",appId:"1:773826713403:web:c15fdfca708d47f4fcc91e"},_e=re(Re),y=ie(_e);console.log("ðŸ”¥ Firebase Connected (Real DB Mode)");const U=({user:g,setActiveTab:c})=>{const[u,l]=o.useState([]),[i,d]=o.useState(!0);o.useEffect(()=>{(async()=>{try{const a=T(z(y,"schedules"),N("date"),P(2)),p=(await $(a)).docs.map(m=>({id:m.id,...m.data()}));l(p)}catch(a){console.error(a)}finally{d(!1)}})()},[]);const x=({icon:t,title:a,desc:s,onClick:p,color:m})=>e.jsxs("div",{onClick:p,className:"glass-panel",style:{padding:"20px",cursor:"pointer",transition:"transform 0.2s",display:"flex",flexDirection:"column",gap:"10px"},onMouseEnter:j=>j.currentTarget.style.transform="translateY(-5px)",onMouseLeave:j=>j.currentTarget.style.transform="translateY(0)",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"12px",background:`rgba(${m}, 0.2)`},children:e.jsx(t,{color:`rgb(${m})`,size:24})}),e.jsx(oe,{size:16,style:{opacity:.5}})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"5px 0",fontSize:"1.1rem"},children:a}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6},children:s})]})]});return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"40px",background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",textAlign:"center"},children:[e.jsxs("h1",{style:{fontSize:"2rem",marginBottom:"10px",textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:["ì–´ì„œì˜¤ì„¸ìš”, ",e.jsx("span",{style:{color:"var(--accent-color)"},children:g?.nickname||"ëª¨í—˜ê°€"}),"ë‹˜"]}),e.jsxs("p",{style:{opacity:.8,maxWidth:"600px",margin:"0 auto"},children:["ë°œë”ìŠ¤ ê²Œì´íŠ¸ ì›ì •ëŒ€ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ",e.jsx("br",{}),"ì˜¤ëŠ˜ì˜ ëª¨í—˜ì„ ì‹œìž‘í•˜ê¸° ì „ì— ì¼ì •ì„ í™•ì¸í•˜ê³  íŒŒí‹°ì›ë“¤ê³¼ ì†Œí†µí•´ë³´ì„¸ìš”."]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[e.jsx(x,{icon:E,title:"ë ˆì´ë“œ ì¼ì •",desc:"ë‹¤ê°€ì˜¤ëŠ” ëª¨í—˜ í™•ì¸í•˜ê¸°",onClick:()=>c("calendar"),color:"248, 113, 113"}),e.jsx(x,{icon:Y,title:"ì„¸ì´ë¸Œ ë¶„ì„",desc:"ë‚´ ìºë¦­í„° ìŠ¤íŽ™ í™•ì¸",onClick:()=>c("save"),color:"167, 139, 250"}),e.jsx(x,{icon:J,title:"ìž‘ì „ íšŒì˜ì‹¤",desc:"íŒŒí‹°ì›ë“¤ê³¼ ëŒ€í™”í•˜ê¸°",onClick:()=>c("chat"),color:"52, 211, 153"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",margin:"0 0 20px"},children:[e.jsx(E,{size:18})," ë‹¤ê°€ì˜¤ëŠ” ì¼ì •"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:i?e.jsx("p",{style:{opacity:.5},children:"ë¡œë”© ì¤‘..."}):u.length===0?e.jsx("p",{style:{opacity:.5},children:"ì˜ˆì •ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."}):u.map(t=>e.jsxs("div",{style:{padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"5px 10px",background:"rgba(0,0,0,0.3)",borderRadius:"6px"},children:[e.jsxs("span",{style:{fontSize:"0.7rem",opacity:.7},children:[t.date?.split("-")[1],"ì›”"]}),e.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:t.date?.split("-")[2]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold"},children:t.title}),e.jsxs("div",{style:{fontSize:"0.8rem",opacity:.6},children:[t.time," â€¢ ",t.type==="raid"?"âš”ï¸ ë ˆì´ë“œ":"ðŸ“œ ìŠ¤í† ë¦¬"]})]})]},t.id))})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",margin:"0 0 20px"},children:[e.jsx(le,{size:18})," ì¼ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:["ê¸´ íœ´ì‹ ì·¨í•˜ê¸° (ì£¼ë¬¸ ìŠ¬ë¡¯ ë³µêµ¬)","ì•¼ì˜ì§€ ë¬¼ìž í™•ì¸","ìƒì¸ì—ê²Œ ìž¡ë™ì‚¬ë‹ˆ íŒë§¤","ë™ë£Œ í˜¸ê°ë„ ëŒ€í™”"].map((t,a)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("input",{type:"checkbox",style:{accentColor:"var(--accent-color)",width:"16px",height:"16px"}}),e.jsx("span",{style:{opacity:.8,fontSize:"0.9rem"},children:t})]},a))})]})]})]})},Ne=({user:g})=>{const[c,u]=o.useState([]),[l,i]=o.useState(""),[d,x]=o.useState(!0),t=o.useRef(null);o.useEffect(()=>{const s=T(z(y,"chats"),N("timestamp","asc"),P(50)),p=O(s,m=>{const j=m.docs.map(w=>({id:w.id,...w.data(),timestamp:w.data().timestamp?.toDate().toISOString()||new Date().toISOString()}));u(j),x(!1)});return()=>p()},[]),o.useEffect(()=>{t.current?.scrollIntoView({behavior:"smooth"})},[c]);const a=async s=>{if(s.preventDefault(),!l.trim())return;const p=l;i("");try{await X(z(y,"chats"),{text:p,sender:g?.nickname||"Anonymous",uid:g?.id||"guest",userClass:g?.className||"Unknown",timestamp:pe()})}catch(m){console.error("Error sending message: ",m),alert("ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨!")}};return e.jsxs("div",{className:"glass-panel",style:{height:"calc(100vh - 120px)",display:"flex",flexDirection:"column",padding:0},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(de,{color:"#4fd1c5"})," íŒŒí‹° ìž‘ì „ íšŒì˜ì‹¤"]}),e.jsx("span",{style:{fontSize:"0.8rem",opacity:.7},children:"ë ˆì´ë“œ ì¼ì •ê³¼ ì „ëžµì„ ë…¼ì˜í•˜ì„¸ìš”. (ì‹¤ì‹œê°„)"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[d&&e.jsx("div",{style:{textAlign:"center",opacity:.5},children:"ì±„íŒ…ë°© ì—°ê²° ì¤‘..."}),c.map(s=>{const p=g?s.uid===g.id:!1;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:p?"flex-end":"flex-start"},children:[e.jsx("div",{style:{fontSize:"0.8rem",marginBottom:"4px",opacity:.7,display:"flex",alignItems:"center",gap:"4px"},children:!p&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["[",s.userClass,"]"]}),s.sender]})}),e.jsx("div",{style:{background:p?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"rgba(255, 255, 255, 0.1)",padding:"12px 16px",borderRadius:p?"16px 16px 0 16px":"16px 16px 16px 0",maxWidth:"70%",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255,255,255,0.1)",wordBreak:"break-word"},children:s.text}),e.jsx("span",{style:{fontSize:"0.7rem",opacity:.4,marginTop:"4px"},children:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},s.id)}),e.jsx("div",{ref:t})]}),e.jsxs("form",{onSubmit:a,style:{padding:"20px",background:"rgba(0,0,0,0.2)",display:"flex",gap:"10px",borderRadius:"0 0 16px 16px"},children:[e.jsx("input",{type:"text",value:l,onChange:s=>i(s.target.value),placeholder:"ìž‘ì „ì„ ì „ë‹¬í•˜ì„¸ìš”...",style:{flex:1,padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"white",outline:"none"}}),e.jsx("button",{type:"submit",style:{padding:"12px",borderRadius:"12px",background:"var(--accent-color)",color:"white",border:"none",cursor:"pointer",transition:"all 0.3s"},children:e.jsx(ce,{size:20})})]})]})},Ae=({user:g})=>{const[c,u]=o.useState([]),[l,i]=o.useState(new Date),[d,x]=o.useState(!0),[t,a]=o.useState(!1),[s,p]=o.useState({title:"",date:"",time:"",type:"raid",members:""});o.useEffect(()=>{const n=T(z(y,"schedules"),N("date"),N("time")),h=O(n,f=>{const D=f.docs.map(C=>({id:C.id,...C.data()}));u(D),x(!1)});return()=>h()},[]);const m=async n=>{n.preventDefault();try{await X(z(y,"schedules"),{...s,members:s.members.split(",").map(h=>h.trim()).filter(h=>h),creator:g?.nickname||"Anonymous"}),a(!1),p({title:"",date:"",time:"",type:"raid",members:""})}catch(h){console.error("Error adding schedule: ",h),alert("ì¼ì • ì¶”ê°€ ì‹¤íŒ¨: "+h.message)}},j=async n=>{if(window.confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await K(k(y,"schedules",n))}catch(h){console.error("Error deleting schedule: ",h),alert("ì‚­ì œ ì‹¤íŒ¨")}},w=l.toLocaleDateString("en-CA"),_=c.filter(n=>n.date===w),I=({date:n,view:h})=>{if(h==="month"){const f=n.toLocaleDateString("en-CA");if(c.some(C=>C.date===f))return e.jsx("div",{style:{height:"6px",width:"6px",background:"#f87171",borderRadius:"50%",margin:"2px auto"}})}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px",color:"white",margin:0},children:[e.jsx(E,{className:"text-accent"})," ëª¨í—˜ ì¼ì • (Calendar)"]}),e.jsxs("button",{onClick:()=>{p(n=>({...n,date:w})),a(!0)},className:"glass-button",style:{background:"var(--accent-color)",border:"none"},children:[e.jsx(xe,{size:18})," ì¼ì • ì¶”ê°€"]})]}),e.jsx("style",{children:`
                    .react-calendar { background: transparent !important; border: none !important; width: 100% !important; color: white !important; font-family: inherit; }
                    .react-calendar__navigation button { color: white; min-width: 44px; background: none; font-size: 1.2rem; }
                    .react-calendar__navigation button:enabled:hover, .react-calendar__navigation button:enabled:focus { background-color: rgba(255,255,255,0.1); }
                    .react-calendar__month-view__weekdays { text-align: center; text-transform: uppercase; font-weight: bold; font-size: 0.8em; opacity: 0.7; color: var(--accent-color); }
                    .react-calendar__month-view__days__day { color: white; padding: 15px; background: transparent; border: none; }
                    .react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background-color: rgba(255,255,255,0.1); border-radius: 12px; }
                    .react-calendar__tile--now { background: rgba(255,255,255,0.1) !important; border-radius: 12px; }
                    .react-calendar__tile--active { background: var(--accent-color) !important; color: white !important; border-radius: 12px; }
                    .react-calendar__month-view__days__day--neighboringMonth { opacity: 0.3; }
                `}),e.jsx(ge,{onChange:i,value:l,tileContent:I,formatDay:(n,h)=>h.getDate()})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"20px",minHeight:"200px"},children:[e.jsxs("h3",{style:{margin:"0 0 15px 0",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"10px"},children:[l.toLocaleDateString()," ì¼ì • ëª©ë¡"]}),d?e.jsx("p",{children:"ë¡œë”© ì¤‘..."}):_.length===0?e.jsx("div",{style:{textAlign:"center",opacity:.5,padding:"20px"},children:"ì´ ë‚ ì§œì— ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"15px"},children:_.map(n=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{style:{fontSize:"0.8rem",padding:"2px 8px",borderRadius:"10px",background:n.type==="raid"?"rgba(248, 113, 113, 0.2)":"rgba(96, 165, 250, 0.2)",color:n.type==="raid"?"#fca5a5":"#93c5fd"},children:n.type==="raid"?"âš”ï¸ ë ˆì´ë“œ":"ðŸ“œ ìŠ¤í† ë¦¬"}),e.jsx("button",{onClick:()=>j(n.id),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:e.jsx(G,{size:14})})]}),e.jsx("h4",{style:{margin:"5px 0",fontSize:"1.1rem"},children:n.title}),e.jsxs("div",{style:{fontSize:"0.9rem",opacity:.7,display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(ue,{size:14})," ",n.time]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(W,{size:14})," ",n.members.join(", ")]})]})]},n.id))})]}),t&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(5px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>a(!1),children:e.jsxs("div",{className:"glass-panel",style:{width:"400px",padding:"30px"},onClick:n=>n.stopPropagation(),children:[e.jsx("h3",{children:"ìƒˆ ì¼ì • ì¶”ê°€"}),e.jsxs("form",{onSubmit:m,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx("input",{placeholder:"ì¼ì • ì œëª© (ì˜ˆ: 3ë§‰ ë³´ìŠ¤ì „)",value:s.title,onChange:n=>p({...s,title:n.target.value}),required:!0,style:{padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"date",value:s.date,onChange:n=>p({...s,date:n.target.value}),required:!0,style:{flex:1,padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsx("input",{type:"time",value:s.time,onChange:n=>p({...s,time:n.target.value}),required:!0,style:{flex:1,padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}})]}),e.jsxs("select",{value:s.type,onChange:n=>p({...s,type:n.target.value}),style:{padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"},children:[e.jsx("option",{value:"raid",style:{color:"black"},children:"âš”ï¸ ë ˆì´ë“œ/ì „íˆ¬"}),e.jsx("option",{value:"story",style:{color:"black"},children:"ðŸ“œ ìŠ¤í† ë¦¬ ì§„í–‰"})]}),e.jsx("input",{placeholder:"ì°¸ì—¬ ë©¤ë²„ (ì‰¼í‘œë¡œ êµ¬ë¶„)",value:s.members,onChange:n=>p({...s,members:n.target.value}),style:{padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{type:"button",onClick:()=>a(!1),style:{flex:1,padding:"10px",borderRadius:"8px",background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"white",cursor:"pointer"},children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",style:{flex:1,padding:"10px",borderRadius:"8px",background:"var(--accent-color)",border:"none",color:"white",cursor:"pointer"},children:"ë“±ë¡"})]})]})]})})]})},Be=({user:g})=>{const[c,u]=o.useState([]),[l,i]=o.useState(!0);o.useEffect(()=>{if(!g)return;const t=T(z(y,"save_reports_v2"),N("createdAt","desc"),P(10)),a=O(t,s=>{const p=s.docs.map(m=>({id:m.id,...m.data()}));u(p),i(!1)});return()=>a()},[g]);const d=async t=>{confirm("ì´ ë¶„ì„ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await K(k(y,"save_reports_v2",t))},x=({label:t,value:a,color:s})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx("span",{style:{width:"40px",fontWeight:"bold",fontSize:"0.8rem",color:"rgba(255,255,255,0.7)"},children:t}),e.jsx("div",{style:{flex:1,height:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${a/20*100}%`,height:"100%",background:s,transition:"width 0.5s"}})}),e.jsx("span",{style:{width:"25px",textAlign:"right",fontWeight:"bold"},children:a})]});return e.jsxs("div",{style:{padding:"0 0 80px"},children:[e.jsxs("div",{className:"glass-panel",style:{marginBottom:"20px",textAlign:"center"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(me,{color:"#a78bfa"})," ì‹¤ì‹œê°„ ì„¸ì´ë¸Œ ë¶„ì„ì‹¤"]}),e.jsxs("p",{style:{opacity:.7,fontSize:"0.9rem"},children:["Python Agentê°€ PCì—ì„œ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ",e.jsx("br",{}),"ê²Œìž„ì„ ì €ìž¥í•˜ë©´ ìžë™ìœ¼ë¡œ ì´ê³³ì— ë¶„ì„ ê²°ê³¼ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤."]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:l?e.jsx("p",{style:{textAlign:"center",opacity:.5},children:"ë°ì´í„° ìˆ˜ì‹  ëŒ€ê¸° ì¤‘..."}):c.length===0?e.jsxs("div",{className:"glass-panel",style:{textAlign:"center",padding:"40px"},children:[e.jsx(F,{size:48,style:{opacity:.3,marginBottom:"20px"}}),e.jsx("p",{children:"ë¶„ì„ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("p",{style:{fontSize:"0.8rem",opacity:.5},children:"ê²Œìž„ì„ ì‹¤í–‰í•˜ê³  ì €ìž¥(F5)ì„ í•´ë³´ì„¸ìš”!"})]}):c.map(t=>e.jsxs("div",{className:"glass-panel",style:{position:"relative",animation:"fadeIn 0.5s"},children:[e.jsx("button",{onClick:()=>d(t.id),style:{position:"absolute",top:"15px",right:"15px",background:"transparent",border:"none",color:"#f87171",cursor:"pointer"},children:e.jsx(G,{size:16})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"10px"},children:[e.jsx(F,{size:20,color:"var(--accent-color)"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:t.filename}),e.jsxs("span",{style:{fontSize:"0.8rem",opacity:.5},children:[new Date(t.createdAt?.toDate()).toLocaleString()," â€¢ ",t.uploader]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px"},children:[e.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem"},children:[e.jsx(Y,{size:14})," ëŠ¥ë ¥ì¹˜ (Stats)"]}),t.stats?e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"STR",value:t.stats.STR,color:"#fca5a5"}),e.jsx(x,{label:"DEX",value:t.stats.DEX,color:"#86efac"}),e.jsx(x,{label:"CON",value:t.stats.CON,color:"#fbbf24"}),e.jsx(x,{label:"INT",value:t.stats.INT,color:"#93c5fd"}),e.jsx(x,{label:"WIS",value:t.stats.WIS,color:"#d8b4fe"}),e.jsx(x,{label:"CHA",value:t.stats.CHA,color:"#f472b6"})]}):e.jsx("p",{style:{fontSize:"0.8rem",opacity:.5},children:"ë°ì´í„° ì—†ìŒ"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px",flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem"},children:[e.jsx(L,{size:14})," ë©”íƒ€ ì •ë³´"]}),e.jsxs("div",{style:{fontSize:"0.8rem",display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsxs("p",{style:{margin:0},children:["ðŸ“‚ ëª¨ë“œ: ",t.meta?.mode||"Unknown"]}),e.jsxs("p",{style:{margin:0},children:["ðŸ’¾ ë²„ì „: ",t.meta?.version||"Unknown"]}),e.jsxs("p",{style:{margin:0},children:["ðŸ“¦ í¬ê¸°: ",t.meta?.size||"Unknown"]})]})]}),t.companions&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"12px"},children:[e.jsx("h4",{style:{margin:"0 0 5px",fontSize:"0.8rem",opacity:.8},children:"ë™ë£Œ (Companions)"}),e.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:t.companions.map((a,s)=>e.jsxs("span",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:"4px",fontSize:"0.7rem"},children:[a.img," ",a.name]},s))})]})]})]}),e.jsx("div",{style:{marginTop:"15px",background:"#1e1e1e",padding:"10px",borderRadius:"8px",fontSize:"0.7rem",fontFamily:"monospace",color:"#a78bfa"},children:t.logs?.map((a,s)=>e.jsxs("div",{children:["> ",a]},s))})]},t.id))})]})},Ee=[{id:"barbarian",name:"ë°”ë°”ë¦¬ì•ˆ",icon:ye,color:"#fca5a5"},{id:"bard",name:"ë°”ë“œ",icon:fe,color:"#f9a8d4"},{id:"cleric",name:"í´ë ˆë¦­",icon:be,color:"#d1d5db"},{id:"druid",name:"ë“œë£¨ì´ë“œ",icon:je,color:"#bef264"},{id:"fighter",name:"íŒŒì´í„°",icon:L,color:"#93c5fd"},{id:"monk",name:"ëª½í¬",icon:ve,color:"#7dd3fc"},{id:"paladin",name:"íŒ”ë¼ë”˜",icon:L,color:"#fbbf24"},{id:"ranger",name:"ë ˆì¸ì €",icon:we,color:"#86efac"},{id:"rogue",name:"ë¡œê·¸",icon:Se,color:"#cbd5e1"},{id:"sorcerer",name:"ì†Œì„œëŸ¬",icon:ke,color:"#c084fc"},{id:"warlock",name:"ì›Œë½",icon:Ce,color:"#e879f9"},{id:"wizard",name:"ìœ„ìžë“œ",icon:ze,color:"#818cf8"}],Te=({onComplete:g})=>{const[c,u]=o.useState("landing"),[l,i]=o.useState(""),[d,x]=o.useState(""),[t,a]=o.useState(null),[s,p]=o.useState(""),[m,j]=o.useState(""),[w,_]=o.useState([]),[I,n]=o.useState(!1),[h,f]=o.useState(""),D=()=>{i(""),x(""),a(null),p(""),j(""),f(""),_([])};o.useEffect(()=>{c==="join_party"&&C()},[c]);const C=async()=>{n(!0);try{const b=(await $(z(y,"users_v2"))).docs.map(v=>v.data()).filter(v=>v.isAdmin===!0);_(b)}catch(r){console.error(r)}finally{n(!1)}},Q=async r=>{r.preventDefault(),n(!0),f("");try{const b=await B(k(y,"users_v2",l));if(!b.exists())f("ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ë‹‰ë„¤ìž„ìž…ë‹ˆë‹¤.");else{const v=b.data();v.password===d?(sessionStorage.setItem("bg3_user_profile",JSON.stringify(v)),g(v)):f("ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜.")}}catch(b){f(b.message)}finally{n(!1)}},V=async()=>{if(!l||!d||!t||!m){f("ëª¨ë“  ì •ë³´ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}n(!0);try{if((await B(k(y,"users_v2",l))).exists())throw new Error("ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ë‹‰ë„¤ìž„ìž…ë‹ˆë‹¤.");const b={id:l,nickname:l,password:d,partyPassword:m,className:t.name,classId:t.id,isAdmin:!0,createdAt:new Date().toISOString()};await H(k(y,"users_v2",l),b),sessionStorage.setItem("bg3_user_profile",JSON.stringify(b)),g(b)}catch(r){f(r.message)}finally{n(!1)}},ee=async()=>{if(!l||!d||!t||!s||!m){f("ëª¨ë“  ì •ë³´ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}n(!0);try{if((await B(k(y,"users_v2",l))).exists())throw new Error("ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ë‹‰ë„¤ìž„ìž…ë‹ˆë‹¤. (ë¡œê·¸ì¸ í•˜ì„¸ìš”)");const b=await B(k(y,"users_v2",s));if(!b.exists())throw new Error("ì„ íƒí•œ ì˜ì£¼ê°€ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");if(b.data().partyPassword!==m)throw new Error("ì˜ì§€ ìž…ìž¥ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");const v={id:l,nickname:l,password:d,className:t.name,classId:t.id,isAdmin:!1,leader:s,createdAt:new Date().toISOString()};await H(k(y,"users_v2",l),v),sessionStorage.setItem("bg3_user_profile",JSON.stringify(v)),g(v)}catch(r){f(r.message)}finally{n(!1)}},M=()=>e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px",maxHeight:"200px",overflowY:"auto",margin:"10px 0"},children:Ee.map(r=>e.jsxs("button",{onClick:()=>a(r),style:{padding:"8px",borderRadius:"8px",border:t?.id===r.id?`2px solid ${r.color}`:"1px solid rgba(255,255,255,0.1)",background:t?.id===r.id?"rgba(255,255,255,0.1)":"transparent",color:"white",display:"flex",flexDirection:"column",alignItems:"center",gap:"5px"},children:[e.jsx(r.icon,{size:18,color:r.color}),e.jsx("span",{style:{fontSize:"0.6rem"},children:r.name})]},r.id))}),A={maxWidth:"400px",margin:"40px auto",padding:"30px",textAlign:"center"},S={width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.2)",color:"white",marginBottom:"10px"},R={width:"100%",padding:"12px",background:"var(--accent-color)",color:"white",borderRadius:"8px",fontWeight:"bold",marginTop:"10px"};return c==="landing"?e.jsxs("div",{className:"glass-panel",style:A,children:[e.jsx("img",{src:Z,alt:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ ì›ì •ëŒ€",style:{width:"100%",maxWidth:"350px",height:"auto",marginBottom:"20px",filter:"drop-shadow(0 0 10px rgba(0,0,0,0.5))"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx("button",{onClick:()=>{D(),u("login")},style:{...R,background:"rgba(255,255,255,0.1)"},children:"ê¸°ì¡´ ëª¨í—˜ê°€ ë¡œê·¸ì¸"}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",margin:"10px 0"}}),e.jsxs("button",{onClick:()=>{D(),u("join_party")},style:R,children:[e.jsx(W,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),"ì˜ì§€ ê°€ìž…í•˜ê¸° (ì¼ë°˜)"]}),e.jsxs("button",{onClick:()=>{D(),u("create_admin")},style:{...R,background:"#f87171"},children:[e.jsx(q,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),"ìƒˆ ì˜ì§€ ê±´ì„¤ (ê´€ë¦¬ìž)"]})]})]}):c==="login"?e.jsxs("div",{className:"glass-panel",style:A,children:[e.jsx("h2",{children:"ë¡œê·¸ì¸"}),e.jsxs("form",{onSubmit:Q,children:[e.jsx("input",{type:"text",placeholder:"ë‹‰ë„¤ìž„",style:S,value:l,onChange:r=>i(r.target.value)}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",style:S,value:d,onChange:r=>x(r.target.value)}),e.jsx("button",{type:"submit",style:R,children:I?"...":"ìž…ìž¥"}),h&&e.jsx("p",{style:{color:"#f87171",marginTop:"10px"},children:h}),e.jsx("button",{type:"button",onClick:()=>u("landing"),style:{marginTop:"10px",background:"none",color:"rgba(255,255,255,0.5)"},children:"ì·¨ì†Œ"})]})]}):c==="create_admin"?e.jsxs("div",{className:"glass-panel",style:A,children:[e.jsx("h2",{style:{color:"#fca5a5"},children:"ìƒˆ ì˜ì§€ ê±´ì„¤"}),e.jsx("p",{style:{fontSize:"0.8rem",opacity:.7,marginBottom:"20px"},children:"ê´€ë¦¬ìž(ì˜ì£¼) ì„¤ì •"}),e.jsx("input",{type:"text",placeholder:"ì˜ì£¼ ë‹‰ë„¤ìž„",style:S,value:l,onChange:r=>i(r.target.value)}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",style:S,value:d,onChange:r=>x(r.target.value)}),e.jsx("input",{type:"text",placeholder:"ì˜ì§€ ìž…ìž¥ ì½”ë“œ ì„¤ì • (íŒ€ì› ê³µìœ ìš©)",style:{...S,borderColor:"#818cf8"},value:m,onChange:r=>j(r.target.value)}),e.jsx("p",{style:{textAlign:"left",opacity:.7,margin:"10px 0 5px"},children:"ì§ì—… ì„ íƒ:"}),e.jsx(M,{}),e.jsx("button",{onClick:V,style:R,children:I?"ê±´ì„¤ ì¤‘...":"ì˜ì§€ ìƒì„± ì™„ë£Œ"}),h&&e.jsx("p",{style:{color:"#f87171",marginTop:"10px"},children:h}),e.jsx("button",{onClick:()=>u("landing"),style:{marginTop:"10px",background:"none",color:"rgba(255,255,255,0.5)"},children:"ì·¨ì†Œ"})]}):c==="join_party"?e.jsxs("div",{className:"glass-panel",style:A,children:[e.jsx("h2",{children:"ì˜ì§€ ê°€ìž…"}),e.jsx("p",{style:{fontSize:"0.8rem",opacity:.7,marginBottom:"20px"},children:"í•©ë¥˜í•  ì˜ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”."}),e.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"8px",marginBottom:"10px"},children:I&&w.length===0?e.jsx("p",{children:"ë¡œë”© ì¤‘..."}):w.length===0?e.jsx("p",{children:"ìƒì„±ëœ ì˜ì§€ê°€ ì—†ìŠµë‹ˆë‹¤."}):w.map(r=>e.jsxs("div",{onClick:()=>p(r.nickname),style:{padding:"10px",marginBottom:"5px",borderRadius:"6px",cursor:"pointer",background:s===r.nickname?"var(--accent-color)":"rgba(255,255,255,0.05)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{fontWeight:"bold"},children:["ðŸ° ",r.nickname,"ì˜ ì˜ì§€"]}),s===r.nickname&&e.jsx(q,{size:14})]},r.nickname))}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginBottom:"10px"},children:e.jsxs("button",{onClick:C,style:{background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(he,{size:12})," ëª©ë¡ ìƒˆë¡œê³ ì¹¨"]})}),s&&e.jsxs("div",{style:{animation:"fadeIn 0.3s"},children:[e.jsxs("p",{style:{textAlign:"left",fontSize:"0.8rem",color:"var(--accent-color)",marginBottom:"5px"},children:[s," ì˜ì£¼ë‹˜ì˜ ì½”ë“œë¥¼ ìž…ë ¥í•˜ì„¸ìš”."]}),e.jsx("input",{type:"text",placeholder:"ì˜ì§€ ìž…ìž¥ ì½”ë“œ (Password)",style:{...S,borderColor:"#818cf8"},value:m,onChange:r=>j(r.target.value)}),e.jsx("div",{style:{height:"10px"}}),e.jsx("input",{type:"text",placeholder:"ë‚´ ë‹‰ë„¤ìž„",style:S,value:l,onChange:r=>i(r.target.value)}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",style:S,value:d,onChange:r=>x(r.target.value)}),e.jsx("p",{style:{textAlign:"left",opacity:.7,margin:"10px 0 5px"},children:"ì§ì—… ì„ íƒ:"}),e.jsx(M,{})]}),e.jsx("button",{onClick:ee,style:{...R,opacity:s?1:.5},disabled:!s,children:I?"ê°€ìž… ì¤‘...":"í•©ë¥˜í•˜ê¸°"}),h&&e.jsx("p",{style:{color:"#f87171",marginTop:"10px"},children:h}),e.jsx("button",{onClick:()=>u("landing"),style:{marginTop:"10px",background:"none",color:"rgba(255,255,255,0.5)"},children:"ì·¨ì†Œ"})]}):null},Le=()=>{const[g,c]=o.useState("home"),[u,l]=o.useState(window.innerWidth<768),[i,d]=o.useState(()=>{try{return JSON.parse(sessionStorage.getItem("bg3_user_profile"))}catch{return null}});o.useEffect(()=>{const a=()=>l(window.innerWidth<768);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const x=a=>{d(a)},t=()=>{switch(g){case"home":return e.jsx(U,{user:i,setActiveTab:c});case"chat":return e.jsx(Ne,{user:i});case"calendar":return e.jsx(Ae,{user:i});case"save":return e.jsx(Be,{user:i});default:return e.jsx(U,{user:i})}};return i?e.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"var(--bg-color)",color:"white"},children:[e.jsx(De,{activeTab:g,setActiveTab:c,isMobile:u}),e.jsx("main",{style:{flex:1,padding:u?"80px 20px 80px":"20px",overflowY:"auto",position:"relative"},children:t()})]}):e.jsx(Te,{onComplete:x})};function We(){return e.jsx(Le,{})}Ie.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(We,{})}));
