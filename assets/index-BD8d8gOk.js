import{r as d,j as e,X as V,M as Q,H as ee,a as se,C as U,F as te,U as T,i as re,g as ae,q as _,l as H,o as N,c as I,b as P,B as ne,S as ie,d as J,s as oe,P as le,T as X,e as de,f as Y,h as S,k as ce,m as L,A as pe,n as E,p as xe,t as F,R as ge,u as A,v as ue,w as me,x as he,y as ye,z as fe,D as be,E as je,Z as ve,W as we,G as Se,I as M,J as ke}from"./vendor-CmwjCKJo.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function g(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(n){if(n.ep)return;n.ep=!0;const l=g(n);fetch(n.href,l)}})();const G="/bg3-raid-manager/assets/logo-BZi5C21z.png",Ce=({activeTab:x,setActiveTab:p,isMobile:g})=>{const[o,n]=d.useState(!1),l=42,c=[{id:"home",label:"í™ˆ",icon:ee},{id:"chat",label:"ì±„íŒ…",icon:se},{id:"calendar",label:"ì¼ì •",icon:U},{id:"save",label:"ì„¸ì´ë¸Œ ë¶„ì„",icon:te}],s=r=>{p(r),g&&n(!1)};return g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass",style:{position:"fixed",top:0,left:0,right:0,padding:"1rem",zIndex:1e3,display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:0},children:[e.jsx("h2",{style:{fontSize:"1.2rem",margin:0},children:"BG3 Manager"}),e.jsx("button",{onClick:()=>n(!o),style:{background:"transparent",color:"white"},children:o?e.jsx(V,{}):e.jsx(Q,{})})]}),o&&e.jsx("nav",{className:"glass",style:{position:"fixed",top:"60px",left:0,right:0,bottom:0,zIndex:999,borderRadius:0,backdropFilter:"blur(20px)",display:"flex",flexDirection:"column",padding:"2rem"},children:c.map(r=>{const i=r.icon;return e.jsxs("button",{onClick:()=>s(r.id),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1.5rem",margin:"0.5rem 0",background:x===r.id?"var(--glass-border)":"transparent",color:"white",borderRadius:"12px",fontSize:"1.2rem"},children:[e.jsx(i,{})," ",r.label]},r.id)})})]}):e.jsxs("aside",{className:"glass",style:{width:"250px",height:"calc(100vh - 40px)",margin:"20px",padding:"20px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"0 0 20px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("img",{src:G,alt:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ ì›ì •ëŒ€",style:{width:"100%",maxWidth:"200px",height:"auto",marginBottom:"10px"}}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",background:"rgba(0,0,0,0.3)",borderRadius:"10px",fontSize:"0.7rem",marginTop:"10px"},children:[e.jsx(T,{size:12}),e.jsxs("span",{children:[l,"ëª… ì ‘ì† ì¤‘"]})]})]}),e.jsx("nav",{style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"20px"},children:c.map(r=>{const i=r.icon;return e.jsxs("button",{onClick:()=>p(r.id),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:x===r.id?"rgba(255,255,255,0.1)":"transparent",color:"white",borderRadius:"8px",transition:"all 0.3s"},onMouseEnter:u=>u.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:u=>u.target.style.background=x===r.id?"rgba(255,255,255,0.1)":"transparent",children:[e.jsx(i,{size:20}),r.label]},r.id)})})]})},q=()=>e.jsxs("div",{className:"glass-panel",children:[e.jsx("h1",{children:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ 3 íŒŒí‹° ê´€ë¦¬ìž"}),e.jsx("p",{children:"í™˜ì˜í•©ë‹ˆë‹¤! íŒ€ì›ë“¤ê³¼ ì¼ì •ì„ ì¡°ìœ¨í•˜ê³  ëª¨í—˜ì„ ë– ë‚˜ì„¸ìš”."})]}),ze={apiKey:"AIzaSyAsbaWbo3DoSTrRFhkaf9XujWPpmeGSjAE",authDomain:"bg3-raid-manager.firebaseapp.com",projectId:"bg3-raid-manager",storageBucket:"bg3-raid-manager.firebasestorage.app",messagingSenderId:"773826713403",appId:"1:773826713403:web:c15fdfca708d47f4fcc91e"},Ie=re(ze),h=ae(Ie);console.log("ðŸ”¥ Firebase Connected (Real DB Mode)");const Re=({user:x})=>{const[p,g]=d.useState([]),[o,n]=d.useState(""),[l,c]=d.useState(!0),s=d.useRef(null);d.useEffect(()=>{const i=_(I(h,"chats"),N("timestamp","asc"),H(50)),u=P(i,t=>{const m=t.docs.map(b=>({id:b.id,...b.data(),timestamp:b.data().timestamp?.toDate().toISOString()||new Date().toISOString()}));g(m),c(!1)});return()=>u()},[]),d.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[p]);const r=async i=>{if(i.preventDefault(),!o.trim())return;const u=o;n("");try{await J(I(h,"chats"),{text:u,sender:x?.nickname||"Anonymous",uid:x?.id||"guest",userClass:x?.className||"Unknown",timestamp:oe()})}catch(t){console.error("Error sending message: ",t),alert("ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨!")}};return e.jsxs("div",{className:"glass-panel",style:{height:"calc(100vh - 120px)",display:"flex",flexDirection:"column",padding:0},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(ne,{color:"#4fd1c5"})," íŒŒí‹° ìž‘ì „ íšŒì˜ì‹¤"]}),e.jsx("span",{style:{fontSize:"0.8rem",opacity:.7},children:"ë ˆì´ë“œ ì¼ì •ê³¼ ì „ëžµì„ ë…¼ì˜í•˜ì„¸ìš”. (ì‹¤ì‹œê°„)"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[l&&e.jsx("div",{style:{textAlign:"center",opacity:.5},children:"ì±„íŒ…ë°© ì—°ê²° ì¤‘..."}),p.map(i=>{const u=x?i.uid===x.id:!1;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:u?"flex-end":"flex-start"},children:[e.jsx("div",{style:{fontSize:"0.8rem",marginBottom:"4px",opacity:.7,display:"flex",alignItems:"center",gap:"4px"},children:!u&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["[",i.userClass,"]"]}),i.sender]})}),e.jsx("div",{style:{background:u?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"rgba(255, 255, 255, 0.1)",padding:"12px 16px",borderRadius:u?"16px 16px 0 16px":"16px 16px 16px 0",maxWidth:"70%",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255,255,255,0.1)",wordBreak:"break-word"},children:i.text}),e.jsx("span",{style:{fontSize:"0.7rem",opacity:.4,marginTop:"4px"},children:new Date(i.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},i.id)}),e.jsx("div",{ref:s})]}),e.jsxs("form",{onSubmit:r,style:{padding:"20px",background:"rgba(0,0,0,0.2)",display:"flex",gap:"10px",borderRadius:"0 0 16px 16px"},children:[e.jsx("input",{type:"text",value:o,onChange:i=>n(i.target.value),placeholder:"ìž‘ì „ì„ ì „ë‹¬í•˜ì„¸ìš”...",style:{flex:1,padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"white",outline:"none"}}),e.jsx("button",{type:"submit",style:{padding:"12px",borderRadius:"12px",background:"var(--accent-color)",color:"white",border:"none",cursor:"pointer",transition:"all 0.3s"},children:e.jsx(ie,{size:20})})]})]})},De=({user:x})=>{const[p,g]=d.useState([]),[o,n]=d.useState(!0),[l,c]=d.useState(!1),[s,r]=d.useState({title:"",date:"",time:"",type:"raid",members:""});d.useEffect(()=>{const t=_(I(h,"schedules"),N("date"),N("time")),m=P(t,b=>{const R=b.docs.map(k=>({id:k.id,...k.data()}));g(R),n(!1)});return()=>m()},[]);const i=async t=>{t.preventDefault();try{await J(I(h,"schedules"),{...s,members:s.members.split(",").map(m=>m.trim()).filter(m=>m),creator:x?.nickname||"Anonymous"}),c(!1),r({title:"",date:"",time:"",type:"raid",members:""})}catch(m){console.error("Error adding schedule: ",m),alert("ì¼ì • ì¶”ê°€ ì‹¤íŒ¨: "+m.message)}},u=async t=>{if(window.confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await Y(S(h,"schedules",t))}catch(m){console.error("Error deleting schedule: ",m),alert("ì‚­ì œ ì‹¤íŒ¨")}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px",color:"white"},children:[e.jsx(U,{className:"text-accent"})," ë ˆì´ë“œ ì¼ì •"]}),e.jsxs("button",{onClick:()=>c(!0),className:"glass-button",style:{background:"var(--accent-color)",border:"none"},children:[e.jsx(le,{size:18})," ì¼ì • ì¶”ê°€"]})]}),o?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"rgba(255,255,255,0.5)"},children:"ì¼ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ìž…ë‹ˆë‹¤..."}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:[p.map(t=>e.jsxs("div",{className:"glass-panel",style:{padding:"20px",transition:"transform 0.2s"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[e.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"0.8rem",background:t.type==="raid"?"rgba(239, 68, 68, 0.2)":"rgba(59, 130, 246, 0.2)",color:t.type==="raid"?"#fca5a5":"#93c5fd",border:`1px solid ${t.type==="raid"?"rgba(239, 68, 68, 0.4)":"rgba(59, 130, 246, 0.4)"}`},children:t.type==="raid"?"âš”ï¸ ë ˆì´ë“œ":"ðŸ“œ ìŠ¤í† ë¦¬"}),e.jsx("button",{onClick:()=>u(t.id),style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer"},children:e.jsx(X,{size:16})})]}),e.jsx("h3",{style:{margin:"10px 0",fontSize:"1.2rem"},children:t.title}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(de,{size:16}),t.date," ",t.time]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(T,{size:16}),t.members.join(", ")||"ë©¤ë²„ ëª¨ì§‘ ì¤‘"]})]})]},t.id)),p.length===0&&e.jsx("div",{style:{gridColumn:"1/-1",textAlign:"center",padding:"40px",background:"rgba(0,0,0,0.2)",borderRadius:"16px"},children:"ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ëª¨í—˜ì„ ê³„íší•´ë³´ì„¸ìš”!"})]}),l&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(5px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>c(!1),children:e.jsxs("div",{className:"glass-panel",style:{width:"400px",padding:"30px"},onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{children:"ìƒˆ ì¼ì • ì¶”ê°€"}),e.jsxs("form",{onSubmit:i,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx("input",{placeholder:"ì¼ì • ì œëª© (ì˜ˆ: 3ë§‰ ë³´ìŠ¤ì „)",value:s.title,onChange:t=>r({...s,title:t.target.value}),required:!0,style:{padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"date",value:s.date,onChange:t=>r({...s,date:t.target.value}),required:!0,style:{flex:1,padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsx("input",{type:"time",value:s.time,onChange:t=>r({...s,time:t.target.value}),required:!0,style:{flex:1,padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}})]}),e.jsxs("select",{value:s.type,onChange:t=>r({...s,type:t.target.value}),style:{padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"},children:[e.jsx("option",{value:"raid",style:{color:"black"},children:"âš”ï¸ ë ˆì´ë“œ/ì „íˆ¬"}),e.jsx("option",{value:"story",style:{color:"black"},children:"ðŸ“œ ìŠ¤í† ë¦¬ ì§„í–‰"})]}),e.jsx("input",{placeholder:"ì°¸ì—¬ ë©¤ë²„ (ì‰¼í‘œë¡œ êµ¬ë¶„)",value:s.members,onChange:t=>r({...s,members:t.target.value}),style:{padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{type:"button",onClick:()=>c(!1),style:{flex:1,padding:"10px",borderRadius:"8px",background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"white",cursor:"pointer"},children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",style:{flex:1,padding:"10px",borderRadius:"8px",background:"var(--accent-color)",border:"none",color:"white",cursor:"pointer"},children:"ë“±ë¡"})]})]})]})})]})},Ae=({user:x})=>{const[p,g]=d.useState([]),[o,n]=d.useState(!0);d.useEffect(()=>{if(!x)return;const s=_(I(h,"save_reports_v2"),N("createdAt","desc"),H(10)),r=P(s,i=>{const u=i.docs.map(t=>({id:t.id,...t.data()}));g(u),n(!1)});return()=>r()},[x]);const l=async s=>{confirm("ì´ ë¶„ì„ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await Y(S(h,"save_reports_v2",s))},c=({label:s,value:r,color:i})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx("span",{style:{width:"40px",fontWeight:"bold",fontSize:"0.8rem",color:"rgba(255,255,255,0.7)"},children:s}),e.jsx("div",{style:{flex:1,height:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${r/20*100}%`,height:"100%",background:i,transition:"width 0.5s"}})}),e.jsx("span",{style:{width:"25px",textAlign:"right",fontWeight:"bold"},children:r})]});return e.jsxs("div",{style:{padding:"0 0 80px"},children:[e.jsxs("div",{className:"glass-panel",style:{marginBottom:"20px",textAlign:"center"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(ce,{color:"#a78bfa"})," ì‹¤ì‹œê°„ ì„¸ì´ë¸Œ ë¶„ì„ì‹¤"]}),e.jsxs("p",{style:{opacity:.7,fontSize:"0.9rem"},children:["Python Agentê°€ PCì—ì„œ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ",e.jsx("br",{}),"ê²Œìž„ì„ ì €ìž¥í•˜ë©´ ìžë™ìœ¼ë¡œ ì´ê³³ì— ë¶„ì„ ê²°ê³¼ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤."]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:o?e.jsx("p",{style:{textAlign:"center",opacity:.5},children:"ë°ì´í„° ìˆ˜ì‹  ëŒ€ê¸° ì¤‘..."}):p.length===0?e.jsxs("div",{className:"glass-panel",style:{textAlign:"center",padding:"40px"},children:[e.jsx(L,{size:48,style:{opacity:.3,marginBottom:"20px"}}),e.jsx("p",{children:"ë¶„ì„ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("p",{style:{fontSize:"0.8rem",opacity:.5},children:"ê²Œìž„ì„ ì‹¤í–‰í•˜ê³  ì €ìž¥(F5)ì„ í•´ë³´ì„¸ìš”!"})]}):p.map(s=>e.jsxs("div",{className:"glass-panel",style:{position:"relative",animation:"fadeIn 0.5s"},children:[e.jsx("button",{onClick:()=>l(s.id),style:{position:"absolute",top:"15px",right:"15px",background:"transparent",border:"none",color:"#f87171",cursor:"pointer"},children:e.jsx(X,{size:16})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"10px"},children:[e.jsx(L,{size:20,color:"var(--accent-color)"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:s.filename}),e.jsxs("span",{style:{fontSize:"0.8rem",opacity:.5},children:[new Date(s.createdAt?.toDate()).toLocaleString()," â€¢ ",s.uploader]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px"},children:[e.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem"},children:[e.jsx(pe,{size:14})," ëŠ¥ë ¥ì¹˜ (Stats)"]}),s.stats?e.jsxs(e.Fragment,{children:[e.jsx(c,{label:"STR",value:s.stats.STR,color:"#fca5a5"}),e.jsx(c,{label:"DEX",value:s.stats.DEX,color:"#86efac"}),e.jsx(c,{label:"CON",value:s.stats.CON,color:"#fbbf24"}),e.jsx(c,{label:"INT",value:s.stats.INT,color:"#93c5fd"}),e.jsx(c,{label:"WIS",value:s.stats.WIS,color:"#d8b4fe"}),e.jsx(c,{label:"CHA",value:s.stats.CHA,color:"#f472b6"})]}):e.jsx("p",{style:{fontSize:"0.8rem",opacity:.5},children:"ë°ì´í„° ì—†ìŒ"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px",flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem"},children:[e.jsx(E,{size:14})," ë©”íƒ€ ì •ë³´"]}),e.jsxs("div",{style:{fontSize:"0.8rem",display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsxs("p",{style:{margin:0},children:["ðŸ“‚ ëª¨ë“œ: ",s.meta?.mode||"Unknown"]}),e.jsxs("p",{style:{margin:0},children:["ðŸ’¾ ë²„ì „: ",s.meta?.version||"Unknown"]}),e.jsxs("p",{style:{margin:0},children:["ðŸ“¦ í¬ê¸°: ",s.meta?.size||"Unknown"]})]})]}),s.companions&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"12px"},children:[e.jsx("h4",{style:{margin:"0 0 5px",fontSize:"0.8rem",opacity:.8},children:"ë™ë£Œ (Companions)"}),e.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:s.companions.map((r,i)=>e.jsxs("span",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:"4px",fontSize:"0.7rem"},children:[r.img," ",r.name]},i))})]})]})]}),e.jsx("div",{style:{marginTop:"15px",background:"#1e1e1e",padding:"10px",borderRadius:"8px",fontSize:"0.7rem",fontFamily:"monospace",color:"#a78bfa"},children:s.logs?.map((r,i)=>e.jsxs("div",{children:["> ",r]},i))})]},s.id))})]})},Ne=[{id:"barbarian",name:"ë°”ë°”ë¦¬ì•ˆ",icon:ue,color:"#fca5a5"},{id:"bard",name:"ë°”ë“œ",icon:me,color:"#f9a8d4"},{id:"cleric",name:"í´ë ˆë¦­",icon:he,color:"#d1d5db"},{id:"druid",name:"ë“œë£¨ì´ë“œ",icon:ye,color:"#bef264"},{id:"fighter",name:"íŒŒì´í„°",icon:E,color:"#93c5fd"},{id:"monk",name:"ëª½í¬",icon:fe,color:"#7dd3fc"},{id:"paladin",name:"íŒ”ë¼ë”˜",icon:E,color:"#fbbf24"},{id:"ranger",name:"ë ˆì¸ì €",icon:be,color:"#86efac"},{id:"rogue",name:"ë¡œê·¸",icon:je,color:"#cbd5e1"},{id:"sorcerer",name:"ì†Œì„œëŸ¬",icon:ve,color:"#c084fc"},{id:"warlock",name:"ì›Œë½",icon:we,color:"#e879f9"},{id:"wizard",name:"ìœ„ìžë“œ",icon:Se,color:"#818cf8"}],Be=({onComplete:x})=>{const[p,g]=d.useState("landing"),[o,n]=d.useState(""),[l,c]=d.useState(""),[s,r]=d.useState(null),[i,u]=d.useState(""),[t,m]=d.useState(""),[b,R]=d.useState([]),[k,v]=d.useState(!1),[C,j]=d.useState(""),B=()=>{n(""),c(""),r(null),u(""),m(""),j(""),R([])};d.useEffect(()=>{p==="join_party"&&O()},[p]);const O=async()=>{v(!0);try{const y=(await xe(I(h,"users_v2"))).docs.map(f=>f.data()).filter(f=>f.isAdmin===!0);R(y)}catch(a){console.error(a)}finally{v(!1)}},Z=async a=>{a.preventDefault(),v(!0),j("");try{const y=await A(S(h,"users_v2",o));if(!y.exists())j("ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ë‹‰ë„¤ìž„ìž…ë‹ˆë‹¤.");else{const f=y.data();f.password===l?(sessionStorage.setItem("bg3_user_profile",JSON.stringify(f)),x(f)):j("ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜.")}}catch(y){j(y.message)}finally{v(!1)}},$=async()=>{if(!o||!l||!s||!t){j("ëª¨ë“  ì •ë³´ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}v(!0);try{if((await A(S(h,"users_v2",o))).exists())throw new Error("ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ë‹‰ë„¤ìž„ìž…ë‹ˆë‹¤.");const y={id:o,nickname:o,password:l,partyPassword:t,className:s.name,classId:s.id,isAdmin:!0,createdAt:new Date().toISOString()};await M(S(h,"users_v2",o),y),sessionStorage.setItem("bg3_user_profile",JSON.stringify(y)),x(y)}catch(a){j(a.message)}finally{v(!1)}},K=async()=>{if(!o||!l||!s||!i||!t){j("ëª¨ë“  ì •ë³´ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}v(!0);try{if((await A(S(h,"users_v2",o))).exists())throw new Error("ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ë‹‰ë„¤ìž„ìž…ë‹ˆë‹¤. (ë¡œê·¸ì¸ í•˜ì„¸ìš”)");const y=await A(S(h,"users_v2",i));if(!y.exists())throw new Error("ì„ íƒí•œ ì˜ì£¼ê°€ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");if(y.data().partyPassword!==t)throw new Error("ì˜ì§€ ìž…ìž¥ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");const f={id:o,nickname:o,password:l,className:s.name,classId:s.id,isAdmin:!1,leader:i,createdAt:new Date().toISOString()};await M(S(h,"users_v2",o),f),sessionStorage.setItem("bg3_user_profile",JSON.stringify(f)),x(f)}catch(a){j(a.message)}finally{v(!1)}},W=()=>e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px",maxHeight:"200px",overflowY:"auto",margin:"10px 0"},children:Ne.map(a=>e.jsxs("button",{onClick:()=>r(a),style:{padding:"8px",borderRadius:"8px",border:s?.id===a.id?`2px solid ${a.color}`:"1px solid rgba(255,255,255,0.1)",background:s?.id===a.id?"rgba(255,255,255,0.1)":"transparent",color:"white",display:"flex",flexDirection:"column",alignItems:"center",gap:"5px"},children:[e.jsx(a.icon,{size:18,color:a.color}),e.jsx("span",{style:{fontSize:"0.6rem"},children:a.name})]},a.id))}),D={maxWidth:"400px",margin:"40px auto",padding:"30px",textAlign:"center"},w={width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.2)",color:"white",marginBottom:"10px"},z={width:"100%",padding:"12px",background:"var(--accent-color)",color:"white",borderRadius:"8px",fontWeight:"bold",marginTop:"10px"};return p==="landing"?e.jsxs("div",{className:"glass-panel",style:D,children:[e.jsx("img",{src:G,alt:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ ì›ì •ëŒ€",style:{width:"100%",maxWidth:"350px",height:"auto",marginBottom:"20px",filter:"drop-shadow(0 0 10px rgba(0,0,0,0.5))"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx("button",{onClick:()=>{B(),g("login")},style:{...z,background:"rgba(255,255,255,0.1)"},children:"ê¸°ì¡´ ëª¨í—˜ê°€ ë¡œê·¸ì¸"}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",margin:"10px 0"}}),e.jsxs("button",{onClick:()=>{B(),g("join_party")},style:z,children:[e.jsx(T,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),"ì˜ì§€ ê°€ìž…í•˜ê¸° (ì¼ë°˜)"]}),e.jsxs("button",{onClick:()=>{B(),g("create_admin")},style:{...z,background:"#f87171"},children:[e.jsx(F,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),"ìƒˆ ì˜ì§€ ê±´ì„¤ (ê´€ë¦¬ìž)"]})]})]}):p==="login"?e.jsxs("div",{className:"glass-panel",style:D,children:[e.jsx("h2",{children:"ë¡œê·¸ì¸"}),e.jsxs("form",{onSubmit:Z,children:[e.jsx("input",{type:"text",placeholder:"ë‹‰ë„¤ìž„",style:w,value:o,onChange:a=>n(a.target.value)}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",style:w,value:l,onChange:a=>c(a.target.value)}),e.jsx("button",{type:"submit",style:z,children:k?"...":"ìž…ìž¥"}),C&&e.jsx("p",{style:{color:"#f87171",marginTop:"10px"},children:C}),e.jsx("button",{type:"button",onClick:()=>g("landing"),style:{marginTop:"10px",background:"none",color:"rgba(255,255,255,0.5)"},children:"ì·¨ì†Œ"})]})]}):p==="create_admin"?e.jsxs("div",{className:"glass-panel",style:D,children:[e.jsx("h2",{style:{color:"#fca5a5"},children:"ìƒˆ ì˜ì§€ ê±´ì„¤"}),e.jsx("p",{style:{fontSize:"0.8rem",opacity:.7,marginBottom:"20px"},children:"ê´€ë¦¬ìž(ì˜ì£¼) ì„¤ì •"}),e.jsx("input",{type:"text",placeholder:"ì˜ì£¼ ë‹‰ë„¤ìž„",style:w,value:o,onChange:a=>n(a.target.value)}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",style:w,value:l,onChange:a=>c(a.target.value)}),e.jsx("input",{type:"text",placeholder:"ì˜ì§€ ìž…ìž¥ ì½”ë“œ ì„¤ì • (íŒ€ì› ê³µìœ ìš©)",style:{...w,borderColor:"#818cf8"},value:t,onChange:a=>m(a.target.value)}),e.jsx("p",{style:{textAlign:"left",opacity:.7,margin:"10px 0 5px"},children:"ì§ì—… ì„ íƒ:"}),e.jsx(W,{}),e.jsx("button",{onClick:$,style:z,children:k?"ê±´ì„¤ ì¤‘...":"ì˜ì§€ ìƒì„± ì™„ë£Œ"}),C&&e.jsx("p",{style:{color:"#f87171",marginTop:"10px"},children:C}),e.jsx("button",{onClick:()=>g("landing"),style:{marginTop:"10px",background:"none",color:"rgba(255,255,255,0.5)"},children:"ì·¨ì†Œ"})]}):p==="join_party"?e.jsxs("div",{className:"glass-panel",style:D,children:[e.jsx("h2",{children:"ì˜ì§€ ê°€ìž…"}),e.jsx("p",{style:{fontSize:"0.8rem",opacity:.7,marginBottom:"20px"},children:"í•©ë¥˜í•  ì˜ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”."}),e.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"8px",marginBottom:"10px"},children:k&&b.length===0?e.jsx("p",{children:"ë¡œë”© ì¤‘..."}):b.length===0?e.jsx("p",{children:"ìƒì„±ëœ ì˜ì§€ê°€ ì—†ìŠµë‹ˆë‹¤."}):b.map(a=>e.jsxs("div",{onClick:()=>u(a.nickname),style:{padding:"10px",marginBottom:"5px",borderRadius:"6px",cursor:"pointer",background:i===a.nickname?"var(--accent-color)":"rgba(255,255,255,0.05)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{fontWeight:"bold"},children:["ðŸ° ",a.nickname,"ì˜ ì˜ì§€"]}),i===a.nickname&&e.jsx(F,{size:14})]},a.nickname))}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginBottom:"10px"},children:e.jsxs("button",{onClick:O,style:{background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(ge,{size:12})," ëª©ë¡ ìƒˆë¡œê³ ì¹¨"]})}),i&&e.jsxs("div",{style:{animation:"fadeIn 0.3s"},children:[e.jsxs("p",{style:{textAlign:"left",fontSize:"0.8rem",color:"var(--accent-color)",marginBottom:"5px"},children:[i," ì˜ì£¼ë‹˜ì˜ ì½”ë“œë¥¼ ìž…ë ¥í•˜ì„¸ìš”."]}),e.jsx("input",{type:"text",placeholder:"ì˜ì§€ ìž…ìž¥ ì½”ë“œ (Password)",style:{...w,borderColor:"#818cf8"},value:t,onChange:a=>m(a.target.value)}),e.jsx("div",{style:{height:"10px"}}),e.jsx("input",{type:"text",placeholder:"ë‚´ ë‹‰ë„¤ìž„",style:w,value:o,onChange:a=>n(a.target.value)}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",style:w,value:l,onChange:a=>c(a.target.value)}),e.jsx("p",{style:{textAlign:"left",opacity:.7,margin:"10px 0 5px"},children:"ì§ì—… ì„ íƒ:"}),e.jsx(W,{})]}),e.jsx("button",{onClick:K,style:{...z,opacity:i?1:.5},disabled:!i,children:k?"ê°€ìž… ì¤‘...":"í•©ë¥˜í•˜ê¸°"}),C&&e.jsx("p",{style:{color:"#f87171",marginTop:"10px"},children:C}),e.jsx("button",{onClick:()=>g("landing"),style:{marginTop:"10px",background:"none",color:"rgba(255,255,255,0.5)"},children:"ì·¨ì†Œ"})]}):null},Ee=()=>{const[x,p]=d.useState("home"),[g,o]=d.useState(window.innerWidth<768),[n,l]=d.useState(()=>{try{return JSON.parse(sessionStorage.getItem("bg3_user_profile"))}catch{return null}});d.useEffect(()=>{const r=()=>o(window.innerWidth<768);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const c=r=>{l(r)},s=()=>{switch(x){case"home":return e.jsx(q,{user:n,setActiveTab:p});case"chat":return e.jsx(Re,{user:n});case"calendar":return e.jsx(De,{user:n});case"save":return e.jsx(Ae,{user:n});default:return e.jsx(q,{user:n})}};return n?e.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"var(--bg-color)",color:"white"},children:[e.jsx(Ce,{activeTab:x,setActiveTab:p,isMobile:g}),e.jsx("main",{style:{flex:1,padding:g?"80px 20px 80px":"20px",overflowY:"auto",position:"relative"},children:s()})]}):e.jsx(Be,{onComplete:c})};function Te(){return e.jsx(Ee,{})}ke.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(Te,{})}));
