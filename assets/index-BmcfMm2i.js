import{r as o,j as e,X as se,M as ae,H as ne,a as G,C as E,F as re,U as L,i as ie,g as le,A as Y,b as F,q as T,c as D,o as N,l as O,d as $,e as oe,f as P,B as de,S as ce,h as X,s as pe,P as xe,k as ge,T as K,m as ue,n as Z,p as z,t as he,u as q,v as W,w as H,R as me,x as B,y as ye,z as fe,D as be,E as je,G as ve,I as Se,J as we,Z as ke,W as Ce,K as ze,L as U,N as Ie}from"./vendor-DWH5sDXt.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))d(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const x of c.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&d(x)}).observe(document,{childList:!0,subtree:!0});function u(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(l){if(l.ep)return;l.ep=!0;const c=u(l);fetch(l.href,c)}})();const Q="/bg3-raid-manager/assets/logo-BZi5C21z.png",De=({activeTab:g,setActiveTab:p,isMobile:u})=>{const[d,l]=o.useState(!1),c=42,x=[{id:"home",label:"í™ˆ",icon:ne},{id:"chat",label:"ì±„íŒ…",icon:G},{id:"calendar",label:"ì¼ì •",icon:E},{id:"save",label:"ì„¸ì´ë¸Œ ë¶„ì„",icon:re}],a=r=>{p(r),u&&l(!1)};return u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass",style:{position:"fixed",top:0,left:0,right:0,padding:"1rem",zIndex:1e3,display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:0},children:[e.jsx("h2",{style:{fontSize:"1.2rem",margin:0},children:"BG3 Manager"}),e.jsx("button",{onClick:()=>l(!d),style:{background:"transparent",color:"white"},children:d?e.jsx(se,{}):e.jsx(ae,{})})]}),d&&e.jsx("nav",{className:"glass",style:{position:"fixed",top:"60px",left:0,right:0,bottom:0,zIndex:999,borderRadius:0,backdropFilter:"blur(20px)",display:"flex",flexDirection:"column",padding:"2rem"},children:x.map(r=>{const t=r.icon;return e.jsxs("button",{onClick:()=>a(r.id),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1.5rem",margin:"0.5rem 0",background:g===r.id?"var(--glass-border)":"transparent",color:"white",borderRadius:"12px",fontSize:"1.2rem"},children:[e.jsx(t,{})," ",r.label]},r.id)})})]}):e.jsxs("aside",{className:"glass",style:{width:"250px",height:"calc(100vh - 40px)",margin:"20px",padding:"20px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"0 0 20px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("img",{src:Q,alt:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ ì›ì •ëŒ€",style:{width:"100%",maxWidth:"200px",height:"auto",marginBottom:"10px",mixBlendMode:"screen"}}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",background:"rgba(0,0,0,0.3)",borderRadius:"10px",fontSize:"0.7rem",marginTop:"10px"},children:[e.jsx(L,{size:12}),e.jsxs("span",{children:[c,"ëª… ì ‘ì† ì¤‘"]})]})]}),e.jsx("nav",{style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"20px"},children:x.map(r=>{const t=r.icon;return e.jsxs("button",{onClick:()=>p(r.id),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:g===r.id?"rgba(255,255,255,0.1)":"transparent",color:"white",borderRadius:"8px",transition:"all 0.3s"},onMouseEnter:s=>s.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:s=>s.target.style.background=g===r.id?"rgba(255,255,255,0.1)":"transparent",children:[e.jsx(t,{size:20}),r.label]},r.id)})})]})},_e={apiKey:"AIzaSyAsbaWbo3DoSTrRFhkaf9XujWPpmeGSjAE",authDomain:"bg3-raid-manager.firebaseapp.com",projectId:"bg3-raid-manager",storageBucket:"bg3-raid-manager.firebasestorage.app",messagingSenderId:"773826713403",appId:"1:773826713403:web:c15fdfca708d47f4fcc91e"},Re=ie(_e),f=le(Re);console.log("ðŸ”¥ Firebase Connected (Real DB Mode)");const J=({user:g,setActiveTab:p})=>{const[u,d]=o.useState([]),[l,c]=o.useState(!0),[x,a]=o.useState(()=>{const s=localStorage.getItem("bg3_daily_goals");return s?JSON.parse(s):[{id:1,text:"ê¸´ íœ´ì‹ ì·¨í•˜ê¸° (ì£¼ë¬¸ ìŠ¬ë¡¯ ë³µêµ¬)",checked:!1},{id:2,text:"ì•¼ì˜ì§€ ë¬¼ìž í™•ì¸",checked:!1},{id:3,text:"ìƒì¸ì—ê²Œ ìž¡ë™ì‚¬ë‹ˆ íŒë§¤",checked:!1},{id:4,text:"ë™ë£Œ í˜¸ê°ë„ ëŒ€í™”",checked:!1}]});o.useEffect(()=>{localStorage.setItem("bg3_daily_goals",JSON.stringify(x))},[x]);const r=s=>{a(h=>h.map(y=>y.id===s?{...y,checked:!y.checked}:y))};o.useEffect(()=>{(async()=>{try{const h=T(D(f,"schedules"),N("date"),O(2)),b=(await $(h)).docs.map(S=>({id:S.id,...S.data()}));d(b)}catch(h){console.error(h)}finally{c(!1)}})()},[]);const t=({icon:s,title:h,desc:y,onClick:b,color:S})=>e.jsxs("div",{onClick:b,className:"glass-panel",style:{padding:"20px",cursor:"pointer",transition:"transform 0.2s",display:"flex",flexDirection:"column",gap:"10px"},onMouseEnter:k=>k.currentTarget.style.transform="translateY(-5px)",onMouseLeave:k=>k.currentTarget.style.transform="translateY(0)",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"12px",background:`rgba(${S}, 0.2)`},children:e.jsx(s,{color:`rgb(${S})`,size:24})}),e.jsx(oe,{size:16,style:{opacity:.5}})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"5px 0",fontSize:"1.1rem"},children:h}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6},children:y})]})]});return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"40px",background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",textAlign:"center"},children:[e.jsxs("h1",{style:{fontSize:"2rem",marginBottom:"10px",textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:["ì–´ì„œì˜¤ì„¸ìš”, ",e.jsx("span",{style:{color:"var(--accent-color)"},children:g?.nickname||"ëª¨í—˜ê°€"}),"ë‹˜"]}),e.jsxs("p",{style:{opacity:.8,maxWidth:"600px",margin:"0 auto"},children:["ë°œë”ìŠ¤ ê²Œì´íŠ¸ ì›ì •ëŒ€ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ",e.jsx("br",{}),"ì˜¤ëŠ˜ì˜ ëª¨í—˜ì„ ì‹œìž‘í•˜ê¸° ì „ì— ì¼ì •ì„ í™•ì¸í•˜ê³  íŒŒí‹°ì›ë“¤ê³¼ ì†Œí†µí•´ë³´ì„¸ìš”."]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[e.jsx(t,{icon:E,title:"ë ˆì´ë“œ ì¼ì •",desc:"ë‹¤ê°€ì˜¤ëŠ” ëª¨í—˜ í™•ì¸í•˜ê¸°",onClick:()=>p("calendar"),color:"248, 113, 113"}),e.jsx(t,{icon:Y,title:"ì„¸ì´ë¸Œ ë¶„ì„",desc:"ë‚´ ìºë¦­í„° ìŠ¤íŽ™ í™•ì¸",onClick:()=>p("save"),color:"167, 139, 250"}),e.jsx(t,{icon:G,title:"ìž‘ì „ íšŒì˜ì‹¤",desc:"íŒŒí‹°ì›ë“¤ê³¼ ëŒ€í™”í•˜ê¸°",onClick:()=>p("chat"),color:"52, 211, 153"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",margin:"0 0 20px"},children:[e.jsx(E,{size:18})," ë‹¤ê°€ì˜¤ëŠ” ì¼ì •"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:l?e.jsx("p",{style:{opacity:.5},children:"ë¡œë”© ì¤‘..."}):u.length===0?e.jsx("p",{style:{opacity:.5},children:"ì˜ˆì •ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."}):u.map(s=>e.jsxs("div",{style:{padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"5px 10px",background:"rgba(0,0,0,0.3)",borderRadius:"6px"},children:[e.jsxs("span",{style:{fontSize:"0.7rem",opacity:.7},children:[s.date?.split("-")[1],"ì›”"]}),e.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:s.date?.split("-")[2]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold"},children:s.title}),e.jsxs("div",{style:{fontSize:"0.8rem",opacity:.6},children:[s.time," â€¢ ",s.type==="raid"?"âš”ï¸ ë ˆì´ë“œ":"ðŸ“œ ìŠ¤í† ë¦¬"]})]})]},s.id))})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",margin:"0 0 20px"},children:[e.jsx(F,{size:18})," ì¼ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:x.map(s=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},onClick:()=>r(s.id),children:[e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"6px",border:"2px solid var(--accent-color)",display:"flex",alignItems:"center",justifyContent:"center",background:s.checked?"var(--accent-color)":"transparent",transition:"all 0.2s"},children:s.checked&&e.jsx(F,{size:14,color:"white"})}),e.jsx("span",{style:{opacity:s.checked?.4:.9,textDecoration:s.checked?"line-through":"none",fontSize:"0.9rem"},children:s.text})]},s.id))})]})]})]})},Ne=({user:g})=>{const[p,u]=o.useState([]),[d,l]=o.useState(""),[c,x]=o.useState(!0),a=o.useRef(null);o.useEffect(()=>{const t=T(D(f,"chats"),N("timestamp","asc"),O(50)),s=P(t,h=>{const y=h.docs.map(b=>({id:b.id,...b.data(),timestamp:b.data().timestamp?.toDate().toISOString()||new Date().toISOString()}));u(y),x(!1)});return()=>s()},[]),o.useEffect(()=>{a.current?.scrollIntoView({behavior:"smooth"})},[p]);const r=async t=>{if(t.preventDefault(),!d.trim())return;const s=d;l("");try{await X(D(f,"chats"),{text:s,sender:g?.nickname||"Anonymous",uid:g?.id||"guest",userClass:g?.className||"Unknown",timestamp:pe()})}catch(h){console.error("Error sending message: ",h),alert("ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨!")}};return e.jsxs("div",{className:"glass-panel",style:{height:"calc(100vh - 120px)",display:"flex",flexDirection:"column",padding:0},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(de,{color:"#4fd1c5"})," íŒŒí‹° ìž‘ì „ íšŒì˜ì‹¤"]}),e.jsx("span",{style:{fontSize:"0.8rem",opacity:.7},children:"ë ˆì´ë“œ ì¼ì •ê³¼ ì „ëžµì„ ë…¼ì˜í•˜ì„¸ìš”. (ì‹¤ì‹œê°„)"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[c&&e.jsx("div",{style:{textAlign:"center",opacity:.5},children:"ì±„íŒ…ë°© ì—°ê²° ì¤‘..."}),p.map(t=>{const s=g?t.uid===g.id:!1;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:s?"flex-end":"flex-start"},children:[e.jsx("div",{style:{fontSize:"0.8rem",marginBottom:"4px",opacity:.7,display:"flex",alignItems:"center",gap:"4px"},children:!s&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["[",t.userClass,"]"]}),t.sender]})}),e.jsx("div",{style:{background:s?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"rgba(255, 255, 255, 0.1)",padding:"12px 16px",borderRadius:s?"16px 16px 0 16px":"16px 16px 16px 0",maxWidth:"70%",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255,255,255,0.1)",wordBreak:"break-word"},children:t.text}),e.jsx("span",{style:{fontSize:"0.7rem",opacity:.4,marginTop:"4px"},children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},t.id)}),e.jsx("div",{ref:a})]}),e.jsxs("form",{onSubmit:r,style:{padding:"20px",background:"rgba(0,0,0,0.2)",display:"flex",gap:"10px",borderRadius:"0 0 16px 16px"},children:[e.jsx("input",{type:"text",value:d,onChange:t=>l(t.target.value),placeholder:"ìž‘ì „ì„ ì „ë‹¬í•˜ì„¸ìš”...",style:{flex:1,padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"white",outline:"none"}}),e.jsx("button",{type:"submit",style:{padding:"12px",borderRadius:"12px",background:"var(--accent-color)",color:"white",border:"none",cursor:"pointer",transition:"all 0.3s"},children:e.jsx(ce,{size:20})})]})]})},Ae=({user:g})=>{const[p,u]=o.useState([]),[d,l]=o.useState(new Date),[c,x]=o.useState(!0),[a,r]=o.useState(!1),[t,s]=o.useState({title:"",date:"",time:"",type:"raid",members:""});o.useEffect(()=>{const n=T(D(f,"schedules"),N("date"),N("time")),m=P(n,j=>{const _=j.docs.map(I=>({id:I.id,...I.data()}));u(_),x(!1)});return()=>m()},[]);const h=async n=>{n.preventDefault();try{await X(D(f,"schedules"),{...t,members:t.members.split(",").map(m=>m.trim()).filter(m=>m),creator:g?.nickname||"Anonymous"}),r(!1),s({title:"",date:"",time:"",type:"raid",members:""})}catch(m){console.error("Error adding schedule: ",m),alert("ì¼ì • ì¶”ê°€ ì‹¤íŒ¨: "+m.message)}},y=async n=>{if(window.confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await Z(z(f,"schedules",n))}catch(m){console.error("Error deleting schedule: ",m),alert("ì‚­ì œ ì‹¤íŒ¨")}},b=d.toLocaleDateString("en-CA"),S=p.filter(n=>n.date===b),k=({date:n,view:m})=>{if(m==="month"){const j=n.toLocaleDateString("en-CA");if(p.some(I=>I.date===j))return e.jsx("div",{style:{height:"6px",width:"6px",background:"#f87171",borderRadius:"50%",margin:"2px auto"}})}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px",color:"white",margin:0},children:[e.jsx(E,{className:"text-accent"})," ëª¨í—˜ ì¼ì • (Calendar)"]}),e.jsxs("button",{onClick:()=>{s(n=>({...n,date:b})),r(!0)},className:"glass-button",style:{background:"var(--accent-color)",border:"none"},children:[e.jsx(xe,{size:18})," ì¼ì • ì¶”ê°€"]})]}),e.jsx("style",{children:`
                    .react-calendar { background: transparent !important; border: none !important; width: 100% !important; color: white !important; font-family: inherit; }
                    .react-calendar__navigation button { color: white; min-width: 44px; background: none; font-size: 1.2rem; }
                    .react-calendar__navigation button:enabled:hover, .react-calendar__navigation button:enabled:focus { background-color: rgba(255,255,255,0.1); }
                    .react-calendar__month-view__weekdays { text-align: center; text-transform: uppercase; font-weight: bold; font-size: 0.8em; opacity: 0.7; color: var(--accent-color); }
                    .react-calendar__month-view__days__day { color: white; padding: 15px; background: transparent; border: none; }
                    .react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background-color: rgba(255,255,255,0.1); border-radius: 12px; }
                    .react-calendar__tile--now { background: rgba(255,255,255,0.1) !important; border-radius: 12px; }
                    .react-calendar__tile--active { background: var(--accent-color) !important; color: white !important; border-radius: 12px; }
                    .react-calendar__month-view__days__day--neighboringMonth { opacity: 0.3; }
                `}),e.jsx(ge,{onChange:l,value:d,tileContent:k,formatDay:(n,m)=>m.getDate()})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"20px",minHeight:"200px"},children:[e.jsxs("h3",{style:{margin:"0 0 15px 0",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"10px"},children:[d.toLocaleDateString()," ì¼ì • ëª©ë¡"]}),c?e.jsx("p",{children:"ë¡œë”© ì¤‘..."}):S.length===0?e.jsx("div",{style:{textAlign:"center",opacity:.5,padding:"20px"},children:"ì´ ë‚ ì§œì— ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"15px"},children:S.map(n=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{style:{fontSize:"0.8rem",padding:"2px 8px",borderRadius:"10px",background:n.type==="raid"?"rgba(248, 113, 113, 0.2)":"rgba(96, 165, 250, 0.2)",color:n.type==="raid"?"#fca5a5":"#93c5fd"},children:n.type==="raid"?"âš”ï¸ ë ˆì´ë“œ":"ðŸ“œ ìŠ¤í† ë¦¬"}),e.jsx("button",{onClick:()=>y(n.id),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:e.jsx(K,{size:14})})]}),e.jsx("h4",{style:{margin:"5px 0",fontSize:"1.1rem"},children:n.title}),e.jsxs("div",{style:{fontSize:"0.9rem",opacity:.7,display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(ue,{size:14})," ",n.time]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(L,{size:14})," ",n.members.join(", ")]})]})]},n.id))})]}),a&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(5px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>r(!1),children:e.jsxs("div",{className:"glass-panel",style:{width:"400px",padding:"30px"},onClick:n=>n.stopPropagation(),children:[e.jsx("h3",{children:"ìƒˆ ì¼ì • ì¶”ê°€"}),e.jsxs("form",{onSubmit:h,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx("input",{placeholder:"ì¼ì • ì œëª© (ì˜ˆ: 3ë§‰ ë³´ìŠ¤ì „)",value:t.title,onChange:n=>s({...t,title:n.target.value}),required:!0,style:{padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"date",value:t.date,onChange:n=>s({...t,date:n.target.value}),required:!0,style:{flex:1,padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsx("input",{type:"time",value:t.time,onChange:n=>s({...t,time:n.target.value}),required:!0,style:{flex:1,padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}})]}),e.jsxs("select",{value:t.type,onChange:n=>s({...t,type:n.target.value}),style:{padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"},children:[e.jsx("option",{value:"raid",style:{color:"black"},children:"âš”ï¸ ë ˆì´ë“œ/ì „íˆ¬"}),e.jsx("option",{value:"story",style:{color:"black"},children:"ðŸ“œ ìŠ¤í† ë¦¬ ì§„í–‰"})]}),e.jsx("input",{placeholder:"ì°¸ì—¬ ë©¤ë²„ (ì‰¼í‘œë¡œ êµ¬ë¶„)",value:t.members,onChange:n=>s({...t,members:n.target.value}),style:{padding:"10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{type:"button",onClick:()=>r(!1),style:{flex:1,padding:"10px",borderRadius:"8px",background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"white",cursor:"pointer"},children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",style:{flex:1,padding:"10px",borderRadius:"8px",background:"var(--accent-color)",border:"none",color:"white",cursor:"pointer"},children:"ë“±ë¡"})]})]})]})})]})},Be=({user:g})=>{const[p,u]=o.useState([]),[d,l]=o.useState(!0);o.useEffect(()=>{if(!g)return;const a=T(D(f,"save_reports_v2"),N("createdAt","desc"),O(10)),r=P(a,t=>{const s=t.docs.map(h=>({id:h.id,...h.data()}));u(s),l(!1)});return()=>r()},[g]);const c=async a=>{confirm("ì´ ë¶„ì„ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await Z(z(f,"save_reports_v2",a))},x=({label:a,value:r,color:t})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx("span",{style:{width:"40px",fontWeight:"bold",fontSize:"0.8rem",color:"rgba(255,255,255,0.7)"},children:a}),e.jsx("div",{style:{flex:1,height:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${r/20*100}%`,height:"100%",background:t,transition:"width 0.5s"}})}),e.jsx("span",{style:{width:"25px",textAlign:"right",fontWeight:"bold"},children:r})]});return e.jsxs("div",{style:{padding:"0 0 80px"},children:[e.jsxs("div",{className:"glass-panel",style:{marginBottom:"20px",textAlign:"center",border:"1px solid var(--accent-color)"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(he,{color:"#a78bfa"})," ì‹¤ì‹œê°„ ì„¸ì´ë¸Œ ë¶„ì„ (ìžë™ ë™ê¸°í™”)"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",margin:"15px 0"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#4ade80",boxShadow:"0 0 10px #4ade80"}}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#4ade80"},children:"Python Agent ìž‘ë™ ì¤‘"})]}),e.jsxs("p",{style:{opacity:.8,fontSize:"0.9rem",maxWidth:"600px",margin:"0 auto"},children:["ë³„ë„ì˜ ì—…ë¡œë“œê°€ í•„ìš” ì—†ìŠµë‹ˆë‹¤! ",e.jsx("br",{}),"ê²Œìž„ì„ ",e.jsx("b",{children:"ì €ìž¥(F5)"}),"í•˜ë©´ Python Agentê°€ ìžë™ìœ¼ë¡œ íŒŒì¼ì„ ê°ì§€í•˜ì—¬ ì´ê³³ì— ë¶„ì„ ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤."]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:d?e.jsx("p",{style:{textAlign:"center",opacity:.5},children:"ë°ì´í„° ìˆ˜ì‹  ëŒ€ê¸° ì¤‘..."}):p.length===0?e.jsxs("div",{className:"glass-panel",style:{textAlign:"center",padding:"40px"},children:[e.jsx(q,{size:48,style:{opacity:.3,marginBottom:"20px"}}),e.jsx("p",{children:"ë¶„ì„ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("p",{style:{fontSize:"0.8rem",opacity:.5},children:"ê²Œìž„ì„ ì‹¤í–‰í•˜ê³  ì €ìž¥(F5)ì„ í•´ë³´ì„¸ìš”!"})]}):p.map(a=>e.jsxs("div",{className:"glass-panel",style:{position:"relative",animation:"fadeIn 0.5s"},children:[e.jsx("button",{onClick:()=>c(a.id),style:{position:"absolute",top:"15px",right:"15px",background:"transparent",border:"none",color:"#f87171",cursor:"pointer"},children:e.jsx(K,{size:16})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"10px"},children:[e.jsx(q,{size:20,color:"var(--accent-color)"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:a.filename}),e.jsxs("span",{style:{fontSize:"0.8rem",opacity:.5},children:[new Date(a.createdAt?.toDate()).toLocaleString()," â€¢ ",a.uploader]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px"},children:[e.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem"},children:[e.jsx(Y,{size:14})," ëŠ¥ë ¥ì¹˜ (Stats)"]}),a.stats?e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"STR",value:a.stats.STR,color:"#fca5a5"}),e.jsx(x,{label:"DEX",value:a.stats.DEX,color:"#86efac"}),e.jsx(x,{label:"CON",value:a.stats.CON,color:"#fbbf24"}),e.jsx(x,{label:"INT",value:a.stats.INT,color:"#93c5fd"}),e.jsx(x,{label:"WIS",value:a.stats.WIS,color:"#d8b4fe"}),e.jsx(x,{label:"CHA",value:a.stats.CHA,color:"#f472b6"})]}):e.jsx("p",{style:{fontSize:"0.8rem",opacity:.5},children:"ë°ì´í„° ì—†ìŒ"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px",flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem"},children:[e.jsx(W,{size:14})," ë©”íƒ€ ì •ë³´"]}),e.jsxs("div",{style:{fontSize:"0.8rem",display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsxs("p",{style:{margin:0},children:["ðŸ“‚ ëª¨ë“œ: ",a.meta?.mode||"Unknown"]}),e.jsxs("p",{style:{margin:0},children:["ðŸ’¾ ë²„ì „: ",a.meta?.version||"Unknown"]}),e.jsxs("p",{style:{margin:0},children:["ðŸ“¦ í¬ê¸°: ",a.meta?.size||"Unknown"]})]})]}),a.companions&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"12px"},children:[e.jsx("h4",{style:{margin:"0 0 5px",fontSize:"0.8rem",opacity:.8},children:"ë™ë£Œ (Companions)"}),e.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:a.companions.map((r,t)=>e.jsxs("span",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:"4px",fontSize:"0.7rem"},children:[r.img," ",r.name]},t))})]})]})]}),e.jsx("div",{style:{marginTop:"15px",background:"#1e1e1e",padding:"10px",borderRadius:"8px",fontSize:"0.7rem",fontFamily:"monospace",color:"#a78bfa"},children:a.logs?.map((r,t)=>e.jsxs("div",{children:["> ",r]},t))})]},a.id))})]})},Ee=[{id:"barbarian",name:"ë°”ë°”ë¦¬ì•ˆ",icon:ye,color:"#fca5a5"},{id:"bard",name:"ë°”ë“œ",icon:fe,color:"#f9a8d4"},{id:"cleric",name:"í´ë ˆë¦­",icon:be,color:"#d1d5db"},{id:"druid",name:"ë“œë£¨ì´ë“œ",icon:je,color:"#bef264"},{id:"fighter",name:"íŒŒì´í„°",icon:W,color:"#93c5fd"},{id:"monk",name:"ëª½í¬",icon:ve,color:"#7dd3fc"},{id:"paladin",name:"íŒ”ë¼ë”˜",icon:W,color:"#fbbf24"},{id:"ranger",name:"ë ˆì¸ì €",icon:Se,color:"#86efac"},{id:"rogue",name:"ë¡œê·¸",icon:we,color:"#cbd5e1"},{id:"sorcerer",name:"ì†Œì„œëŸ¬",icon:ke,color:"#c084fc"},{id:"warlock",name:"ì›Œë½",icon:Ce,color:"#e879f9"},{id:"wizard",name:"ìœ„ìžë“œ",icon:ze,color:"#818cf8"}],Te=({onComplete:g})=>{const[p,u]=o.useState("landing"),[d,l]=o.useState(""),[c,x]=o.useState(""),[a,r]=o.useState(null),[t,s]=o.useState(""),[h,y]=o.useState(""),[b,S]=o.useState([]),[k,n]=o.useState(!1),[m,j]=o.useState(""),_=()=>{l(""),x(""),r(null),s(""),y(""),j(""),S([])};o.useEffect(()=>{p==="join_party"&&I()},[p]);const I=async()=>{n(!0);try{const v=(await $(D(f,"users_v2"))).docs.map(w=>w.data()).filter(w=>w.isAdmin===!0);S(v)}catch(i){console.error(i)}finally{n(!1)}},V=async i=>{i.preventDefault(),n(!0),j("");try{const v=await B(z(f,"users_v2",d));if(!v.exists())j("ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ë‹‰ë„¤ìž„ìž…ë‹ˆë‹¤.");else{const w=v.data();w.password===c?(localStorage.setItem("bg3_user_profile",JSON.stringify(w)),g(w)):j("ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜.")}}catch(v){j(v.message)}finally{n(!1)}},ee=async()=>{if(!d||!c||!a||!h){j("ëª¨ë“  ì •ë³´ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}n(!0);try{if((await B(z(f,"users_v2",d))).exists())throw new Error("ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ë‹‰ë„¤ìž„ìž…ë‹ˆë‹¤.");const v={id:d,nickname:d,password:c,partyPassword:h,className:a.name,classId:a.id,isAdmin:!0,createdAt:new Date().toISOString()};await U(z(f,"users_v2",d),v),localStorage.setItem("bg3_user_profile",JSON.stringify(v)),g(v)}catch(i){j(i.message)}finally{n(!1)}},te=async()=>{if(!d||!c||!a||!t||!h){j("ëª¨ë“  ì •ë³´ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}n(!0);try{if((await B(z(f,"users_v2",d))).exists())throw new Error("ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ë‹‰ë„¤ìž„ìž…ë‹ˆë‹¤. (ë¡œê·¸ì¸ í•˜ì„¸ìš”)");const v=await B(z(f,"users_v2",t));if(!v.exists())throw new Error("ì„ íƒí•œ ì˜ì£¼ê°€ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");if(v.data().partyPassword!==h)throw new Error("ì˜ì§€ ìž…ìž¥ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");const w={id:d,nickname:d,password:c,className:a.name,classId:a.id,isAdmin:!1,leader:t,createdAt:new Date().toISOString()};await U(z(f,"users_v2",d),w),localStorage.setItem("bg3_user_profile",JSON.stringify(w)),g(w)}catch(i){j(i.message)}finally{n(!1)}},M=()=>e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px",maxHeight:"200px",overflowY:"auto",margin:"10px 0"},children:Ee.map(i=>e.jsxs("button",{onClick:()=>r(i),style:{padding:"8px",borderRadius:"8px",border:a?.id===i.id?`2px solid ${i.color}`:"1px solid rgba(255,255,255,0.1)",background:a?.id===i.id?"rgba(255,255,255,0.1)":"transparent",color:"white",display:"flex",flexDirection:"column",alignItems:"center",gap:"5px"},children:[e.jsx(i.icon,{size:18,color:i.color}),e.jsx("span",{style:{fontSize:"0.6rem"},children:i.name})]},i.id))}),A={maxWidth:"400px",margin:"40px auto",padding:"30px",textAlign:"center"},C={width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.2)",color:"white",marginBottom:"10px"},R={width:"100%",padding:"12px",background:"var(--accent-color)",color:"white",borderRadius:"8px",fontWeight:"bold",marginTop:"10px"};return p==="landing"?e.jsxs("div",{className:"glass-panel",style:A,children:[e.jsx("img",{src:Q,alt:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ ì›ì •ëŒ€",style:{width:"100%",maxWidth:"350px",height:"auto",marginBottom:"20px",filter:"drop-shadow(0 0 10px rgba(0,0,0,0.5))",mixBlendMode:"screen"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx("button",{onClick:()=>{_(),u("login")},style:{...R,background:"rgba(255,255,255,0.1)"},children:"ê¸°ì¡´ ëª¨í—˜ê°€ ë¡œê·¸ì¸"}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",margin:"10px 0"}}),e.jsxs("button",{onClick:()=>{_(),u("join_party")},style:R,children:[e.jsx(L,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),"ì˜ì§€ ê°€ìž…í•˜ê¸° (ì¼ë°˜)"]}),e.jsxs("button",{onClick:()=>{_(),u("create_admin")},style:{...R,background:"#f87171"},children:[e.jsx(H,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),"ìƒˆ ì˜ì§€ ê±´ì„¤ (ê´€ë¦¬ìž)"]})]})]}):p==="login"?e.jsxs("div",{className:"glass-panel",style:A,children:[e.jsx("h2",{children:"ë¡œê·¸ì¸"}),e.jsxs("form",{onSubmit:V,children:[e.jsx("input",{type:"text",placeholder:"ë‹‰ë„¤ìž„",style:C,value:d,onChange:i=>l(i.target.value)}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",style:C,value:c,onChange:i=>x(i.target.value)}),e.jsx("button",{type:"submit",style:R,children:k?"...":"ìž…ìž¥"}),m&&e.jsx("p",{style:{color:"#f87171",marginTop:"10px"},children:m}),e.jsx("button",{type:"button",onClick:()=>u("landing"),style:{marginTop:"10px",background:"none",color:"rgba(255,255,255,0.5)"},children:"ì·¨ì†Œ"})]})]}):p==="create_admin"?e.jsxs("div",{className:"glass-panel",style:A,children:[e.jsx("h2",{style:{color:"#fca5a5"},children:"ìƒˆ ì˜ì§€ ê±´ì„¤"}),e.jsx("p",{style:{fontSize:"0.8rem",opacity:.7,marginBottom:"20px"},children:"ê´€ë¦¬ìž(ì˜ì£¼) ì„¤ì •"}),e.jsx("input",{type:"text",placeholder:"ì˜ì£¼ ë‹‰ë„¤ìž„",style:C,value:d,onChange:i=>l(i.target.value)}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",style:C,value:c,onChange:i=>x(i.target.value)}),e.jsx("input",{type:"text",placeholder:"ì˜ì§€ ìž…ìž¥ ì½”ë“œ ì„¤ì • (íŒ€ì› ê³µìœ ìš©)",style:{...C,borderColor:"#818cf8"},value:h,onChange:i=>y(i.target.value)}),e.jsx("p",{style:{textAlign:"left",opacity:.7,margin:"10px 0 5px"},children:"ì§ì—… ì„ íƒ:"}),e.jsx(M,{}),e.jsx("button",{onClick:ee,style:R,children:k?"ê±´ì„¤ ì¤‘...":"ì˜ì§€ ìƒì„± ì™„ë£Œ"}),m&&e.jsx("p",{style:{color:"#f87171",marginTop:"10px"},children:m}),e.jsx("button",{onClick:()=>u("landing"),style:{marginTop:"10px",background:"none",color:"rgba(255,255,255,0.5)"},children:"ì·¨ì†Œ"})]}):p==="join_party"?e.jsxs("div",{className:"glass-panel",style:A,children:[e.jsx("h2",{children:"ì˜ì§€ ê°€ìž…"}),e.jsx("p",{style:{fontSize:"0.8rem",opacity:.7,marginBottom:"20px"},children:"í•©ë¥˜í•  ì˜ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”."}),e.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"8px",marginBottom:"10px"},children:k&&b.length===0?e.jsx("p",{children:"ë¡œë”© ì¤‘..."}):b.length===0?e.jsx("p",{children:"ìƒì„±ëœ ì˜ì§€ê°€ ì—†ìŠµë‹ˆë‹¤."}):b.map(i=>e.jsxs("div",{onClick:()=>s(i.nickname),style:{padding:"10px",marginBottom:"5px",borderRadius:"6px",cursor:"pointer",background:t===i.nickname?"var(--accent-color)":"rgba(255,255,255,0.05)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{fontWeight:"bold"},children:["ðŸ° ",i.nickname,"ì˜ ì˜ì§€"]}),t===i.nickname&&e.jsx(H,{size:14})]},i.nickname))}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginBottom:"10px"},children:e.jsxs("button",{onClick:I,style:{background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(me,{size:12})," ëª©ë¡ ìƒˆë¡œê³ ì¹¨"]})}),t&&e.jsxs("div",{style:{animation:"fadeIn 0.3s"},children:[e.jsxs("p",{style:{textAlign:"left",fontSize:"0.8rem",color:"var(--accent-color)",marginBottom:"5px"},children:[t," ì˜ì£¼ë‹˜ì˜ ì½”ë“œë¥¼ ìž…ë ¥í•˜ì„¸ìš”."]}),e.jsx("input",{type:"text",placeholder:"ì˜ì§€ ìž…ìž¥ ì½”ë“œ (Password)",style:{...C,borderColor:"#818cf8"},value:h,onChange:i=>y(i.target.value)}),e.jsx("div",{style:{height:"10px"}}),e.jsx("input",{type:"text",placeholder:"ë‚´ ë‹‰ë„¤ìž„",style:C,value:d,onChange:i=>l(i.target.value)}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",style:C,value:c,onChange:i=>x(i.target.value)}),e.jsx("p",{style:{textAlign:"left",opacity:.7,margin:"10px 0 5px"},children:"ì§ì—… ì„ íƒ:"}),e.jsx(M,{})]}),e.jsx("button",{onClick:te,style:{...R,opacity:t?1:.5},disabled:!t,children:k?"ê°€ìž… ì¤‘...":"í•©ë¥˜í•˜ê¸°"}),m&&e.jsx("p",{style:{color:"#f87171",marginTop:"10px"},children:m}),e.jsx("button",{onClick:()=>u("landing"),style:{marginTop:"10px",background:"none",color:"rgba(255,255,255,0.5)"},children:"ì·¨ì†Œ"})]}):null},We=()=>{const[g,p]=o.useState("home"),[u,d]=o.useState(window.innerWidth<768),[l,c]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("bg3_user_profile"))}catch{return null}});o.useEffect(()=>{const r=()=>d(window.innerWidth<768);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const x=r=>{c(r)},a=()=>{switch(g){case"home":return e.jsx(J,{user:l,setActiveTab:p});case"chat":return e.jsx(Ne,{user:l});case"calendar":return e.jsx(Ae,{user:l});case"save":return e.jsx(Be,{user:l});default:return e.jsx(J,{user:l})}};return l?e.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"var(--bg-color)",color:"white"},children:[e.jsx(De,{activeTab:g,setActiveTab:p,isMobile:u}),e.jsx("main",{style:{flex:1,padding:u?"80px 20px 80px":"20px",overflowY:"auto",position:"relative"},children:a()})]}):e.jsx(Te,{onComplete:x})};function Le(){return e.jsx(We,{})}Ie.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(Le,{})}));
