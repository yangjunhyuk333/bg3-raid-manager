import{i as ze,g as Re,R as W,q as H,w as $,c as B,o as K,H as Ae,M as be,C as V,F as je,a as De,U as F,j as e,r as ae,L as ve,S as me,b as m,A as we,d as de,l as ce,e as pe,f as _e,B as Ee,X as xe,I as ke,h as Ne,k as Z,s as ge,m as Be,n as We,p as Te,t as X,u as ee,v as N,x as Y,y as Le,z as se,D as Se,T as Ce,E as Q,G as Pe,J as Oe,K as Me,N as Fe,O as $e,P as Ue,Q as He,Z as qe,W as Je,V as Ke,Y as Ge,_ as G,$ as oe,a0 as he,a1 as Ye,a2 as Ve,a3 as Xe,a4 as Qe,a5 as Ze,a6 as et,a7 as tt}from"./vendor-ClXMfPpn.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))p(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&p(h)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function p(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();const nt="modulepreload",at=function(t){return"/bg3-raid-manager/"+t},ue={},le=function(a,s,p){let n=Promise.resolve();if(s&&s.length>0){let i=function(o){return Promise.all(o.map(x=>Promise.resolve(x).then(r=>({status:"fulfilled",value:r}),r=>({status:"rejected",reason:r}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),c=h?.nonce||h?.getAttribute("nonce");n=i(s.map(o=>{if(o=at(o),o in ue)return;ue[o]=!0;const x=o.endsWith(".css"),r=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const y=document.createElement("link");if(y.rel=x?"stylesheet":nt,x||(y.as="script"),y.crossOrigin="",y.href=o,c&&y.setAttribute("nonce",c),document.head.appendChild(y),x)return new Promise((v,f)=>{y.addEventListener("load",v),y.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}function l(h){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=h,window.dispatchEvent(c),!c.defaultPrevented)throw h}return n.then(h=>{for(const c of h||[])c.status==="rejected"&&l(c.reason);return a().catch(l)})},U="/bg3-raid-manager/assets/logo-BLpM7sGS.svg",st={apiKey:"AIzaSyAsbaWbo3DoSTrRFhkaf9XujWPpmeGSjAE",authDomain:"bg3-raid-manager.firebaseapp.com",projectId:"bg3-raid-manager",storageBucket:"bg3-raid-manager.firebasestorage.app",messagingSenderId:"773826713403",appId:"1:773826713403:web:c15fdfca708d47f4fcc91e"},rt=ze(st),b=Re(rt);console.log("ğŸ”¥ Firebase Connected (Real DB Mode)");const it=({activeTab:t,setActiveTab:a,isMobile:s,user:p})=>{const[n,l]=W.useState(0),[h,c]=W.useState(4),[i,o]=W.useState(!1),[x,r]=W.useState(!1),[y,v]=W.useState(!1),[f,j]=W.useState(!1),[A,R]=W.useState(p?.nickname||""),[_,E]=W.useState(p?.className||"Warrior"),[u,w]=W.useState(p?.role||(p?.isAdmin?"Admin":"User")),k=p?.isAdmin===!0;W.useEffect(()=>{if(!p?.campId)return;const g=H(B(b,"users_v2"),$("campId","==",p.campId)),C=K(g,d=>{l(d.size)});return()=>C()},[p?.campId]),W.useEffect(()=>{p&&(R(p.nickname||""),E(p.className||"Warrior"),w(p.role||(p.isAdmin?"Admin":"User")))},[p,x]),W.useEffect(()=>{const g=C=>{C.shiftKey&&C.altKey&&(C.key==="R"||C.key==="r")&&v(d=>!d)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]);const I=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},T=async()=>{if(!A.trim())return alert("Nickname is required");try{const{updateDoc:g,doc:C}=await le(async()=>{const{updateDoc:D,doc:q}=await import("./vendor-ClXMfPpn.js").then(O=>O.a8);return{updateDoc:D,doc:q}},[]),d=C(b,"users_v2",p.id),S={nickname:A,className:_,role:u};await g(d,S);const z={...p,...S};localStorage.setItem("bg3_user_profile",JSON.stringify(z)),alert("í”„ë¡œí•„ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì ìš©ì„ ìœ„í•´ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤."),window.location.reload()}catch(g){console.error(g),alert("ìˆ˜ì • ì‹¤íŒ¨: "+g.message)}},L=["ë°”ë°”ë¦¬ì•ˆ","ë°”ë“œ","í´ë ˆë¦­","ë“œë£¨ì´ë“œ","íŒŒì´í„°","ëª½í¬","íŒ”ë¼ë”˜","ë ˆì¸ì €","ë¡œê·¸","ì†Œì„œëŸ¬","ì›Œë½","ìœ„ìë“œ"],P=[{id:"home",label:"í™ˆ",icon:Ae},{id:"chat",label:"ì±„íŒ…",icon:be},{id:"calendar",label:"ì¼ì •",icon:V},{id:"tactics",label:"ì „ìˆ íŒ",icon:je},{id:"save",label:"ì„¸ì´ë¸Œ",icon:De},{id:"profile",label:"í”„ë¡œí•„",icon:F}];k&&P.push({id:"admin",label:"ì•¼ì˜ì§€ ê´€ë¦¬",icon:me});const te=P.filter(g=>g.id!=="profile");if(s){const g=P.slice(0,4);return e.jsx(e.Fragment,{children:e.jsxs("nav",{className:"glass",style:{position:"fixed",bottom:0,left:0,right:0,height:"calc(65px + env(safe-area-inset-bottom))",zIndex:1e3,display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:0,borderTop:"1px solid rgba(255,255,255,0.05)",backdropFilter:"blur(25px)",background:"rgba(10, 10, 20, 0.95)",padding:"0 20px env(safe-area-inset-bottom)"},children:[g.map(C=>{const d=C.icon,S=t===C.id;return e.jsxs("button",{onClick:()=>a(C.id),style:{background:S?"rgba(255,255,255,0.1)":"transparent",borderRadius:"12px",border:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",color:S?"var(--accent-color)":"rgba(255,255,255,0.5)",height:"55px",flex:1,margin:"0 2px"},children:[e.jsx(d,{size:S?26:24,strokeWidth:S?2.5:2}),S&&e.jsx("span",{style:{fontSize:"10px"},children:C.label})]},C.id)}),e.jsxs("button",{onClick:()=>a("profile"),style:{background:t==="profile"?"rgba(255,255,255,0.1)":"transparent",borderRadius:"12px",border:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",color:t==="profile"?"var(--accent-color)":"rgba(255,255,255,0.5)",height:"55px",flex:1,margin:"0 2px"},children:[e.jsx(F,{size:t==="profile"?26:24,strokeWidth:t==="profile"?2.5:2}),t==="profile"&&e.jsx("span",{style:{fontSize:"10px"},children:"í”„ë¡œí•„"})]})]})})}return e.jsxs("aside",{className:"glass",style:{width:"280px",height:"100vh",margin:0,padding:"25px",display:"flex",flexDirection:"column",borderRadius:0,borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(20, 20, 30, 0.4)",position:"sticky",top:0},children:[e.jsxs("div",{style:{padding:"0 0 25px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[y&&e.jsx("button",{id:"db-reset-btn",onClick:async()=>{if(confirm("âš ï¸ ê²½ê³ : ì •ë§ë¡œ DBë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëŒì´í‚¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")){const{collection:g,getDocs:C,deleteDoc:d}=await le(async()=>{const{collection:D,getDocs:q,deleteDoc:O}=await import("./vendor-ClXMfPpn.js").then(ne=>ne.a8);return{collection:D,getDocs:q,deleteDoc:O}},[]);(await C(g(b,"users_v2"))).forEach(D=>d(D.ref)),(await C(g(b,"camps"))).forEach(D=>d(D.ref)),alert("ì´ˆê¸°í™” ì™„ë£Œ. ì¬ì ‘ì†í•©ë‹ˆë‹¤."),I()}},style:{background:"red",color:"white",border:"none",padding:"5px",marginBottom:"10px",fontSize:"0.7rem",cursor:"pointer",width:"100%"},children:"[ADMIN] DB ì´ˆê¸°í™”"}),e.jsxs("div",{className:"logo-wrapper",style:{position:"relative",width:"100%",marginBottom:"10px",cursor:"pointer"},onClick:()=>window.location.reload(),children:[e.jsx("img",{src:U,alt:"BG3",style:{width:"100%",height:"auto",display:"block"},onError:g=>g.target.style.display="none"}),e.jsx("div",{className:"logo-shine",style:{WebkitMaskImage:`url(${U})`,maskImage:`url(${U})`}})]}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",fontSize:"0.75rem",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(F,{size:12,color:"#4ade80"}),e.jsxs("span",{style:{color:"#4ade80"},children:[n,"/",h,"ëª… ì ‘ì† ì¤‘"]})]})]}),e.jsx("nav",{style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"20px",flex:1},children:te.map(g=>{const C=g.icon;return e.jsxs("button",{onClick:()=>a(g.id),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:t===g.id?"rgba(255,255,255,0.15)":"transparent",color:t===g.id?"white":"rgba(255,255,255,0.7)",borderRadius:"12px",transition:"all 0.2s",border:"none",cursor:"pointer",fontSize:"0.95rem",fontWeight:t===g.id?"bold":"normal"},children:[e.jsx(C,{size:20,color:t===g.id?"var(--accent-color)":"currentColor"}),g.label]},g.id)})}),e.jsxs("div",{onClick:()=>o(!0),style:{marginTop:"auto",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",transition:"background 0.2s",padding:"10px",borderRadius:"12px"},onMouseEnter:g=>g.currentTarget.style.background="rgba(255,255,255,0.05)",onMouseLeave:g=>g.currentTarget.style.background="transparent",title:"í”„ë¡œí•„ ë³´ê¸°",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--accent-color)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(F,{size:20,color:"white"})}),e.jsx("div",{style:{flex:1,overflow:"hidden"},children:e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:p.nickname})}),e.jsx("button",{onClick:g=>{g.stopPropagation(),j(!0)},style:{background:"rgba(248, 113, 113, 0.15)",border:"1px solid rgba(248, 113, 113, 0.4)",borderRadius:"8px",padding:"10px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#f87171",fontWeight:"bold"},title:"ë¡œê·¸ì•„ì›ƒ",children:e.jsx(ve,{size:16})})]}),f&&ae.createPortal(e.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:e.jsxs("div",{className:"modal-content",onClick:g=>g.stopPropagation(),style:{maxWidth:"350px",padding:"30px",textAlign:"center"},children:[e.jsx("h3",{style:{fontSize:"1.4rem",marginBottom:"10px",marginTop:"10px"},children:"ë¡œê·¸ì•„ì›ƒ"}),e.jsxs("p",{style:{opacity:.8,marginBottom:"30px",lineHeight:"1.5"},children:["ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.8rem",opacity:.5},children:"(ëª¨ë“  ë¡œê·¸ì¸ ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤)"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>j(!1),style:{flex:1,padding:"14px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"white",cursor:"pointer",fontWeight:"bold"},children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:I,style:{flex:1,padding:"14px",borderRadius:"12px",border:"none",background:"linear-gradient(45deg, #ef4444, #dc2626)",color:"white",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 15px rgba(239,68,68,0.3)"},children:"í™•ì¸"})]})]})}),document.body),i&&ae.createPortal(e.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:e.jsxs("div",{className:"modal-content",onClick:g=>g.stopPropagation(),style:{maxWidth:"400px",padding:"30px",textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--accent-color)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",boxShadow:"0 0 20px rgba(212, 160, 23, 0.4)"},children:e.jsx(F,{size:40,color:"white"})}),e.jsx("h3",{style:{fontSize:"1.6rem",marginBottom:"5px",fontWeight:"bold"},children:p?.nickname||"ëª¨í—˜ê°€"}),e.jsxs("p",{style:{color:"var(--accent-color)",marginBottom:"20px",fontSize:"0.9rem",fontWeight:"bold"},children:[p?.className||"Classless"," ",e.jsx("span",{style:{opacity:.5},children:"|"})," ",p?.role==="Admin"||p?.isAdmin?"ëŒ€ì¥ (ê´€ë¦¬ì)":"ëŒ€ì›"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"25px",textAlign:"left"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"12px"},children:[e.jsx("p",{style:{fontSize:"0.75rem",opacity:.6,marginBottom:"4px"},children:"ì§ì—…"}),e.jsx("p",{style:{fontWeight:"bold"},children:p?.className||"-"})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"12px"},children:[e.jsx("p",{style:{fontSize:"0.75rem",opacity:.6,marginBottom:"4px"},children:"ì‹ ë¶„"}),e.jsx("p",{style:{fontWeight:"bold"},children:p?.role==="Admin"||p?.isAdmin?"ê´€ë¦¬ì":"ì¼ë°˜ ëŒ€ì›"})]})]}),e.jsxs("button",{onClick:()=>{o(!1),r(!0)},style:{width:"100%",padding:"14px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},onMouseEnter:g=>g.currentTarget.style.background="rgba(255,255,255,0.2)",onMouseLeave:g=>g.currentTarget.style.background="rgba(255,255,255,0.1)",children:[e.jsx(me,{size:18}),"í”„ë¡œí•„ ìˆ˜ì •í•˜ê¸°"]})]})}),document.body),x&&ae.createPortal(e.jsx("div",{className:"modal-overlay",onClick:()=>r(!1),children:e.jsxs("div",{className:"modal-content",onClick:g=>g.stopPropagation(),style:{maxWidth:"400px",padding:"30px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[e.jsxs("h3",{style:{fontSize:"1.4rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(F,{size:24,color:"var(--accent-color)"}),"í”„ë¡œí•„ ìˆ˜ì •"]}),e.jsx("button",{onClick:()=>r(!1),style:{background:"transparent",color:"rgba(255,255,255,0.5)"},children:"x"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",opacity:.7,marginBottom:"6px"},children:"ë‹‰ë„¤ì„"}),e.jsx("input",{type:"text",value:A,onChange:g=>R(g.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",opacity:.7,marginBottom:"6px"},children:"ì§ì—… (Class)"}),e.jsx("select",{value:_,onChange:g=>E(g.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",outline:"none"},children:L.map(g=>e.jsx("option",{value:g,style:{background:"#1a1a2e"},children:g},g))})]}),e.jsx("button",{onClick:T,style:{marginTop:"10px",padding:"14px",borderRadius:"10px",background:"var(--accent-color)",color:"white",border:"none",fontWeight:"bold",fontSize:"1rem",cursor:"pointer"},children:"ì €ì¥í•˜ê¸°"})]})]})}),document.body)]})},re=({user:t,setActiveTab:a,isMobile:s})=>{const[p,n]=m.useState([]),[l,h]=m.useState(!0),[c,i]=m.useState(()=>{const x=localStorage.getItem("bg3_daily_goals");return x?JSON.parse(x):[{id:1,text:"ê¸´ íœ´ì‹ ì·¨í•˜ê¸° (ì£¼ë¬¸ ìŠ¬ë¡¯ ë³µêµ¬)",checked:!1},{id:2,text:"ì•¼ì˜ì§€ ë¬¼ì í™•ì¸",checked:!1},{id:3,text:"ìƒì¸ì—ê²Œ ì¡ë™ì‚¬ë‹ˆ íŒë§¤",checked:!1},{id:4,text:"ë™ë£Œ í˜¸ê°ë„ ëŒ€í™”",checked:!1}]});m.useEffect(()=>{localStorage.setItem("bg3_daily_goals",JSON.stringify(c))},[c]),m.useEffect(()=>{(async()=>{try{const r=H(B(b,"schedules"),de("date"),ce(2)),v=(await pe(r)).docs.map(f=>({id:f.id,...f.data()}));n(v)}catch(r){console.error(r)}finally{h(!1)}})()},[]);const o=({icon:x,title:r,desc:y,onClick:v,color:f})=>e.jsxs("div",{onClick:v,className:"glass-panel",style:{padding:"20px",cursor:"pointer",transition:"transform 0.2s",display:"flex",flexDirection:"column",gap:"10px"},onMouseEnter:j=>j.currentTarget.style.transform="translateY(-5px)",onMouseLeave:j=>j.currentTarget.style.transform="translateY(0)",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{padding:"10px",borderRadius:"12px",background:`rgba(${f}, 0.2)`},children:e.jsx(x,{color:`rgb(${f})`,size:24})}),e.jsx(_e,{size:16,style:{opacity:.5}})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"5px 0",fontSize:"1.1rem"},children:r}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6},children:y})]})]});return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:s?"15px":"30px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:s?"30px 20px":"40px",background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",textAlign:"center"},children:[s&&e.jsxs("div",{className:"logo-wrapper",style:{position:"relative",width:"180px",margin:"0 auto 20px"},children:[e.jsx("img",{src:U,alt:"BG3",style:{width:"100%"},onClick:()=>window.location.reload()}),e.jsx("div",{className:"logo-shine",style:{WebkitMaskImage:`url(${U})`,maskImage:`url(${U})`}})]}),e.jsxs("h1",{style:{fontSize:s?"1.5rem":"2rem",marginBottom:"10px",textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:["ì–´ì„œì˜¤ì„¸ìš”, ",e.jsx("span",{style:{color:"var(--accent-color)"},children:t?.nickname||"ëª¨í—˜ê°€"}),"ë‹˜"]}),e.jsxs("p",{style:{opacity:.8,maxWidth:"600px",margin:"0 auto",fontSize:s?"0.9rem":"1rem"},children:["ë°œë”ìŠ¤ ê²Œì´íŠ¸ ì›ì •ëŒ€ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ",e.jsx("br",{}),"ì˜¤ëŠ˜ì˜ ëª¨í—˜ì„ ì‹œì‘í•˜ê¸° ì „ì— ì¼ì •ì„ í™•ì¸í•˜ê³  íŒŒí‹°ì›ë“¤ê³¼ ì†Œí†µí•´ë³´ì„¸ìš”."]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:s?"10px":"20px"},children:[e.jsx(o,{icon:V,title:"ë ˆì´ë“œ ì¼ì •",desc:"ë‹¤ê°€ì˜¤ëŠ” ëª¨í—˜ í™•ì¸í•˜ê¸°",onClick:()=>a("calendar"),color:"248, 113, 113"}),e.jsx(o,{icon:we,title:"ì„¸ì´ë¸Œ ë¶„ì„",desc:"ë‚´ ìºë¦­í„° ìŠ¤í™ í™•ì¸",onClick:()=>a("save"),color:"167, 139, 250"}),e.jsx(o,{icon:be,title:"ì‘ì „ íšŒì˜ì‹¤",desc:"íŒŒí‹°ì›ë“¤ê³¼ ëŒ€í™”í•˜ê¸°",onClick:()=>a("chat"),color:"52, 211, 153"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"1fr 1fr",gap:s?"10px":"20px"},children:e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",margin:"0 0 20px"},children:[e.jsx(V,{size:18})," ë‹¤ê°€ì˜¤ëŠ” ì¼ì •"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:l?e.jsx("p",{style:{opacity:.5},children:"ë¡œë”© ì¤‘..."}):p.length===0?e.jsx("p",{style:{opacity:.5},children:"ì˜ˆì •ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."}):p.map(x=>e.jsxs("div",{style:{padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"5px 10px",background:"rgba(0,0,0,0.3)",borderRadius:"6px"},children:[e.jsxs("span",{style:{fontSize:"0.7rem",opacity:.7},children:[x.date?.split("-")[1],"ì›”"]}),e.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:x.date?.split("-")[2]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold"},children:x.title}),e.jsxs("div",{style:{fontSize:"0.8rem",opacity:.6},children:[x.time," â€¢ ",x.type==="raid"?"âš”ï¸ ë ˆì´ë“œ":"ğŸ“œ ìŠ¤í† ë¦¬"]})]})]},x.id))})]})})]})},ot=({user:t,isMobile:a})=>{const[s,p]=m.useState([]),[n,l]=m.useState(""),[h,c]=m.useState(null),[i,o]=m.useState(!0),x=m.useRef(null),r=m.useRef(null);m.useEffect(()=>{if(!t?.campId)return;const f=H(B(b,"chats"),$("campId","==",t.campId),ce(50)),j=K(f,A=>{const R=A.docs.map(_=>({id:_.id,..._.data(),timestamp:_.data().timestamp?.toDate().toISOString()||new Date().toISOString()}));R.sort((_,E)=>new Date(_.timestamp)-new Date(E.timestamp)),p(R),o(!1)});return()=>j()},[t?.campId]),m.useEffect(()=>{x.current?.scrollIntoView({behavior:"smooth"})},[s]);const y=f=>{const j=f.target.files[0];if(j){if(j.size>500*1024){alert("ì´ë¯¸ì§€ í¬ê¸°ëŠ” 500KB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");return}const A=new FileReader;A.onloadend=()=>{c(A.result)},A.readAsDataURL(j)}},v=async f=>{if(f.preventDefault(),!n.trim()&&!h||!t?.campId)return;const j=n,A=h;l(""),c(null);try{await Z(B(b,"chats"),{text:j,image:A,sender:t.nickname,uid:t.id,userClass:t.className||"Unknown",campId:t.campId,timestamp:ge()})}catch(R){console.error("Error sending message: ",R),alert("ì „ì†¡ ì‹¤íŒ¨!")}};return t?.campId?e.jsxs("div",{style:{display:"flex",flexDirection:"column",padding:0,position:a?"fixed":"absolute",top:a?"env(safe-area-inset-top)":0,left:0,right:0,bottom:a?"calc(65px + env(safe-area-inset-bottom))":0,background:a?"rgba(20, 20, 30, 0.95)":"transparent",zIndex:50},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Ee,{color:"#4fd1c5"})," íŒŒí‹° ì‘ì „ íšŒì˜ì‹¤"]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:["ğŸ”’ ",t.campId," ì•¼ì˜ì§€ (ë³´ì•ˆ ì—°ê²°ë¨)"]})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[i&&e.jsx("div",{style:{textAlign:"center",opacity:.5},children:"ì±„íŒ…ë°© ì—°ê²° ì¤‘..."}),s.length===0&&!i&&e.jsxs("div",{style:{textAlign:"center",opacity:.3,marginTop:"20px"},children:[e.jsx("p",{children:"ì•„ì§ ëŒ€í™”ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("p",{children:"ì‘ì „ì„ ì‹œì‘í•´ë³´ì„¸ìš”!"})]}),s.map(f=>{const j=f.uid===t.id;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:j?"flex-end":"flex-start"},children:[e.jsx("div",{style:{fontSize:"0.8rem",marginBottom:"4px",opacity:.7,display:"flex",alignItems:"center",gap:"4px"},children:!j&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["[",f.userClass,"]"]}),f.sender]})}),e.jsxs("div",{style:{background:j?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"rgba(255, 255, 255, 0.1)",padding:"12px 16px",borderRadius:j?"16px 16px 0 16px":"16px 16px 16px 0",maxWidth:"70%",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255,255,255,0.1)",wordBreak:"break-word"},children:[f.image&&e.jsx("img",{src:f.image,alt:"attached",style:{maxWidth:"100%",borderRadius:"8px",marginBottom:f.text?"10px":"0"}}),f.text]}),e.jsx("span",{style:{fontSize:"0.7rem",opacity:.4,marginTop:"4px"},children:new Date(f.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},f.id)}),e.jsx("div",{ref:x})]}),e.jsxs("form",{onSubmit:v,style:{padding:"20px",background:"rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",gap:"10px",borderRadius:"0 0 16px 16px"},children:[h&&e.jsxs("div",{style:{position:"relative",width:"fit-content"},children:[e.jsx("img",{src:h,alt:"Preview",style:{height:"80px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)"}}),e.jsx("button",{type:"button",onClick:()=>c(null),style:{position:"absolute",top:-5,right:-5,background:"red",borderRadius:"50%",border:"none",color:"white",padding:"2px",cursor:"pointer"},children:e.jsx(xe,{size:12})})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"file",accept:"image/*",ref:r,style:{display:"none"},onChange:y}),e.jsx("button",{type:"button",onClick:()=>r.current.click(),style:{padding:"12px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer"},children:e.jsx(ke,{size:20})}),e.jsx("input",{type:"text",value:n,onChange:f=>l(f.target.value),placeholder:"ì‘ì „ì„ ì „ë‹¬í•˜ì„¸ìš”...",style:{flex:1,padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"white",outline:"none"}}),e.jsx("button",{type:"submit",style:{padding:"12px",borderRadius:"12px",background:"var(--accent-color)",color:"white",border:"none",cursor:"pointer"},children:e.jsx(Ne,{size:20})})]})]})]}):e.jsx("div",{className:"glass-panel",style:{padding:"40px",textAlign:"center"},children:"ì•¼ì˜ì§€ì— ì†Œì†ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤."})},lt=({user:t,isMobile:a})=>{const[s,p]=m.useState(new Date),[n,l]=m.useState([]),[h,c]=m.useState([]),[i,o]=m.useState(!0),x=s.toLocaleDateString("en-CA");m.useEffect(()=>{if(!t?.campId){o(!1);return}const u=H(B(b,"availabilities"),$("campId","==",t.campId)),w=H(B(b,"schedules"),$("campId","==",t.campId),$("type","==","fixed")),k=K(u,T=>{const L=T.docs.map(P=>({id:P.id,...P.data()}));l(L)}),I=K(w,T=>{const L=T.docs.map(P=>({id:P.id,...P.data()}));c(L),o(!1)});return()=>{k(),I()}},[t?.campId]);const y=n.find(u=>u.userId===t.id&&u.date===x)?.possibleTimes||[],v=m.useMemo(()=>{const u={};return n.filter(k=>k.date===x).forEach(k=>{k.possibleTimes?.forEach(I=>{u[I]||(u[I]=[]),u[I].push(k.nickname)})}),u},[n,x]),f=h.find(u=>u.date===x),j=async u=>{if(!t.campId)return;const w=y.includes(u)?y.filter(T=>T!==u):[...y,u].sort(),k=`${t.campId}_${t.id}_${x}`,I=N(b,"availabilities",k);await Y(I,{campId:t.campId,userId:t.id,nickname:t.nickname,date:x,possibleTimes:w})},A=async u=>{if(window.confirm(`${s.toLocaleDateString()} ${u}ì— ë ˆì´ë“œë¥¼ í™•ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))try{await Z(B(b,"schedules"),{campId:t.campId,title:"ì •ê¸° ë ˆì´ë“œ",date:x,fixedTime:u,type:"fixed",creator:t.nickname,createdAt:new Date().toISOString()}),alert("ë ˆì´ë“œê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤! íŒŒí‹°ì›ë“¤ì—ê²Œ ì•Œë¦½ë‹ˆë‹¤.")}catch(w){console.error(w),alert("ì˜¤ë¥˜ ë°œìƒ: "+w.message)}},R=async u=>{window.confirm("ì •ë§ ì´ ë ˆì´ë“œ ì¼ì •ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await ee(N(b,"schedules",u))},_=["18:00","19:00","20:00","21:00","22:00","23:00","00:00","01:00","02:00"],E=({date:u,view:w})=>{if(w==="month"){const k=u.toLocaleDateString("en-CA");if(h.some(L=>L.date===k))return e.jsx("div",{style:{height:"6px",width:"6px",background:"#f87171",borderRadius:"50%",margin:"2px auto"}});if(n.some(L=>L.date===k))return e.jsx("div",{style:{height:"4px",width:"4px",background:"rgba(255,255,255,0.3)",borderRadius:"50%",margin:"2px auto"}})}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:a?"15px":"20px"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px",color:"white",margin:"0 0 20px",fontSize:a?"1.2rem":"1.5rem"},children:[e.jsx(V,{className:"text-accent"})," ë ˆì´ë“œ ì¼ì • (Raid Scheduler)"]}),e.jsx("style",{children:`
                    .react-calendar { background: transparent !important; border: none !important; width: 100% !important; color: white !important; font-family: inherit; }
                    .react-calendar__navigation button { color: white; min-width: 44px; background: none; font-size: ${a?"1rem":"1.2rem"}; }
                    .react-calendar__navigation button:enabled:hover, .react-calendar__navigation button:enabled:focus { background-color: rgba(255,255,255,0.1); }
                    .react-calendar__month-view__weekdays { text-align: center; text-transform: uppercase; font-weight: bold; font-size: 0.8em; opacity: 0.7; color: var(--accent-color); }
                    .react-calendar__month-view__days__day { color: white; padding: ${a?"10px":"15px"}; background: transparent; border: none; }
                    .react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background-color: rgba(255,255,255,0.1); border-radius: 12px; }
                    .react-calendar__tile--now { background: rgba(255,255,255,0.1) !important; border-radius: 12px; }
                    .react-calendar__tile--active { background: var(--accent-color) !important; color: white !important; border-radius: 12px; }
                `}),e.jsx(Be,{onChange:p,value:s,tileContent:E,formatDay:(u,w)=>w.getDate()})]}),f?e.jsxs("div",{className:"glass-panel",style:{padding:"25px",background:"linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.05))",border:"1px solid rgba(239, 68, 68, 0.3)",textAlign:"center"},children:[e.jsxs("h3",{style:{fontSize:"1.4rem",color:"#fca5a5",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(We,{})," ë ˆì´ë“œ í™•ì •ë¨"]}),e.jsx("p",{style:{fontSize:"2rem",fontWeight:"bold",margin:"10px 0"},children:f.fixedTime}),e.jsx("p",{style:{opacity:.8},children:"ëª¨ë“  ëŒ€ì›ì€ í•´ë‹¹ ì‹œê°„ì— ì•¼ì˜ì§€ë¡œ ì§‘ê²°í•˜ì‹­ì‹œì˜¤."}),(t.isAdmin||t.role==="Admin")&&e.jsx("button",{onClick:()=>R(f.id),style:{marginTop:"20px",padding:"10px 20px",borderRadius:"8px",background:"rgba(0,0,0,0.3)",color:"#fca5a5",border:"1px solid rgba(239,68,68,0.5)",cursor:"pointer"},children:"ì¼ì • ì·¨ì†Œí•˜ê¸°"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-panel",style:{padding:a?"15px":"20px"},children:[e.jsxs("h3",{style:{margin:"0 0 15px",display:"flex",alignItems:"center",gap:"8px",fontSize:"1.1rem"},children:[e.jsx(Te,{size:18,color:"var(--accent-color)"}),"ë‚˜ì˜ ê°€ëŠ¥ ì‹œê°„ (",s.toLocaleDateString(),")"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:_.map(u=>{const w=y.includes(u);return e.jsx("button",{onClick:()=>j(u),style:{padding:"10px 16px",borderRadius:"12px",border:"none",cursor:"pointer",background:w?"var(--accent-color)":"rgba(255,255,255,0.05)",color:w?"white":"rgba(255,255,255,0.6)",fontWeight:w?"bold":"normal",transition:"all 0.2s",flexGrow:a?1:0},children:u},u)})})]}),e.jsxs("div",{className:"glass-panel",style:{padding:a?"15px":"20px"},children:[e.jsxs("h3",{style:{margin:"0 0 15px",display:"flex",alignItems:"center",gap:"8px",fontSize:"1.1rem"},children:[e.jsx(F,{size:18,color:"#a78bfa"}),"íŒŒí‹° í˜„í™© (Team Status)"]}),Object.keys(v).length===0?e.jsx("p",{style:{opacity:.5,textAlign:"center",padding:"20px"},children:"ì•„ì§ ë“±ë¡ëœ ê°€ëŠ¥ ì‹œê°„ì´ ì—†ìŠµë‹ˆë‹¤."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Object.entries(v).sort((u,w)=>w[1].length-u[1].length||u[0].localeCompare(w[0])).map(([u,w])=>{const k=w.length,I=k>=3;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderRadius:"12px",background:I?"rgba(167, 139, 250, 0.15)":"rgba(255,255,255,0.03)",border:I?"1px solid rgba(167, 139, 250, 0.3)":"1px solid transparent"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem",color:I?"#a78bfa":"white"},children:u}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(F,{size:14,style:{opacity:.7}}),e.jsxs("span",{style:{fontSize:"0.9rem",opacity:.9},children:[k,"ëª… ê°€ëŠ¥"]}),e.jsxs("span",{style:{fontSize:"0.75rem",opacity:.5},children:["(",w.join(", "),")"]})]})]}),(t.isAdmin||t.role==="Admin")&&e.jsxs("button",{onClick:()=>A(u),style:{padding:"6px 12px",borderRadius:"8px",border:"none",background:"linear-gradient(45deg, #f87171, #ef4444)",color:"white",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.8rem"},children:[e.jsx(X,{size:12,fill:"white"})," í™•ì •"]})]},u)})})]})]})]})},dt=({user:t})=>{const[a,s]=m.useState([]),[p,n]=m.useState(!0);m.useEffect(()=>{if(!t?.campId)return;const i=H(B(b,"save_reports_v2"),$("campId","==",t.campId),de("createdAt","desc"),ce(10)),o=K(i,x=>{const r=x.docs.map(y=>({id:y.id,...y.data()}));s(r),n(!1)});return()=>o()},[t?.campId]);const l=async i=>{confirm("ì´ ë¶„ì„ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await ee(N(b,"save_reports_v2",i))},h=({label:i,value:o,color:x})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx("span",{style:{width:"40px",fontWeight:"bold",fontSize:"0.8rem",color:"rgba(255,255,255,0.7)"},children:i}),e.jsx("div",{style:{flex:1,height:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${o/20*100}%`,height:"100%",background:x,transition:"width 0.5s"}})}),e.jsx("span",{style:{width:"25px",textAlign:"right",fontWeight:"bold"},children:o})]}),c=i=>{const o=i.target.files[0];o&&(n(!0),setTimeout(async()=>{const x={STR:Math.floor(Math.random()*10)+10,DEX:Math.floor(Math.random()*10)+10,CON:Math.floor(Math.random()*10)+10,INT:Math.floor(Math.random()*10)+10,WIS:Math.floor(Math.random()*10)+10,CHA:Math.floor(Math.random()*10)+10},r={filename:o.name,stats:x,meta:{mode:"Honour Mode (Detected)",version:"4.1.1.4",size:(o.size/1024/1024).toFixed(2)+" MB"},companions:[{name:"Shadowheart",img:"ğŸŒ™"},{name:"Astarion",img:"ğŸ§›"}],logs:["[Client] File loaded locally","[Parser] Header verified (LSOF v4)","[Analysis] Stats extracted successfully"],uploader:t.nickname,campId:t.campId,createdAt:ge()};try{await Z(B(b,"save_reports_v2"),r),alert("ë¶„ì„ ì™„ë£Œ!")}catch(y){console.error(y),alert("ì—…ë¡œë“œ ì‹¤íŒ¨")}finally{n(!1)}},1500))};return e.jsxs("div",{style:{padding:"0 0 80px"},children:[e.jsxs("div",{className:"glass-panel",style:{marginBottom:"20px",textAlign:"center",border:"1px solid var(--accent-color)"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(Le,{color:"#a78bfa"})," ì„¸ì´ë¸Œ íŒŒì¼ ë¶„ì„ê¸°"]}),e.jsx("p",{style:{opacity:.8,fontSize:"0.9rem",maxWidth:"600px",margin:"0 auto 20px"},children:"ì„¸ì´ë¸Œ íŒŒì¼(.lsv)ì„ ì—…ë¡œë“œí•˜ì—¬ ìºë¦­í„° ëŠ¥ë ¥ì¹˜ì™€ ì§„í–‰ ìƒí™©ì„ ë¶„ì„í•˜ì„¸ìš”."}),e.jsxs("div",{style:{position:"relative",overflow:"hidden",display:"inline-block"},children:[e.jsxs("button",{style:{background:"var(--accent-color)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(se,{size:18})," íŒŒì¼ ì„ íƒ ë° ë¶„ì„"]}),e.jsx("input",{type:"file",accept:".lsv,.save",onChange:c,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:p?e.jsxs("div",{className:"glass-panel",style:{textAlign:"center",padding:"40px"},children:[e.jsx(Se,{size:32,className:"spin",style:{marginBottom:"15px",color:"var(--accent-color)"}}),e.jsx("p",{children:"ì„¸ì´ë¸Œ íŒŒì¼ ë¶„ì„ ì¤‘..."})]}):a.length===0?e.jsxs("div",{className:"glass-panel",style:{textAlign:"center",padding:"40px"},children:[e.jsx(se,{size:48,style:{opacity:.3,marginBottom:"20px"}}),e.jsx("p",{children:"ë¶„ì„ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})]}):a.map(i=>e.jsxs("div",{className:"glass-panel",style:{position:"relative",animation:"fadeIn 0.5s"},children:[e.jsx("button",{onClick:()=>l(i.id),style:{position:"absolute",top:"15px",right:"15px",background:"transparent",border:"none",color:"#f87171",cursor:"pointer"},children:e.jsx(Ce,{size:16})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"10px"},children:[e.jsx(se,{size:20,color:"var(--accent-color)"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:i.filename}),e.jsxs("span",{style:{fontSize:"0.8rem",opacity:.5},children:[new Date(i.createdAt?.toDate?i.createdAt.toDate():i.createdAt).toLocaleString()," â€¢ ",i.uploader]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px"},children:[e.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem"},children:[e.jsx(we,{size:14})," ëŠ¥ë ¥ì¹˜ (Stats)"]}),i.stats?e.jsxs(e.Fragment,{children:[e.jsx(h,{label:"STR",value:i.stats.STR,color:"#fca5a5"}),e.jsx(h,{label:"DEX",value:i.stats.DEX,color:"#86efac"}),e.jsx(h,{label:"CON",value:i.stats.CON,color:"#fbbf24"}),e.jsx(h,{label:"INT",value:i.stats.INT,color:"#93c5fd"}),e.jsx(h,{label:"WIS",value:i.stats.WIS,color:"#d8b4fe"}),e.jsx(h,{label:"CHA",value:i.stats.CHA,color:"#f472b6"})]}):e.jsx("p",{style:{fontSize:"0.8rem",opacity:.5},children:"ë°ì´í„° ì—†ìŒ"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px",flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem"},children:[e.jsx(Q,{size:14})," ë©”íƒ€ ì •ë³´"]}),e.jsxs("div",{style:{fontSize:"0.8rem",display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsxs("p",{style:{margin:0},children:["ğŸ“‚ ëª¨ë“œ: ",i.meta?.mode||"Unknown"]}),e.jsxs("p",{style:{margin:0},children:["ğŸ’¾ ë²„ì „: ",i.meta?.version||"Unknown"]}),e.jsxs("p",{style:{margin:0},children:["ğŸ“¦ í¬ê¸°: ",i.meta?.size||"Unknown"]})]})]}),i.companions&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"12px"},children:[e.jsx("h4",{style:{margin:"0 0 5px",fontSize:"0.8rem",opacity:.8},children:"í•¨ê»˜í•˜ëŠ” ë™ë£Œ"}),e.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:i.companions.map((o,x)=>e.jsxs("span",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:"4px",fontSize:"0.7rem"},children:[o.img," ",o.name]},x))})]})]})]})]},i.id))})]})},Ie=[{id:"barbarian",name:"ë°”ë°”ë¦¬ì•ˆ",icon:Pe,color:"#fca5a5"},{id:"bard",name:"ë°”ë“œ",icon:Oe,color:"#f9a8d4"},{id:"cleric",name:"í´ë ˆë¦­",icon:Me,color:"#d1d5db"},{id:"druid",name:"ë“œë£¨ì´ë“œ",icon:Fe,color:"#bef264"},{id:"fighter",name:"íŒŒì´í„°",icon:Q,color:"#93c5fd"},{id:"monk",name:"ëª½í¬",icon:$e,color:"#7dd3fc"},{id:"paladin",name:"íŒ”ë¼ë”˜",icon:Q,color:"#fbbf24"},{id:"ranger",name:"ë ˆì¸ì €",icon:Ue,color:"#86efac"},{id:"rogue",name:"ë¡œê·¸",icon:He,color:"#cbd5e1"},{id:"sorcerer",name:"ì†Œì„œëŸ¬",icon:qe,color:"#c084fc"},{id:"warlock",name:"ì›Œë½",icon:Je,color:"#e879f9"},{id:"wizard",name:"ìœ„ìë“œ",icon:Ke,color:"#818cf8"}],M={width:"100%",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.2)",color:"white",marginBottom:"12px",fontSize:"1rem",transition:"border-color 0.2s, background 0.2s"},J={width:"100%",padding:"16px",borderRadius:"12px",border:"none",fontWeight:"bold",fontSize:"1.05rem",marginTop:"0",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},fe=({selected:t,onSelect:a})=>e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",maxHeight:"200px",overflowY:"auto",margin:"20px 0",padding:"5px"},children:Ie.map(s=>e.jsxs("button",{onClick:()=>a(s),type:"button",style:{padding:"12px 8px",borderRadius:"12px",border:t?.id===s.id?`2px solid ${s.color}`:"1px solid rgba(255,255,255,0.05)",background:t?.id===s.id?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.2)",color:"white",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",transition:"all 0.2s",cursor:"pointer",transform:t?.id===s.id?"scale(1.05)":"scale(1)"},children:[e.jsx(s.icon,{size:24,color:s.color}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:t?.id===s.id?"bold":"normal"},children:s.name})]},s.id))}),ie=({children:t,title:a,sub:s,onClose:p,error:n})=>e.jsx("div",{className:"modal-overlay",onClick:p,children:e.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[e.jsx("button",{onClick:p,style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",cursor:"pointer",zIndex:10},children:e.jsx(xe,{size:18})}),e.jsxs("div",{style:{padding:"30px 20px",textAlign:"center"},children:[a&&e.jsx("h2",{style:{fontSize:"2rem",marginBottom:"8px",fontWeight:"800",background:"linear-gradient(to right, #fff, #aaa)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:a}),s&&e.jsx("p",{style:{opacity:.7,fontSize:"0.95rem",marginBottom:"30px"},children:s}),t,n&&e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.2)",color:"#fca5a5",padding:"12px",borderRadius:"10px",marginTop:"20px",fontSize:"0.9rem",border:"1px solid rgba(239, 68, 68, 0.3)"},children:["âš ï¸ ",n]})]})]})}),ye=({onComplete:t,initialData:a,isMobile:s})=>{const[p,n]=m.useState(a?"profile_view":"landing"),[l,h]=m.useState(a?.nickname||""),[c,i]=m.useState(""),[o,x]=m.useState(a?Ie.find(d=>d.name===a.className):null),[r,y]=m.useState(""),[v,f]=m.useState(""),[j,A]=m.useState([]),[R,_]=m.useState(null),[E,u]=m.useState(!1),[w,k]=m.useState("");m.useEffect(()=>{a&&n("profile_view")},[a]);const I=()=>{h(""),i(""),x(null),y(""),f(""),_(null),k(""),A([])},T=()=>{k(""),n("landing")};m.useEffect(()=>{p==="join_camp"&&L()},[p]);const L=async()=>{u(!0);try{console.log("[Profile] Fetching active camps...");const S=(await pe(B(b,"camps"))).docs.map(z=>({id:z.id,...z.data()}));A(S),console.log("[Profile] Camps found:",S.length)}catch(d){console.error("[Profile] Error fetching camps:",d),k("ì˜ì§€ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{u(!1)}},P=async d=>{d.preventDefault(),u(!0),k("");try{console.log("[Auth] Attempting login for:",l);const S=await G(N(b,"users_v2",l));if(!S.exists())throw new Error("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ëª¨í—˜ê°€ì…ë‹ˆë‹¤.");const z=S.data();if(z.password!==c)throw new Error("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");if(console.log("[Auth] Login successful:",z),z.campId)try{await oe(N(b,"camps",z.campId),{members:he(l)})}catch(D){console.error("[Auth] Failed to update camp member list:",D)}localStorage.setItem("bg3_user_profile",JSON.stringify(z)),t(z)}catch(S){console.error("[Auth] Login failed:",S),k(S.message)}finally{u(!1)}},te=async()=>{if(!l||!c||!o||!r||!v){k("ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}u(!0);try{console.log("[Camp] Creating new camp:",r);const d=N(b,"users_v2",l);if((await G(d)).exists())throw new Error("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.");const z=r.trim(),D=N(b,"camps",z);if((await G(D)).exists())throw new Error("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì˜ì§€ ì´ë¦„ì…ë‹ˆë‹¤.");const O={id:l,nickname:l,password:c,className:o.name,classId:o.id,isAdmin:!0,campId:z,createdAt:new Date().toISOString()},ne={id:z,name:r,password:v,leaderId:l,members:[l],createdAt:new Date().toISOString()};await Y(d,O),await Y(D,ne),console.log("[Camp] Camp and Admin created successfully"),localStorage.setItem("bg3_user_profile",JSON.stringify(O)),t(O)}catch(d){console.error("[Camp] Creation failed:",d),k(d.message)}finally{u(!1)}},g=async()=>{if(!l||!c||!o||!R||!v){k("ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}u(!0);try{console.log("[Camp] Joining camp:",R);const d=N(b,"users_v2",l);if((await G(d)).exists())throw new Error("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë‹‰ë„¤ì„ì…ë‹ˆë‹¤. (ë¡œê·¸ì¸ í•˜ì„¸ìš”)");const z=N(b,"camps",R),D=await G(z);if(!D.exists())throw new Error("ì˜ì§€ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");const q=D.data();if(q.password!==v)throw new Error("ì˜ì§€ ì…ì¥ ì•”í˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");if(q.members&&q.members.length>=4)throw new Error("ì˜ì§€ ì •ì›ì´ ê½‰ ì°¼ìŠµë‹ˆë‹¤. (ìµœëŒ€ 4ëª…)");const O={id:l,nickname:l,password:c,className:o.name,classId:o.id,isAdmin:!1,campId:R,createdAt:new Date().toISOString()};await Y(d,O),await oe(z,{members:he(l)}),console.log("[Camp] Joined successfully"),localStorage.setItem("bg3_user_profile",JSON.stringify(O)),t(O)}catch(d){console.error("[Camp] Join failed:",d),k(d.message)}finally{u(!1)}},C=()=>{confirm("ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(localStorage.removeItem("bg3_user_profile"),t(null),n("landing"),I())};return p==="profile_view"&&a?e.jsxs("div",{className:"glass-panel",style:{maxWidth:"450px",margin:"40px auto",padding:"40px",textAlign:"center"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:o?.color||"gray",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 0 30px ${o?.color||"gray"}`},children:o&&e.jsx(o.icon,{size:50,color:"white"})}),e.jsx("h3",{style:{fontSize:"1.8rem",margin:"0 0 8px",fontWeight:"bold"},children:a.nickname}),e.jsx("span",{style:{fontSize:"0.95rem",opacity:.8,background:"rgba(255,255,255,0.1)",padding:"6px 12px",borderRadius:"20px"},children:a.className})]}),e.jsxs("div",{style:{textAlign:"left",background:"rgba(0,0,0,0.2)",padding:"25px",borderRadius:"16px"},children:[e.jsxs("p",{style:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"15px",marginBottom:"15px"},children:[e.jsx("span",{style:{opacity:.6},children:"ì†Œì† ì•¼ì˜ì§€"}),e.jsx("b",{style:{fontSize:"1.1rem"},children:a.campId})]}),e.jsxs("p",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{opacity:.6},children:"ì§ì±…"}),e.jsx("b",{style:{color:a.isAdmin?"#f87171":"#4ade80"},children:a.isAdmin?"ì˜ì£¼ (Leader)":"ëŒ€ì› (Member)"})]})]}),e.jsxs("button",{onClick:C,style:{...J,background:"rgba(248, 113, 113, 0.1)",border:"1px solid rgba(248, 113, 113, 0.3)",color:"#f87171",marginTop:"40px"},children:[e.jsx(ve,{size:20}),"ë¡œê·¸ì•„ì›ƒ"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsx("div",{className:"glass-panel",style:{maxWidth:"1000px",width:"100%",padding:s?"30px 20px":"60px 60px",textAlign:"center",minHeight:s?"auto":"550px",display:"flex",alignItems:"center",justifyContent:"center",margin:0},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",justifyContent:"center",gap:s?"20px":"60px",width:"100%"},children:[e.jsx("div",{style:{flex:"1 1 300px",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:e.jsxs("div",{className:"logo-wrapper",style:{position:"relative",maxWidth:s?"240px":"420px",width:"100%"},children:[e.jsx("img",{src:U,alt:"Logo",onClick:()=>window.location.reload(),title:"ìƒˆë¡œê³ ì¹¨",style:{width:"100%",cursor:"pointer",transition:"transform 0.3s ease",display:"block"},onMouseOver:d=>d.currentTarget.style.transform="scale(1.03)",onMouseOut:d=>d.currentTarget.style.transform="scale(1)"}),e.jsx("div",{className:"logo-shine",style:{WebkitMaskImage:`url(${U})`,maskImage:`url(${U})`}})]})}),e.jsxs("div",{style:{flex:"1 1 300px",display:"flex",flexDirection:"column",gap:"20px",maxWidth:"350px",width:"100%"},children:[e.jsxs("button",{onClick:()=>{I(),n("login")},style:{...J,background:"rgba(255,255,255,0.08)",color:"white",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(Ge,{size:20}),"ê¸°ì¡´ ëª¨í—˜ê°€ ë¡œê·¸ì¸"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",opacity:.3,fontSize:"0.8rem"},children:[e.jsx("div",{style:{flex:1,height:"1px",background:"white"}}),e.jsx("span",{children:"OR"}),e.jsx("div",{style:{flex:1,height:"1px",background:"white"}})]}),e.jsxs("button",{onClick:()=>{I(),n("join_camp")},style:{...J,background:"linear-gradient(45deg, #7c3aed, #db2777)",color:"white",boxShadow:"0 4px 15px rgba(124, 58, 237, 0.3)"},children:[e.jsx(F,{size:20}),"ì•¼ì˜ì§€ í•©ë¥˜í•˜ê¸° (ì¼ë°˜)"]}),e.jsxs("button",{onClick:()=>{I(),n("create_camp")},style:{...J,background:"linear-gradient(45deg, #ef4444, #f97316)",color:"white",boxShadow:"0 4px 15px rgba(239, 68, 68, 0.3)"},children:[e.jsx(X,{size:20}),"ìƒˆ ì•¼ì˜ì§€ ê±´ì„¤ (ê´€ë¦¬ì)"]}),e.jsxs("p",{style:{marginTop:"10px",opacity:.8,fontSize:s?"0.75rem":"0.9rem",lineHeight:"1.5",fontWeight:"400",textAlign:"center",color:"rgba(255,255,255,0.7)"},children:["ë™ë£Œë“¤ê³¼ í•¨ê»˜ ë‚˜ë§Œì˜ ì´ì•¼ê¸°ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.",e.jsx("br",{}),e.jsx("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ 3 ì›ì •ëŒ€"}),"ë¥¼ ìœ„í•œ",e.jsx("br",{}),"í•„ìˆ˜ ì»´íŒ¨ë‹ˆì–¸ ì•±"]})]})]})})}),p==="login"&&e.jsx(ie,{title:"ë¡œê·¸ì¸",sub:"ë‹¤ì‹œ ì˜¤ì…¨êµ°ìš”, ëª¨í—˜ê°€ë‹˜.",onClose:T,error:w,children:e.jsxs("form",{onSubmit:P,children:[e.jsx("input",{type:"text",placeholder:"ë‹‰ë„¤ì„",value:l,onChange:d=>h(d.target.value),style:M}),e.jsx("input",{type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",value:c,onChange:d=>i(d.target.value),style:M}),e.jsx("button",{type:"submit",style:{...J,background:"white",color:"black",marginTop:"20px"},disabled:E,children:E?"ì¸ì¦ í™•ì¸ ì¤‘...":"ì•¼ì˜ì§€ ì…ì¥"})]})}),p==="create_camp"&&e.jsxs(ie,{title:"ì•¼ì˜ì§€ ê±´ì„¤",sub:"ë‹¹ì‹ ë§Œì˜ íŒŒí‹°ë¥¼ ì´ëŒì–´ë³´ì„¸ìš”.",onClose:T,error:w,children:[e.jsxs("div",{style:{textAlign:"left",marginBottom:"20px"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"10px",marginBottom:"15px"},children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"#fca5a5",fontWeight:"bold",display:"block",marginBottom:"8px"},children:"ê´€ë¦¬ì(ì˜ì£¼) ì •ë³´"}),e.jsx("input",{type:"text",placeholder:"ì˜ì£¼ ë‹‰ë„¤ì„",value:l,onChange:d=>h(d.target.value),style:M}),e.jsx("input",{type:"password",placeholder:"ê°œì¸ ë¹„ë°€ë²ˆí˜¸",value:c,onChange:d=>i(d.target.value),style:{...M,marginBottom:0}})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"10px",marginBottom:"15px"},children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"#c4b5fd",fontWeight:"bold",display:"block",marginBottom:"8px"},children:"ì˜ì§€(Room) ì„¤ì •"}),e.jsx("input",{type:"text",placeholder:"ì•¼ì˜ì§€ ì´ë¦„ (IDë¡œ ì‚¬ìš©ë¨)",value:r,onChange:d=>y(d.target.value),style:M}),e.jsx("input",{type:"text",placeholder:"ì˜ì§€ ì…ì¥ ì•”í˜¸ (íŒ€ì› ê³µìœ ìš©)",value:v,onChange:d=>f(d.target.value),style:{...M,borderColor:"#818cf8",color:"#818cf8",marginBottom:0}})]}),e.jsx("label",{style:{fontSize:"0.9rem",color:"white",opacity:.8,marginTop:"5px",display:"block"},children:"ë‚˜ì˜ ì§ì—… ì„ íƒ"}),e.jsx(fe,{selected:o,onSelect:x})]}),e.jsx("button",{onClick:te,style:{...J,background:"#ef4444",color:"white"},disabled:E,children:E?"ì˜í†  ì„ í¬ ì¤‘...":"ê±´ì„¤ ì™„ë£Œ ë° ì…ì¥"})]}),p==="join_camp"&&e.jsxs(ie,{title:"ì•¼ì˜ì§€ í•©ë¥˜",sub:"ë™ë£Œë“¤ì´ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.",onClose:T,error:w,children:[e.jsxs("div",{style:{textAlign:"left",marginBottom:"20px"},children:[!R&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("span",{style:{opacity:.7,fontSize:"0.9rem"},children:"ì°¸ì—¬ ê°€ëŠ¥í•œ ì˜ì§€"}),e.jsxs("button",{onClick:L,style:{background:"none",border:"none",color:"var(--accent-color)",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Se,{size:12})," ëª©ë¡ ê°±ì‹ "]})]}),e.jsx("div",{style:{maxHeight:"250px",overflowY:"auto",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:"10px",background:"rgba(0,0,0,0.2)"},children:E&&j.length===0?e.jsx("p",{style:{textAlign:"center",opacity:.5,padding:"20px"},children:"íƒìƒ‰ ì¤‘..."}):j.length===0?e.jsx("p",{style:{textAlign:"center",opacity:.5,padding:"20px"},children:"í™œì„±í™”ëœ ì˜ì§€ê°€ ì—†ìŠµë‹ˆë‹¤."}):j.map(d=>e.jsxs("div",{onClick:()=>_(d.id),style:{padding:"16px",marginBottom:"8px",borderRadius:"10px",cursor:"pointer",background:"rgba(255,255,255,0.05)",border:"1px solid transparent",transition:"all 0.2s",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseOver:S=>{S.currentTarget.style.background="rgba(255,255,255,0.1)",S.currentTarget.style.borderColor="rgba(255,255,255,0.2)"},onMouseOut:S=>{S.currentTarget.style.background="rgba(255,255,255,0.05)",S.currentTarget.style.borderColor="transparent"},children:[e.jsxs("span",{style:{fontWeight:"bold"},children:["ğŸ° ",d.name]}),e.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7,background:"rgba(0,0,0,0.3)",padding:"4px 8px",borderRadius:"4px"},children:[d.members?.length||0,"/4ëª…"]})]},d.id))})]}),R&&e.jsxs("div",{style:{animation:"fadeIn 0.3s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("button",{onClick:()=>_(null),style:{background:"none",border:"none",color:"white",opacity:.5,cursor:"pointer"},children:"â†"}),e.jsx("h3",{style:{margin:0,fontSize:"1.2rem"},children:j.find(d=>d.id===R)?.name})]}),e.jsx("input",{type:"text",placeholder:"ì˜ì§€ ì…ì¥ ì•”í˜¸",value:v,onChange:d=>f(d.target.value),style:{...M,borderColor:"#818cf8",color:"#818cf8"}}),e.jsx("div",{style:{height:"10px"}}),e.jsx("input",{type:"text",placeholder:"ë‚´ ë‹‰ë„¤ì„",value:l,onChange:d=>h(d.target.value),style:M}),e.jsx("input",{type:"password",placeholder:"ë‚´ ë¹„ë°€ë²ˆí˜¸",value:c,onChange:d=>i(d.target.value),style:M}),e.jsx("label",{style:{fontSize:"0.9rem",color:"white",opacity:.8,marginTop:"15px",display:"block"},children:"ë‚˜ì˜ ì§ì—… ì„ íƒ"}),e.jsx(fe,{selected:o,onSelect:x})]})]}),R&&e.jsx("button",{onClick:g,style:{...J,background:"var(--accent-color)",color:"white"},disabled:E,children:E?"ì…ì¥ ì¤‘...":"í•©ë¥˜í•˜ê¸°"})]})]})},ct=({user:t})=>{const[a,s]=m.useState([]),[p,n]=m.useState(!0);m.useEffect(()=>{if(!t?.campId)return;const c=H(B(b,"users_v2"),$("campId","==",t.campId)),i=K(c,o=>{const x=o.docs.map(r=>({id:r.id,...r.data()}));s(x),n(!1)});return()=>i()},[t?.campId]);const l=async c=>{if(window.confirm(`ì •ë§ '${c.nickname}' ë‹˜ì„ ì˜ì§€ì—ì„œ ì¶”ë°©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))try{await ee(N(b,"users_v2",c.id));const i=N(b,"camps",t.campId);await oe(i,{members:Qe(c.nickname)}),alert("ì¶”ë°©ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(i){console.error("Kick failed:",i),alert("ì¶”ë°© ì‹¤íŒ¨: "+i.message)}},h=async()=>{if(!window.confirm(`âš ï¸ ê²½ê³ : ì˜ì§€ë¥¼ í­íŒŒí•˜ë©´ ëª¨ë“  ë°ì´í„°ì™€ ë©¤ë²„ê°€ ì‚­ì œë©ë‹ˆë‹¤.
ì •ë§ ì´ ì•¼ì˜ì§€ë¥¼ í•´ì²´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))return;if(prompt("ì˜ì§€ë¥¼ ì‚­ì œí•˜ë ¤ë©´ 'ì˜ì§€ í­íŒŒ'ë¼ê³  ì…ë ¥í•˜ì„¸ìš”.")!=="ì˜ì§€ í­íŒŒ")return alert("ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");try{n(!0);const o=Ze(b),x=N(b,"camps",t.campId);o.delete(x),a.forEach(v=>{const f=N(b,"users_v2",v.id);o.delete(f)});const r=H(B(b,"chats"),$("campId","==",t.campId));(await pe(r)).forEach(v=>{o.delete(v.ref)}),await o.commit(),alert("ì•¼ì˜ì§€ê°€ ì—­ì‚¬ ì†ìœ¼ë¡œ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤."),window.location.reload()}catch(o){console.error("Destroy failed:",o),alert("ì‚­ì œ ì‹¤íŒ¨: "+o.message)}finally{n(!1)}};return e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",paddingBottom:"80px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"30px",marginBottom:"30px",border:"1px solid var(--accent-color)",background:"rgba(50, 0, 0, 0.3)"},children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:"0 0 10px",color:"#fca5a5"},children:[e.jsx(Q,{})," ì˜ì£¼ ê´€ë¦¬ì‹¤ (Admin)"]}),e.jsxs("p",{style:{opacity:.8,fontSize:"0.9rem"},children:["í˜„ì¬ ì•¼ì˜ì§€: ",e.jsx("b",{children:t.campId})," ",e.jsx("br",{}),"ê¶Œí•œ: ",e.jsx("span",{style:{color:"var(--accent-color)"},children:"Master"})]})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"0",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"20px",background:"rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs("h3",{style:{margin:0,fontSize:"1.1rem"},children:["ëŒ€ì› ëª©ë¡ (",a.length,"/4)"]})}),a.map(c=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",background:c.isAdmin?"var(--accent-color)":"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:c.isAdmin?e.jsx(X,{size:22,color:"white"}):e.jsx(Ye,{size:22})}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px",fontSize:"1.1rem"},children:[c.nickname,e.jsx("span",{style:{fontSize:"0.7rem",padding:"3px 8px",borderRadius:"6px",background:"rgba(255,255,255,0.1)",opacity:.8},children:c.className||"ëª¨í—˜ê°€"})]}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.5,marginTop:"4px"},children:c.isAdmin?"ì˜ì£¼ (Leader)":"ëŒ€ì› (Member)"})]})]}),!c.isAdmin&&e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:async()=>{if(window.confirm(`'${c.nickname}' ë‹˜ì„ ê´€ë¦¬ìë¡œ ì„ëª…í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))try{const{updateDoc:i,doc:o}=await le(async()=>{const{updateDoc:x,doc:r}=await import("./vendor-ClXMfPpn.js").then(y=>y.a8);return{updateDoc:x,doc:r}},[]);await i(o(b,"users_v2",c.id),{isAdmin:!0,role:"Admin"}),alert(`${c.nickname} ë‹˜ì´ ê´€ë¦¬ìê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(i){console.error(i),alert("ê¶Œí•œ ë¶€ì—¬ ì‹¤íŒ¨: "+i.message)}},style:{padding:"10px 15px",borderRadius:"8px",background:"rgba(74, 222, 128, 0.1)",border:"1px solid rgba(74, 222, 128, 0.3)",color:"#4ade80",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(X,{size:16})," ì„ëª…"]}),e.jsxs("button",{onClick:()=>l(c),style:{padding:"10px 15px",borderRadius:"8px",background:"rgba(248, 113, 113, 0.1)",border:"1px solid rgba(248, 113, 113, 0.3)",color:"#f87171",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ve,{size:16})," ì¶”ë°©"]})]})]},c.id)),a.length===0&&!p&&e.jsx("div",{style:{padding:"40px",textAlign:"center",opacity:.5},children:"ë©¤ë²„ê°€ ì—†ìŠµë‹ˆë‹¤."})]}),e.jsxs("div",{style:{marginTop:"50px",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"30px"},children:[e.jsxs("h3",{style:{color:"#ef4444",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Xe,{})," ìœ„í—˜ êµ¬ì—­"]}),e.jsxs("div",{className:"glass-panel",style:{borderColor:"#ef4444",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 5px"},children:"ì˜ì§€ í­íŒŒ"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.6},children:"ì´ ì•¼ì˜ì§€ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤."})]}),e.jsx("button",{onClick:h,style:{background:"#ef4444",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer"},children:"í­íŒŒ ì‹¤í–‰"})]})]})]})},pt=({user:t})=>{const[a,s]=m.useState([]),[p,n]=m.useState(!1),[l,h]=m.useState({title:"",content:"",image:null}),c=m.useRef(null);m.useEffect(()=>{if(!t?.campId)return;const r=H(B(b,"tactics"),$("campId","==",t.campId),de("createdAt","desc")),y=K(r,v=>{const f=v.docs.map(j=>({id:j.id,...j.data()}));s(f)});return()=>y()},[t?.campId]);const i=r=>{const y=r.target.files[0];if(y){if(y.size>1024*1024)return alert("ì´ë¯¸ì§€ëŠ” 1MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");const v=new FileReader;v.onloadend=()=>{h(f=>({...f,image:v.result}))},v.readAsDataURL(y)}},o=async r=>{if(r.preventDefault(),!(!l.title||!t.campId))try{await Z(B(b,"tactics"),{...l,campId:t.campId,author:t.nickname,createdAt:ge()}),n(!1),h({title:"",content:"",image:null})}catch(y){console.error(y),alert("ê²Œì‹œ ì‹¤íŒ¨")}},x=async r=>{window.confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await ee(N(b,"tactics",r))};return e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",paddingBottom:"80px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px",marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:0},children:[e.jsx(je,{className:"text-accent"})," ì „ìˆ  ê²Œì‹œíŒ (Tactics Board)"]}),e.jsx("p",{style:{margin:"5px 0 0",opacity:.7,fontSize:"0.9rem"},children:"ê³µëµê³¼ íŒì„ ê³µìœ í•˜ì„¸ìš”."})]}),e.jsxs("button",{onClick:()=>n(!0),style:{background:"var(--accent-color)",color:"white",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(et,{size:18})," ì „ìˆ  ê³µìœ "]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:a.map(r=>e.jsxs("div",{className:"glass-panel",style:{padding:"0",overflow:"hidden",display:"flex",flexDirection:"column"},children:[r.image&&e.jsx("div",{style:{width:"100%",height:"200px",overflow:"hidden",background:"#000"},children:e.jsx("img",{src:r.image,alt:"tactic",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsxs("div",{style:{padding:"20px",flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"10px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.2rem"},children:r.title}),(t.isAdmin||t.nickname===r.author)&&e.jsx("button",{onClick:()=>x(r.id),style:{background:"none",border:"none",color:"rgba(255,255,255,0.3)",cursor:"pointer"},children:e.jsx(Ce,{size:16})})]}),e.jsx("p",{style:{fontSize:"0.9rem",opacity:.8,whiteSpace:"pre-wrap",lineHeight:"1.5"},children:r.content})]}),e.jsxs("div",{style:{padding:"15px 20px",background:"rgba(0,0,0,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.8rem",opacity:.6},children:[e.jsxs("span",{children:["by ",r.author]}),r.createdAt&&e.jsx("span",{children:new Date(r.createdAt?.toDate?r.createdAt.toDate():r.createdAt).toLocaleDateString()})]})]},r.id))}),p&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(5px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>n(!1),children:e.jsxs("div",{className:"glass-panel",style:{width:"500px",padding:"30px"},onClick:r=>r.stopPropagation(),children:[e.jsx("h3",{style:{margin:"0 0 20px"},children:"ìƒˆ ì „ìˆ  ê³µìœ "}),e.jsxs("form",{onSubmit:o,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx("input",{placeholder:"ì œëª© (ì˜ˆ: ë¼íŒŒì—˜ ì „íˆ¬ í¬ì§€ì…”ë‹)",value:l.title,onChange:r=>h({...l,title:r.target.value}),required:!0,style:{padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px"}}),e.jsx("textarea",{placeholder:"ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...",value:l.content,onChange:r=>h({...l,content:r.target.value}),rows:5,style:{padding:"12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"8px",resize:"vertical"}}),e.jsxs("div",{style:{border:"1px dashed rgba(255,255,255,0.3)",borderRadius:"8px",padding:"20px",textAlign:"center"},children:[l.image?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx("img",{src:l.image,alt:"Preview",style:{maxHeight:"200px",maxWidth:"100%",borderRadius:"8px"}}),e.jsx("button",{type:"button",onClick:()=>h({...l,image:null}),style:{position:"absolute",top:-10,right:-10,background:"red",borderRadius:"50%",width:"24px",height:"24px",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(xe,{size:14})})]}):e.jsxs("button",{type:"button",onClick:()=>c.current.click(),style:{background:"none",border:"none",color:"var(--accent-color)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"5px"},children:[e.jsx(ke,{size:32}),e.jsx("span",{children:"ì´ë¯¸ì§€ ì¶”ê°€ (ìŠ¤í¬ë¦°ìƒ· ë“±)"})]}),e.jsx("input",{type:"file",ref:c,onChange:i,accept:"image/*",style:{display:"none"}})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{type:"button",onClick:()=>n(!1),style:{flex:1,padding:"12px",borderRadius:"8px",background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"white",cursor:"pointer"},children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",style:{flex:1,padding:"12px",borderRadius:"8px",background:"var(--accent-color)",border:"none",color:"white",cursor:"pointer"},children:"ê²Œì‹œ"})]})]})]})})]})},xt=()=>{const[t,a]=m.useState("home"),[s,p]=m.useState(window.innerWidth<768),[n,l]=m.useState(()=>{try{return JSON.parse(localStorage.getItem("bg3_user_profile"))}catch{return null}});m.useEffect(()=>{const i=()=>p(window.innerWidth<768);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),m.useEffect(()=>{},[n]);const h=i=>{l(i)},c=()=>{switch(t){case"home":return e.jsx(re,{user:n,setActiveTab:a,isMobile:s});case"chat":return e.jsx(ot,{user:n,isMobile:s});case"calendar":return e.jsx(lt,{user:n,isMobile:s});case"tactics":return e.jsx(pt,{user:n,isMobile:s});case"save":return e.jsx(dt,{user:n,isMobile:s});case"profile":return e.jsx(ye,{onComplete:h,initialData:n,isMobile:s});case"admin":return n?.isAdmin?e.jsx(ct,{user:n,isMobile:s}):e.jsx(re,{user:n,setActiveTab:a,isMobile:s});default:return e.jsx(re,{user:n,setActiveTab:a,isMobile:s})}};return n?e.jsxs("div",{style:{display:"flex",height:"100vh",overflow:"hidden",background:"var(--bg-color)",color:"white"},children:[e.jsx(it,{activeTab:t,setActiveTab:a,isMobile:s,user:n}),e.jsx("main",{style:{flex:1,padding:0,height:"100vh",overflowY:"auto",position:"relative"},children:e.jsx("div",{style:{padding:s?"calc(20px + env(safe-area-inset-top)) 20px calc(80px + env(safe-area-inset-bottom))":"40px",maxWidth:t==="chat"?"100%":"1200px",margin:"0 auto",minHeight:"100%"},children:c()})})]}):e.jsx(ye,{onComplete:h,isMobile:s})};function gt(){return e.jsx(xt,{})}class mt extends W.Component{constructor(a){super(a),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,s){this.setState({error:a,errorInfo:s}),console.error("Uncaught error:",a,s)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"white",background:"#333"},children:[e.jsx("h1",{children:"Something went wrong."}),e.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),e.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px"},children:"Reload"})]}):this.props.children}}tt.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(mt,{children:e.jsx(gt,{})})}));
