import{r as g,H as F,M as H,C as W,F as _,S as P,a as A,j as e,X as q,b as U,L,i as G,g as K,q as R,l as V,c as w,o as T,B as X,d as Y,e as J,s as N,f as Q,U as M,h as O,k as C,m as E,n as Z,p as ee,t as te,u as se,R as ne,v as ie,w as re,Y as ae,T as oe,x as le,y as de,z as ce,A as $,D as pe,E as xe,G as D,I as ge,J as me,K as he,N as ue,O as fe,P as be,Q as ye,V as je,W as ve,Z as Se,_ as we,$ as ke,a0 as Ce}from"./vendor-CuFet41G.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function d(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=d(s);fetch(s.href,l)}})();const ze=({activeTab:t,setActiveTab:a,isMobile:d,onlineCount:o,user:s})=>{const[l,c]=g.useState(!1),r=[{id:"home",icon:F,label:"í™ˆ"},{id:"chat",icon:H,label:"íŒŒí‹° ì±„íŒ…"},{id:"calendar",icon:W,label:"ë ˆì´ë“œ ì¼ì •"},{id:"save",icon:_,label:"ì„¸ì´ë¸Œ ë¶„ì„"},{id:"settings",icon:P,label:"í™˜ê²½ ì„¤ì •"},...s?.isAdmin?[{id:"admin",icon:A,label:"ë‚˜ì˜ ì˜ì§€ (ê´€ë¦¬)"}]:[]],i=x=>{a(x),d&&c(!1)},p=()=>{confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? í”„ë¡œí•„ ì •ë³´ê°€ ì‚­ì œë©ë‹ˆë‹¤.")&&(localStorage.removeItem("bg3_user_profile"),window.location.reload())};return e.jsxs(e.Fragment,{children:[d&&e.jsx("button",{onClick:()=>c(!l),style:{position:"fixed",top:"20px",left:"20px",zIndex:100,background:"rgba(0,0,0,0.5)",border:"none",color:"white",padding:"10px",borderRadius:"8px",backdropFilter:"blur(5px)"},children:l?e.jsx(q,{}):e.jsx(U,{})}),e.jsxs("div",{className:`glass-panel sidebar ${d&&!l?"closed":""}`,style:{width:"260px",height:d?"100%":"calc(100vh - 40px)",position:d?"fixed":"sticky",top:d?"0":"20px",left:d?l?"0":"-100%":"20px",margin:d?"0":"20px 0 20px 20px",display:"flex",flexDirection:"column",transition:"all 0.3s ease",zIndex:90},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("h1",{style:{fontSize:"1.5rem",margin:0,background:"linear-gradient(to right, #fff, #aaa)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"BG3 Manager"}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",marginTop:"10px",padding:"4px 10px",background:"rgba(16, 185, 129, 0.2)",borderRadius:"20px",border:"1px solid rgba(16, 185, 129, 0.4)",color:"#6ee7b7",fontSize:"0.8rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",background:"#34d399",borderRadius:"50%",boxShadow:"0 0 5px #34d399"}}),e.jsxs("span",{children:[o,"ëª… ì ‘ì† ì¤‘"]})]})]}),e.jsx("nav",{style:{flex:1,padding:"20px 10px"},children:r.map(x=>{const f=x.icon,b=t===x.id;return e.jsxs("button",{onClick:()=>i(x.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"15px",padding:"12px 15px",marginBottom:"8px",background:b?"var(--accent-color)":"transparent",border:"none",borderRadius:"12px",color:"white",fontSize:"1rem",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},children:[e.jsx(f,{size:20,style:{opacity:b?1:.7}}),x.label]},x.id)})}),s&&e.jsxs("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.2rem"},children:"ğŸ§™â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:s.nickname}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.6},children:s.className})]})]}),e.jsxs("button",{onClick:p,style:{width:"100%",padding:"8px",background:"rgba(255,255,255,0.05)",border:"none",borderRadius:"6px",color:"rgba(255,255,255,0.6)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"0.8rem"},children:[e.jsx(L,{size:14})," ë¡œê·¸ì•„ì›ƒ"]})]})]})]})},z=()=>e.jsxs("div",{className:"glass-panel",children:[e.jsx("h1",{children:"ë°œë”ìŠ¤ ê²Œì´íŠ¸ 3 íŒŒí‹° ê´€ë¦¬ì"}),e.jsx("p",{children:"í™˜ì˜í•©ë‹ˆë‹¤! íŒ€ì›ë“¤ê³¼ ì¼ì •ì„ ì¡°ìœ¨í•˜ê³  ëª¨í—˜ì„ ë– ë‚˜ì„¸ìš”."})]}),Ie={apiKey:"AIzaSyAsbaWbo3DoSTrRFhkaf9XujWPpmeGSjAE",authDomain:"bg3-raid-manager.firebaseapp.com",projectId:"bg3-raid-manager",storageBucket:"bg3-raid-manager.firebasestorage.app",messagingSenderId:"773826713403",appId:"1:773826713403:web:c15fdfca708d47f4fcc91e"},De=G(Ie),v=K(De);console.log("ğŸ”¥ Firebase Connected (Real DB Mode)");const Ae=({user:t})=>{const[a,d]=g.useState([]),[o,s]=g.useState(""),[l,c]=g.useState(!0),r=g.useRef(null);g.useEffect(()=>{const p=R(w(v,"chats"),V(100)),x=T(p,f=>{const b=f.docs.map(j=>({id:j.id,...j.data(),timestamp:j.data().timestamp?.toDate().toISOString()||new Date().toISOString()}));b.sort((j,n)=>new Date(j.timestamp)-new Date(n.timestamp)),d(b),c(!1)});return()=>x()},[]),g.useEffect(()=>{r.current?.scrollIntoView({behavior:"smooth"})},[a]);const i=async p=>{if(p.preventDefault(),!o.trim())return;const x=o;s("");try{await J(w(v,"chats"),{text:x,sender:t?.nickname||"Anonymous",userClass:t?.className||"Unknown",uid:t?.id||"guest",timestamp:N()})}catch(f){console.error("Error sending message: ",f)}};return e.jsxs("div",{className:"glass-panel",style:{height:"calc(100vh - 120px)",display:"flex",flexDirection:"column",padding:0},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(X,{color:"#4fd1c5"})," íŒŒí‹° ì‘ì „ íšŒì˜ì‹¤"]}),e.jsx("span",{style:{fontSize:"0.8rem",opacity:.7},children:"ë ˆì´ë“œ ì¼ì •ê³¼ ì „ëµì„ ë…¼ì˜í•˜ì„¸ìš”."})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[l&&e.jsx("div",{style:{textAlign:"center",opacity:.5},children:"ë¡œë”© ì¤‘..."}),a.map(p=>{const x=p.uid===t?.id;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:x?"flex-end":"flex-start"},children:[e.jsx("div",{style:{fontSize:"0.8rem",marginBottom:"4px",opacity:.7,display:"flex",alignItems:"center",gap:"6px"},children:!x&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["[",p.userClass,"]"]}),p.sender]})}),e.jsx("div",{style:{background:x?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"rgba(255, 255, 255, 0.1)",padding:"12px 16px",borderRadius:x?"16px 16px 0 16px":"16px 16px 16px 0",maxWidth:"75%",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255,255,255,0.1)",wordBreak:"break-word"},children:p.text}),e.jsx("span",{style:{fontSize:"0.7rem",opacity:.4,marginTop:"4px"},children:new Date(p.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},p.id)}),e.jsx("div",{ref:r})]}),e.jsxs("form",{onSubmit:i,style:{padding:"20px",background:"rgba(0,0,0,0.2)",display:"flex",gap:"10px",borderRadius:"0 0 16px 16px"},children:[e.jsx("input",{type:"text",value:o,onChange:p=>s(p.target.value),placeholder:"ì‘ì „ì„ ì „ë‹¬í•˜ì„¸ìš”...",style:{flex:1,padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"white",outline:"none"}}),e.jsx("button",{type:"submit",style:{padding:"12px",borderRadius:"12px",background:"var(--accent-color)",color:"white",border:"none",cursor:"pointer",transition:"all 0.3s"},children:e.jsx(Y,{size:20})})]})]})},Re=({user:t})=>{const a=()=>{const n=[];for(let m=0;m<7;m++){const h=new Date;h.setDate(h.getDate()+m),n.push(h.toISOString().split("T")[0])}return n},d=()=>[18,19,20,21,22,23,0,1,2],[o,s]=g.useState(new Date().toISOString().split("T")[0]),[l,c]=g.useState([]),[r,i]=g.useState([]),[p,x]=g.useState(a()),f=d();g.useEffect(()=>{const n=R(w(v,"schedules")),m=T(n,h=>{const y=h.docs.map(S=>({id:S.id,...S.data()}));i(y);const u=y.filter(S=>S.userId===t.id);c(u)});return()=>m()},[t]);const b=async(n,m)=>{const h=`${n}_${t.id}`,y=l.find(S=>S.id===h);let u=y?y.times:[];u.includes(m)?u=u.filter(S=>S!==m):u=[...u,m],u.length===0?y&&await O(C(v,"schedules",h)):await E(C(v,"schedules",h),{userId:t.id,nickname:t.nickname,date:n,times:u,updatedAt:new Date().toISOString()})},j=(n,m)=>{const h=r.filter(y=>y.date===n&&y.times.includes(m)).map(y=>y.nickname);return{count:h.length,names:h}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsx("div",{className:"glass-panel",style:{padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(W,{})," ë ˆì´ë“œ ì‹œê°„í‘œ ì¡°ì •"]}),e.jsx("p",{style:{margin:"5px 0 0 0",opacity:.7},children:"ê°€ëŠ¥í•œ ì‹œê°„ì„ ì²´í¬í•˜ë©´, ëª¨ë“  íŒŒí‹°ì›ì´ ê²¹ì¹˜ëŠ” 'Golden Time'ì„ ì°¾ì•„ì¤ë‹ˆë‹¤."})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"20px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsx("h3",{style:{marginTop:0},children:"ğŸ“… ë‚ ì§œ ì„ íƒ"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"5px",marginBottom:"20px"},children:p.map(n=>e.jsxs("button",{onClick:()=>s(n),style:{padding:"12px",borderRadius:"8px",border:"none",background:o===n?"var(--accent-color)":"rgba(255,255,255,0.05)",color:"white",cursor:"pointer",textAlign:"left",fontWeight:o===n?"bold":"normal",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:n}),l.find(m=>m.date===n)&&e.jsx(Q,{size:16})]},n))}),e.jsxs("h3",{style:{marginTop:0},children:["â±ï¸ ",o," ê°€ëŠ¥ ì‹œê°„"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px"},children:f.map(n=>{const m=l.find(h=>h.date===o)?.times.includes(n);return e.jsx("button",{onClick:()=>b(o,n),style:{padding:"10px",borderRadius:"6px",border:"1px solid "+(m?"var(--accent-color)":"rgba(255,255,255,0.2)"),background:m?"rgba(99, 102, 241, 0.3)":"transparent",color:m?"white":"rgba(255,255,255,0.6)",cursor:"pointer"},children:n<10?`0${n}:00`:`${n}:00`},n)})})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[e.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(M,{})," íŒŒí‹° í•©ë¥˜ í˜„í™©",e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"normal",opacity:.6},children:"(ì´ˆë¡ìƒ‰ì´ ë² ìŠ¤íŠ¸ íƒ€ì„!)"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"10px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"ì‹œê°„"}),p.map(n=>e.jsx("th",{style:{padding:"10px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:n.slice(5)},n))]})}),e.jsx("tbody",{children:f.map(n=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid rgba(255,255,255,0.05)",fontWeight:"bold",color:"rgba(255,255,255,0.7)"},children:n<10?`0${n}:00`:`${n}:00`}),p.map(m=>{const{count:h,names:y}=j(m,n);let u="transparent";return h===4?u="rgba(74, 222, 128, 0.6)":h===3?u="rgba(251, 191, 36, 0.4)":h>0&&(u="rgba(239, 68, 68, 0.2)"),e.jsx("td",{style:{background:u,borderBottom:"1px solid rgba(255,255,255,0.05)",textAlign:"center",cursor:"grab"},title:h>0?`${y.join(", ")} ê°€ëŠ¥`:"",children:h>0&&h},m+n)})]},n))})]})}),e.jsx("div",{style:{marginTop:"20px",fontSize:"0.8rem",opacity:.6,textAlign:"center"},children:"ê° ì¹¸ì˜ ìˆ«ìëŠ” í•´ë‹¹ ì‹œê°„ì— ì°¸ì—¬ ê°€ëŠ¥í•œ ì¸ì› ìˆ˜ì…ë‹ˆë‹¤. ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ëˆ„êµ¬ì¸ì§€ ë³´ì…ë‹ˆë‹¤."})]})]})]})},Te=t=>{const a=t.name,d=a.includes("Honour")||a.includes("Honor");let o=0;for(let n=0;n<a.length;n++)o+=a.charCodeAt(n);const s=()=>(o=(o*9301+49297)%233280,o/233280),l=Math.floor(s()*100)+10,c=Math.min(12,Math.floor(l/5)+1),r=[{name:"ì„€ë„í•˜íŠ¸",id:"shadowheart",score:Math.floor(s()*100),avatar:"ğŸ–¤"},{name:"ì•„ìŠ¤íƒ€ë¦¬ì˜¨",id:"astarion",score:Math.floor(s()*100),avatar:"ğŸ§›"},{name:"ë ˆì´ì ¤",id:"laezel",score:Math.floor(s()*100),avatar:"ğŸ‘½"},{name:"ê²Œì¼",id:"gale",score:Math.floor(s()*100),avatar:"ğŸ§™â€â™‚ï¸"},{name:"ìœŒ",id:"wyll",score:Math.floor(s()*100),avatar:"ğŸ˜ˆ"},{name:"ì¹´ë¥¼ë¼í¬",id:"karlach",score:Math.floor(s()*100),avatar:"â¤ï¸â€ğŸ”¥"}].sort((n,m)=>m.score-n.score),i=n=>n>=90?"ì—°ì¸ (ë§¤ìš° ë†’ìŒ)":n>=70?"ì‹ ë¢° (ë†’ìŒ)":n>=40?"ìš°í˜¸ (ë³´í†µ)":n>=20?"ì¤‘ë¦½ (ë‚®ìŒ)":"ì ëŒ€ (ë§¤ìš° ë‚®ìŒ)",p=Math.floor(s()*2e4)+500,x=Math.floor(s()*2e3),f=Math.floor(s()*300)+50,b=[];f>200&&b.push("ì¸ë²¤í† ë¦¬ê°€ ë„ˆë¬´ ë¬´ê²ìŠµë‹ˆë‹¤! 'ì¡ë™ì‚¬ë‹ˆ' ì•„ì´í…œì„ ìƒì¸ì—ê²Œ ì²˜ë¶„í•˜ì„¸ìš”."),x<100&&b.push("ì•¼ì˜ì§€ ë¬¼ìê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. ê¸´ íœ´ì‹ì„ ìœ„í•´ ìŒì‹ì„ ëª¨ìœ¼ì„¸ìš”."),p>1e4&&b.push("ê³¨ë“œê°€ ì¶©ë¶„í•©ë‹ˆë‹¤. ìœ„ë”ìŠ¤ì—ê²Œ ìš©ë³‘ì„ ê³ ìš©í•˜ê±°ë‚˜ ì „ì„¤ ì•„ì´í…œì„ êµ¬ë§¤í•´ë³´ì„¸ìš”.");const j=r[r.length-1];return j.score<30&&b.push(`${j.name}ì˜ í˜¸ê°ë„ê°€ ìœ„í—˜ ìˆ˜ì¤€ì…ë‹ˆë‹¤. ëŒ€í™”ë¥¼ ì‹œë„í•˜ì„¸ìš”.`),{meta:{filename:a,playtime:`${l}ì‹œê°„ ${Math.floor(s()*60)}ë¶„`,level:c,mode:d?"ëª…ì˜ˆ ëª¨ë“œ":"ì „ìˆ ê°€/ì¼ë°˜",lastSave:new Date().toLocaleString(),location:["ë¦¬ë¹™í„´","í•˜ë¶€ ë„ì‹œ","ì—ë©”ë„ë“œ ìˆ²","ê·¸ë¦¼í¬ì§€"][Math.floor(s()*4)]},companions:r.map(n=>({...n,relation:i(n.score)})),economy:{gold:p,campSupplies:x,weight:f,legendaryItems:Math.floor(s()*5),trashValue:Math.floor(s()*1e3)},advices:b}},Be=()=>{const[t,a]=g.useState(null),[d,o]=g.useState(!1),[s,l]=g.useState("summary"),c=i=>{i.preventDefault();const p=i.dataTransfer?i.dataTransfer.files:i.target.files;p&&p.length>0&&r(p[0])},r=i=>{if(!i.name.endsWith(".lsv")&&!i.name.endsWith(".save")){alert("ìœ íš¨í•œ ë°œë”ìŠ¤ ê²Œì´íŠ¸ 3 ì„¸ì´ë¸Œ íŒŒì¼(.lsv)ì´ ì•„ë‹™ë‹ˆë‹¤.");return}o(!0),setTimeout(()=>{const p=Te(i);a(p),o(!1)},1500)};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{className:"glass-panel",onDragOver:i=>i.preventDefault(),onDrop:c,style:{padding:"40px",textAlign:"center",border:"2px dashed rgba(255,255,255,0.2)",cursor:"pointer",transition:"all 0.3s"},children:[e.jsx("input",{type:"file",id:"fileInput",style:{display:"none"},accept:".lsv,.save",onChange:c}),!t&&!d&&e.jsxs("label",{htmlFor:"fileInput",style:{cursor:"pointer",display:"block"},children:[e.jsx(Z,{size:48,style:{opacity:.5,marginBottom:"15px"}}),e.jsx("h2",{style:{margin:"0 0 10px 0"},children:"ì„¸ì´ë¸Œ íŒŒì¼ ì—…ë¡œë“œ"}),e.jsxs("p",{style:{opacity:.6},children:[".lsv íŒŒì¼ì„ ì´ê³³ì— ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”.",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.8rem"},children:"(íŒŒì¼ì€ ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•Šê³  ë¸Œë¼ìš°ì €ì—ì„œ ì•ˆì „í•˜ê²Œ ë¶„ì„ë©ë‹ˆë‹¤)"})]})]}),d&&e.jsxs("div",{children:[e.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid rgba(255,255,255,0.1)",borderTop:"4px solid var(--accent-color)",borderRadius:"50%",margin:"0 auto 20px auto",animation:"spin 1s linear infinite"}}),e.jsx("h3",{children:"ë§ˆì¸ë“œ í”Œë ˆì´ì–´ ê¸°ìƒì¶©ì´ ê¸°ì–µì„ ì½ëŠ” ì¤‘..."})]}),t&&!d&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"20px"},children:[e.jsx("div",{style:{fontSize:"3rem"},children:"ğŸ“œ"}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("h2",{style:{margin:0},children:t.meta.filename}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"5px"},children:[e.jsx("span",{style:{background:"rgba(251, 191, 36, 0.2)",color:"#fbbf24",padding:"2px 8px",borderRadius:"4px",fontSize:"0.9rem",border:"1px solid rgba(251, 191, 36, 0.4)"},children:"âš ï¸ ì‹œë®¬ë ˆì´ì…˜ ë¶„ì„"}),e.jsxs("p",{style:{margin:0,opacity:.7},children:[t.meta.mode," â€¢ Lv.",t.meta.level," â€¢ ",t.meta.playtime]})]})]}),e.jsx("button",{onClick:()=>a(null),style:{marginLeft:"20px",padding:"8px 16px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",borderRadius:"6px",cursor:"pointer"},children:"ë‹¤ë¥¸ íŒŒì¼ ë¶„ì„"})]})]}),t&&!d&&e.jsxs("div",{className:"glass-panel",style:{minHeight:"500px",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[{id:"summary",label:"ëª¨í—˜ ìš”ì•½",icon:ee},{id:"companions",label:"ë™ë£Œ í˜¸ê°ë„",icon:M},{id:"economy",label:"ê²½ì œ/ì¸ë²¤í† ë¦¬",icon:te}].map(i=>e.jsxs("button",{onClick:()=>l(i.id),style:{flex:1,padding:"20px",background:s===i.id?"var(--accent-color)":"transparent",border:"none",color:"white",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",transition:"all 0.2s",borderBottom:s===i.id?"2px solid white":"none"},children:[e.jsx(i.icon,{size:18})," ",i.label]},i.id))}),e.jsxs("div",{style:{padding:"30px"},children:[s==="summary"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{borderBottom:"1px solid rgba(255,255,255,0.2)",paddingBottom:"10px"},children:"í˜„ì¬ ìƒíƒœ"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",marginTop:"15px"},children:[e.jsx(k,{label:"í˜„ì¬ ìœ„ì¹˜",value:t.meta.location}),e.jsx(k,{label:"í”Œë ˆì´ íƒ€ì„",value:t.meta.playtime}),e.jsx(k,{label:"íŒŒí‹° ë ˆë²¨",value:`Lv. ${t.meta.level}`}),e.jsx(k,{label:"ë‚œì´ë„",value:t.meta.mode})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"12px"},children:[e.jsxs("h3",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(se,{size:20,color:"#fbbf24"})," ìœ„ë”ìŠ¤ì˜ ì¡°ì–¸"]}),e.jsx("ul",{style:{paddingLeft:"20px",lineHeight:"1.6",fontSize:"0.9rem"},children:t.advices&&t.advices.map((i,p)=>e.jsx("li",{style:{marginBottom:"5px"},children:i},p))})]})]}),s==="companions"&&e.jsxs("div",{style:{height:"400px"},children:[e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(ie,{data:t.companions,layout:"vertical",margin:{left:20},children:[e.jsx(re,{type:"number",domain:[0,100],hide:!0}),e.jsx(ae,{dataKey:"name",type:"category",width:80,tick:{fill:"white"}}),e.jsx(oe,{contentStyle:{background:"#1a1c2c",border:"none",borderRadius:"8px"},cursor:{fill:"rgba(255,255,255,0.1)"}}),e.jsx(le,{dataKey:"score",radius:[0,4,4,0],children:t.companions.map((i,p)=>e.jsx(de,{fill:i.score>80?"#ec4899":i.score>40?"#3b82f6":"#ef4444"},`cell-${p}`))})]})}),e.jsx("div",{style:{display:"flex",gap:"10px",marginTop:"20px",justifyContent:"center",flexWrap:"wrap"},children:t.companions.map(i=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",padding:"8px 12px",borderRadius:"20px",fontSize:"0.9rem"},children:[i.avatar," ",i.name,": ",e.jsxs("span",{style:{color:i.score>50?"#4ade80":"#f87171"},children:[i.relation," (",i.score,")"]})]},i.id))})]}),s==="economy"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",textAlign:"center"},children:[e.jsx(I,{icon:"ğŸ’°",title:"ì†Œì§€ê¸ˆ",value:`${t.economy.gold.toLocaleString()} G`,sub:"íŒŒí‹° ì „ì²´ í•©ê³„"}),e.jsx(I,{icon:"ğŸ",title:"ì•¼ì˜ì§€ ë¬¼ì",value:t.economy.campSupplies,sub:"ê¸´ íœ´ì‹ ê°€ëŠ¥"}),e.jsx(I,{icon:"âš–ï¸",title:"ì´ ë¬´ê²Œ",value:`${t.economy.weight} kg`,sub:`ì¡ë™ì‚¬ë‹ˆ ê°€ì¹˜: ${t.economy.trashValue} G`}),e.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:"20px",background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"12px",textAlign:"left"},children:[e.jsx("h3",{children:"ğŸ’¡ ê²½ì œ í™œë™ íŒ"}),e.jsxs("p",{children:["í˜„ì¬ ë³´ìœ í•œ ì¡ë™ì‚¬ë‹ˆë§Œ íŒ”ì•„ë„ ",e.jsxs("strong",{children:[t.economy.trashValue," ê³¨ë“œ"]}),"ë¥¼ ë²Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤."]}),e.jsx("p",{children:"ê°€ì¥ ê°€ê¹Œìš´ ìƒì¸ì—ê²Œ ì´ë™í•˜ì—¬ 'ì¡ë™ì‚¬ë‹ˆ íŒë§¤' ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”."})]})]})]})]})]})},k=({label:t,value:a})=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:"8px"},children:[e.jsx("span",{style:{opacity:.6},children:t}),e.jsx("span",{style:{fontWeight:"bold"},children:a})]}),I=({icon:t,title:a,value:d,sub:o})=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"20px",borderRadius:"12px"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:t}),e.jsx("div",{style:{opacity:.7,fontSize:"0.9rem"},children:a}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"5px 0"},children:d}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.5},children:o})]}),We=({user:t})=>{const[a,d]=g.useState(0),[o,s]=g.useState(!1),l=()=>{confirm("ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ê¸°ê¸°ì˜ í”„ë¡œí•„ ì •ë³´ê°€ ì‚­ì œë©ë‹ˆë‹¤.")&&(localStorage.removeItem("bg3_user_profile"),window.location.reload())},c=async()=>{s(!0);try{const r=xe(v);(await D(w(v,"chats"))).forEach(x=>{r.delete(x.ref)}),(await D(w(v,"schedules"))).forEach(x=>{r.delete(x.ref)}),await r.commit(),d(2)}catch(r){console.error(r),alert("ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: "+r.message),d(0)}finally{s(!1)}};return e.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsx("h1",{style:{marginBottom:"30px"},children:"âš™ï¸ í™˜ê²½ ì„¤ì •"}),e.jsxs("div",{className:"glass-panel",style:{padding:"30px",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"1.2rem",margin:"0 0 20px 0"},children:"ë‚´ ëª¨í—˜ê°€ ì¹´ë“œ"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"#333",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem"},children:"ğŸ‘¤"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:t.nickname}),e.jsxs("div",{style:{opacity:.7},children:["Level 1 â€¢ ",t.className]}),t.isAdmin&&e.jsx("div",{style:{color:"#fbbf24",fontSize:"0.9rem",marginTop:"5px"},children:"ğŸ‘‘ Party Leader (Admin)"})]})]})]}),t.isAdmin&&e.jsxs("div",{className:"glass-panel",style:{padding:"30px",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[e.jsxs("h2",{style:{fontSize:"1.2rem",margin:"0 0 20px 0",color:"#f87171",borderBottom:"1px solid rgba(239, 68, 68, 0.2)",paddingBottom:"10px"},children:[e.jsx(ce,{size:20,style:{verticalAlign:"middle",marginRight:"8px"}}),"ì„œë²„ ë°ì´í„° ê´€ë¦¬ (ìœ„í—˜)"]}),e.jsxs("p",{style:{opacity:.8,marginBottom:"20px"},children:["ì„œë²„ì— ì €ì¥ëœ ",e.jsx("strong",{children:"ëª¨ë“  ì±„íŒ… ë‚´ì—­ê³¼ ë ˆì´ë“œ ì¼ì •"}),"ì„ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.",e.jsx("br",{}),"ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìœ¼ë‹ˆ íŒŒí‹°ì›ë“¤ê³¼ ìƒì˜ í›„ ì§„í–‰í•˜ì„¸ìš”."]}),a===0&&e.jsxs("button",{onClick:()=>d(1),style:{background:"rgba(239, 68, 68, 0.2)",color:"#fca5a5",border:"1px solid rgba(239, 68, 68, 0.4)",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx($,{size:18})," ì›”ë“œ ë°ì´í„° ì´ˆê¸°í™”"]}),a===1&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",padding:"20px",borderRadius:"8px",border:"1px solid #f87171"},children:[e.jsx("div",{style:{color:"#fca5a5",fontWeight:"bold",marginBottom:"15px"},children:"ì •ë§ ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>d(0),disabled:o,style:{flex:1,padding:"10px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",borderRadius:"6px",cursor:"pointer"},children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:c,disabled:o,style:{flex:1,padding:"10px",background:"#ef4444",border:"none",color:"white",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:o?"ì‚­ì œ ì¤‘...":"ë„¤, ì‚­ì œí•©ë‹ˆë‹¤"})]})]}),a===2&&e.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#4ade80"},children:[e.jsx(pe,{size:40,style:{marginBottom:"10px"}}),e.jsx("div",{children:"ì´ˆê¸°í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:()=>d(0),style:{marginTop:"15px",padding:"8px 16px",borderRadius:"6px",background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer"},children:"ëŒì•„ê°€ê¸°"})]})]}),e.jsxs("button",{onClick:l,style:{width:"100%",padding:"20px",borderRadius:"12px",marginTop:"20px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer"},children:[e.jsx(L,{size:20})," ë¡œê·¸ì•„ì›ƒ (í”„ë¡œí•„ ì¬ì„¤ì •)"]})]})},Le=({user:t})=>{const[a,d]=g.useState([]),[o,s]=g.useState(!0);if(!t.isAdmin)return e.jsx("div",{style:{padding:"50px",textAlign:"center"},children:"ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."});const l=async()=>{s(!0);try{const r=await D(w(v,"users"));d(r.docs.map(i=>i.data()))}catch(r){console.error(r)}finally{s(!1)}};g.useEffect(()=>{l()},[]);const c=async r=>{if(r.nickname==="ì¤€í˜"){alert("ê´€ë¦¬ì ìì‹ ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}if(confirm(`ì •ë§ë¡œ '${r.nickname}'ë‹˜ì„ íŒŒí‹°ì—ì„œ ì¶”ë°©í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.`))try{await O(C(v,"users",r.nickname)),alert("ì¶”ë°©ë˜ì—ˆìŠµë‹ˆë‹¤."),l()}catch(i){alert("ì˜¤ë¥˜ ë°œìƒ: "+i.message)}};return e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"20px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(A,{size:24,color:"#fca5a5"}),e.jsx("h2",{style:{margin:0},children:"ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ"})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"30px"},children:[e.jsxs("h3",{style:{margin:"0 0 20px 0"},children:["ë“±ë¡ëœ íŒŒí‹°ì› ê´€ë¦¬ (",a.length,"/4)"]}),o?e.jsx("div",{children:"ë¡œë”© ì¤‘..."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:a.map(r=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#333",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem"},children:r.isAdmin?"ğŸ‘‘":"ğŸ‘¤"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold"},children:[r.nickname," ",r.isAdmin&&e.jsx("span",{style:{color:"#fbbf24",fontSize:"0.8rem"},children:"(Admin)"})]}),e.jsxs("div",{style:{fontSize:"0.8rem",opacity:.6},children:["Class: ",r.className]})]})]}),!r.isAdmin&&e.jsxs("button",{onClick:()=>c(r),style:{background:"rgba(239, 68, 68, 0.2)",color:"#fca5a5",border:"1px solid rgba(239, 68, 68, 0.4)",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(ge,{size:16})," ì¶”ë°©"]})]},r.id))})]})]})},B=[{id:"barbarian",name:"ë°”ë°”ë¦¬ì•ˆ",icon:me,color:"#ef4444"},{id:"bard",name:"ë°”ë“œ",icon:he,color:"#ec4899"},{id:"cleric",name:"í´ë ˆë¦­",icon:ue,color:"#fbbf24"},{id:"druid",name:"ë“œë£¨ì´ë“œ",icon:fe,color:"#22c55e"},{id:"fighter",name:"íŒŒì´í„°",icon:be,color:"#f59e0b"},{id:"monk",name:"ëª½í¬",icon:ye,color:"#3b82f6"},{id:"paladin",name:"íŒ”ë¼ë”˜",icon:A,color:"#eab308"},{id:"ranger",name:"ë ˆì¸ì €",icon:je,color:"#10b981"},{id:"rogue",name:"ë¡œê·¸",icon:ve,color:"#64748b"},{id:"sorcerer",name:"ì†Œì„œëŸ¬",icon:$,color:"#06b6d4"},{id:"warlock",name:"ì›Œë½",icon:Se,color:"#a855f7"},{id:"wizard",name:"ìœ„ìë“œ",icon:we,color:"#6366f1"}],Ne=({onComplete:t})=>{const[a,d]=g.useState(""),[o,s]=g.useState(B[0]),l=c=>{if(c.preventDefault(),!a.trim())return;const r={id:"user_"+Date.now()+Math.random().toString(36).substr(2,9),nickname:a.trim(),classId:o.id,className:o.name,createdAt:new Date().toISOString()};localStorage.setItem("bg3_user_profile",JSON.stringify(r)),t(r)};return e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",background:"linear-gradient(135deg, #1a1c2c 0%, #4a192c 100%)",color:"white"},children:e.jsxs("div",{className:"glass-panel",style:{width:"100%",maxWidth:"400px",padding:"40px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e.jsx(ke,{size:48,color:"#fbbf24",style:{marginBottom:"10px"}}),e.jsx("h1",{style:{fontSize:"1.8rem",margin:"0 0 10px 0"},children:"ëª¨í—˜ê°€ ë“±ë¡"}),e.jsxs("p",{style:{opacity:.7},children:["ë°œë”ìŠ¤ ê²Œì´íŠ¸ë¡œ ë– ë‚˜ê¸° ì „,",e.jsx("br",{}),"ì‹ ë¶„ì„ ì¦ëª…í•˜ì‹­ì‹œì˜¤."]})]}),e.jsxs("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:"25px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"10px",fontSize:"0.9rem",opacity:.8},children:"ë‹‰ë„¤ì„"}),e.jsx("input",{type:"text",value:a,onChange:c=>d(c.target.value),placeholder:"ì˜ˆ: íƒ€ë¸Œ, ì–´ë‘ìš´ì¶©ë™",required:!0,maxLength:10,style:{width:"100%",padding:"12px",boxSizing:"border-box",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:"white",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"10px",fontSize:"0.9rem",opacity:.8},children:"ì§ì—… ì„ íƒ"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px"},children:B.map(c=>{const r=c.icon,i=o.id===c.id;return e.jsxs("div",{onClick:()=>s(c),style:{border:i?`2px solid ${c.color}`:"1px solid rgba(255,255,255,0.1)",background:i?"rgba(255,255,255,0.1)":"transparent",borderRadius:"8px",padding:"10px",cursor:"pointer",textAlign:"center",transition:"all 0.2s"},children:[e.jsx(r,{size:24,color:c.color,style:{marginBottom:"5px"}}),e.jsx("div",{style:{fontSize:"0.8rem"},children:c.name})]},c.id)})})]}),e.jsx("button",{type:"submit",style:{marginTop:"20px",padding:"15px",borderRadius:"8px",background:"var(--accent-color)",border:"none",color:"white",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 15px rgba(0,0,0,0.3)",background:"linear-gradient(90deg, #d97706 0%, #b45309 100%)"},children:"ëª¨í—˜ ì‹œì‘í•˜ê¸° âš”ï¸"})]})]})})},Me=()=>{const[t,a]=g.useState(null),[d,o]=g.useState(1),[s,l]=g.useState("home"),[c,r]=g.useState(window.innerWidth<768);g.useEffect(()=>{const x=localStorage.getItem("bg3_user_profile");x&&a(JSON.parse(x));const f=()=>r(window.innerWidth<768);return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),g.useEffect(()=>{if(!t)return;const x=async()=>{try{await E(C(v,"online_users",t.id),{nickname:t.nickname,classId:t.classId||"unknown",lastSeen:N()},{merge:!0})}catch(n){console.error("Heartbeat fail:",n)}};x();const f=setInterval(x,3e4),b=R(w(v,"online_users")),j=T(b,n=>{const m=Date.now(),h=n.docs.filter(y=>{const u=y.data();if(!u.lastSeen)return!1;const S=u.lastSeen.toDate?u.lastSeen.toDate().getTime():0;return m-S<12e4});o(h.length)});return()=>{clearInterval(f),j()}},[t]);const i=x=>{a(x)},p=()=>{switch(s){case"home":return e.jsx(z,{user:t});case"chat":return e.jsx(Ae,{user:t});case"calendar":return e.jsx(Re,{user:t});case"save":return e.jsx(Be,{user:t});case"settings":return e.jsx(We,{user:t});case"admin":return t.isAdmin?e.jsx(Le,{user:t}):e.jsx(z,{user:t});default:return e.jsx(z,{user:t})}};return t?e.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"var(--bg-color)"},children:[e.jsx(ze,{activeTab:s,setActiveTab:l,isMobile:c,onlineCount:d,user:t}),e.jsx("main",{style:{flex:1,padding:c?"80px 20px 20px":"20px",overflowY:"auto",position:"relative"},children:p()})]}):e.jsx(Ne,{onComplete:i})};function Oe(){return e.jsx(Me,{})}Ce.createRoot(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(Oe,{})}));
